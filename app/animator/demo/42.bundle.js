"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[42],{9885:function(t,i){!function(t){var i=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],n=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,3104,541,1507,4938,6,4191],r="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࢘-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿",e="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟊꟐꟑꟓꟕ-ꟙꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",s={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},h="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",a={5:h,"5module":h+" export import",6:h+" const class extends export import super"},u=/^in(stanceof)?$/,o=new RegExp("["+e+"]"),f=new RegExp("["+e+r+"]");function c(t,i){for(var n=65536,r=0;r<i.length;r+=2){if((n+=i[r])>t)return!1;if((n+=i[r+1])>=t)return!0}return!1}function l(t,i){return t<65?36===t:t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&o.test(String.fromCharCode(t)):!1!==i&&c(t,n)))}function v(t,r){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&f.test(String.fromCharCode(t)):!1!==r&&(c(t,n)||c(t,i)))))}var d=function(t,i){void 0===i&&(i={}),this.label=t,this.keyword=i.keyword,this.beforeExpr=!!i.beforeExpr,this.startsExpr=!!i.startsExpr,this.isLoop=!!i.isLoop,this.isAssign=!!i.isAssign,this.prefix=!!i.prefix,this.postfix=!!i.postfix,this.binop=i.binop||null,this.updateContext=null};function p(t,i){return new d(t,{beforeExpr:!0,binop:i})}var g={beforeExpr:!0},m={startsExpr:!0},w={};function y(t,i){return void 0===i&&(i={}),i.keyword=t,w[t]=new d(t,i)}var b={num:new d("num",m),regexp:new d("regexp",m),string:new d("string",m),name:new d("name",m),privateId:new d("privateId",m),eof:new d("eof"),bracketL:new d("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new d("]"),braceL:new d("{",{beforeExpr:!0,startsExpr:!0}),braceR:new d("}"),parenL:new d("(",{beforeExpr:!0,startsExpr:!0}),parenR:new d(")"),comma:new d(",",g),semi:new d(";",g),colon:new d(":",g),dot:new d("."),question:new d("?",g),questionDot:new d("?."),arrow:new d("=>",g),template:new d("template"),invalidTemplate:new d("invalidTemplate"),ellipsis:new d("...",g),backQuote:new d("`",m),dollarBraceL:new d("${",{beforeExpr:!0,startsExpr:!0}),eq:new d("=",{beforeExpr:!0,isAssign:!0}),assign:new d("_=",{beforeExpr:!0,isAssign:!0}),incDec:new d("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new d("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:p("||",1),logicalAND:p("&&",2),bitwiseOR:p("|",3),bitwiseXOR:p("^",4),bitwiseAND:p("&",5),equality:p("==/!=/===/!==",6),relational:p("</>/<=/>=",7),bitShift:p("<</>>/>>>",8),plusMin:new d("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:p("%",10),star:p("*",10),slash:p("/",10),starstar:new d("**",{beforeExpr:!0}),coalesce:p("??",1),_break:y("break"),_case:y("case",g),_catch:y("catch"),_continue:y("continue"),_debugger:y("debugger"),_default:y("default",g),_do:y("do",{isLoop:!0,beforeExpr:!0}),_else:y("else",g),_finally:y("finally"),_for:y("for",{isLoop:!0}),_function:y("function",m),_if:y("if"),_return:y("return",g),_switch:y("switch"),_throw:y("throw",g),_try:y("try"),_var:y("var"),_const:y("const"),_while:y("while",{isLoop:!0}),_with:y("with"),_new:y("new",{beforeExpr:!0,startsExpr:!0}),_this:y("this",m),_super:y("super",m),_class:y("class",m),_extends:y("extends",g),_export:y("export"),_import:y("import",m),_null:y("null",m),_true:y("true",m),_false:y("false",m),_in:y("in",{beforeExpr:!0,binop:7}),_instanceof:y("instanceof",{beforeExpr:!0,binop:7}),_typeof:y("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:y("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:y("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},_=/\r\n?|\n|\u2028|\u2029/,x=new RegExp(_.source,"g");function S(t){return 10===t||13===t||8232===t||8233===t}function k(t,i,n){void 0===n&&(n=t.length);for(var r=i;r<n;r++){var e=t.charCodeAt(r);if(S(e))return r<n-1&&13===e&&10===t.charCodeAt(r+1)?r+2:r+1}return-1}var C=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,M=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,E=Object.prototype,I=E.hasOwnProperty,P=E.toString,A=Object.hasOwn||function(t,i){return I.call(t,i)},T=Array.isArray||function(t){return"[object Array]"===P.call(t)};function O(t){return new RegExp("^(?:"+t.replace(/ /g,"|")+")$")}function L(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}var z=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,D=function(t,i){this.line=t,this.column=i};D.prototype.offset=function(t){return new D(this.line,this.column+t)};var B=function(t,i,n){this.start=i,this.end=n,null!==t.sourceFile&&(this.source=t.sourceFile)};function N(t,i){for(var n=1,r=0;;){var e=k(t,r,i);if(e<0)return new D(n,i-r);++n,r=e}}var F={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},R=!1;function j(t){var i={};for(var n in F)i[n]=t&&A(t,n)?t[n]:F[n];if("latest"===i.ecmaVersion?i.ecmaVersion=1e8:null==i.ecmaVersion?(!R&&"object"==typeof console&&console.warn&&(R=!0,console.warn("Since Acorn 8.0.0, options.ecmaVersion is required.\nDefaulting to 2020, but this will stop working in the future.")),i.ecmaVersion=11):i.ecmaVersion>=2015&&(i.ecmaVersion-=2009),null==i.allowReserved&&(i.allowReserved=i.ecmaVersion<5),t&&null!=t.allowHashBang||(i.allowHashBang=i.ecmaVersion>=14),T(i.onToken)){var r=i.onToken;i.onToken=function(t){return r.push(t)}}return T(i.onComment)&&(i.onComment=U(i,i.onComment)),i}function U(t,i){return function(n,r,e,s,h,a){var u={type:n?"Block":"Line",value:r,start:e,end:s};t.locations&&(u.loc=new B(this,h,a)),t.ranges&&(u.range=[e,s]),i.push(u)}}var q=1,H=2,V=4,W=8,$=16,G=32,K=64,X=128,J=256,Z=q|H|J;function Q(t,i){return H|(t?V:0)|(i?W:0)}var Y=0,tt=1,it=2,nt=3,rt=4,et=5,st=function(t,i,n){this.options=t=j(t),this.sourceFile=t.sourceFile,this.keywords=O(a[t.ecmaVersion>=6?6:"module"===t.sourceType?"5module":5]);var r="";!0!==t.allowReserved&&(r=s[t.ecmaVersion>=6?6:5===t.ecmaVersion?5:3],"module"===t.sourceType&&(r+=" await")),this.reservedWords=O(r);var e=(r?r+" ":"")+s.strict;this.reservedWordsStrict=O(e),this.reservedWordsStrictBind=O(e+" "+s.strictBind),this.input=String(i),this.containsEsc=!1,n?(this.pos=n,this.lineStart=this.input.lastIndexOf("\n",n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(_).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=b.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===t.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),0===this.pos&&t.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(q),this.regexpState=null,this.privateNameStack=[]},ht={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};st.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)},ht.inFunction.get=function(){return(this.currentVarScope().flags&H)>0},ht.inGenerator.get=function(){return(this.currentVarScope().flags&W)>0&&!this.currentVarScope().inClassFieldInit},ht.inAsync.get=function(){return(this.currentVarScope().flags&V)>0&&!this.currentVarScope().inClassFieldInit},ht.canAwait.get=function(){for(var t=this.scopeStack.length-1;t>=0;t--){var i=this.scopeStack[t];if(i.inClassFieldInit||i.flags&J)return!1;if(i.flags&H)return(i.flags&V)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},ht.allowSuper.get=function(){var t=this.currentThisScope(),i=t.flags,n=t.inClassFieldInit;return(i&K)>0||n||this.options.allowSuperOutsideMethod},ht.allowDirectSuper.get=function(){return(this.currentThisScope().flags&X)>0},ht.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},ht.allowNewDotTarget.get=function(){var t=this.currentThisScope(),i=t.flags,n=t.inClassFieldInit;return(i&(H|J))>0||n},ht.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&J)>0},st.extend=function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];for(var n=this,r=0;r<t.length;r++)n=t[r](n);return n},st.parse=function(t,i){return new this(i,t).parse()},st.parseExpressionAt=function(t,i,n){var r=new this(n,t,i);return r.nextToken(),r.parseExpression()},st.tokenizer=function(t,i){return new this(i,t)},Object.defineProperties(st.prototype,ht);var at=st.prototype,ut=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;at.strictDirective=function(t){if(this.options.ecmaVersion<5)return!1;for(;;){M.lastIndex=t,t+=M.exec(this.input)[0].length;var i=ut.exec(this.input.slice(t));if(!i)return!1;if("use strict"===(i[1]||i[2])){M.lastIndex=t+i[0].length;var n=M.exec(this.input),r=n.index+n[0].length,e=this.input.charAt(r);return";"===e||"}"===e||_.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(e)||"!"===e&&"="===this.input.charAt(r+1))}t+=i[0].length,M.lastIndex=t,t+=M.exec(this.input)[0].length,";"===this.input[t]&&t++}},at.eat=function(t){return this.type===t&&(this.next(),!0)},at.isContextual=function(t){return this.type===b.name&&this.value===t&&!this.containsEsc},at.eatContextual=function(t){return!!this.isContextual(t)&&(this.next(),!0)},at.expectContextual=function(t){this.eatContextual(t)||this.unexpected()},at.canInsertSemicolon=function(){return this.type===b.eof||this.type===b.braceR||_.test(this.input.slice(this.lastTokEnd,this.start))},at.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},at.semicolon=function(){this.eat(b.semi)||this.insertSemicolon()||this.unexpected()},at.afterTrailingComma=function(t,i){if(this.type===t)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),i||this.next(),!0},at.expect=function(t){this.eat(t)||this.unexpected()},at.unexpected=function(t){this.raise(null!=t?t:this.start,"Unexpected token")};var ot=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};at.checkPatternErrors=function(t,i){if(t){t.trailingComma>-1&&this.raiseRecoverable(t.trailingComma,"Comma is not permitted after the rest element");var n=i?t.parenthesizedAssign:t.parenthesizedBind;n>-1&&this.raiseRecoverable(n,i?"Assigning to rvalue":"Parenthesized pattern")}},at.checkExpressionErrors=function(t,i){if(!t)return!1;var n=t.shorthandAssign,r=t.doubleProto;if(!i)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")},at.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},at.isSimpleAssignTarget=function(t){return"ParenthesizedExpression"===t.type?this.isSimpleAssignTarget(t.expression):"Identifier"===t.type||"MemberExpression"===t.type};var ft=st.prototype;ft.parseTopLevel=function(t){var i=Object.create(null);for(t.body||(t.body=[]);this.type!==b.eof;){var n=this.parseStatement(null,!0,i);t.body.push(n)}if(this.inModule)for(var r=0,e=Object.keys(this.undefinedExports);r<e.length;r+=1){var s=e[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(t.body),this.next(),t.sourceType=this.options.sourceType,this.finishNode(t,"Program")};var ct={kind:"loop"},lt={kind:"switch"};ft.isLet=function(t){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;M.lastIndex=this.pos;var i=M.exec(this.input),n=this.pos+i[0].length,r=this.input.charCodeAt(n);if(91===r||92===r)return!0;if(t)return!1;if(123===r||r>55295&&r<56320)return!0;if(l(r,!0)){for(var e=n+1;v(r=this.input.charCodeAt(e),!0);)++e;if(92===r||r>55295&&r<56320)return!0;var s=this.input.slice(n,e);if(!u.test(s))return!0}return!1},ft.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;M.lastIndex=this.pos;var t,i=M.exec(this.input),n=this.pos+i[0].length;return!(_.test(this.input.slice(this.pos,n))||"function"!==this.input.slice(n,n+8)||n+8!==this.input.length&&(v(t=this.input.charCodeAt(n+8))||t>55295&&t<56320))},ft.parseStatement=function(t,i,n){var r,e=this.type,s=this.startNode();switch(this.isLet(t)&&(e=b._var,r="let"),e){case b._break:case b._continue:return this.parseBreakContinueStatement(s,e.keyword);case b._debugger:return this.parseDebuggerStatement(s);case b._do:return this.parseDoStatement(s);case b._for:return this.parseForStatement(s);case b._function:return t&&(this.strict||"if"!==t&&"label"!==t)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(s,!1,!t);case b._class:return t&&this.unexpected(),this.parseClass(s,!0);case b._if:return this.parseIfStatement(s);case b._return:return this.parseReturnStatement(s);case b._switch:return this.parseSwitchStatement(s);case b._throw:return this.parseThrowStatement(s);case b._try:return this.parseTryStatement(s);case b._const:case b._var:return r=r||this.value,t&&"var"!==r&&this.unexpected(),this.parseVarStatement(s,r);case b._while:return this.parseWhileStatement(s);case b._with:return this.parseWithStatement(s);case b.braceL:return this.parseBlock(!0,s);case b.semi:return this.parseEmptyStatement(s);case b._export:case b._import:if(this.options.ecmaVersion>10&&e===b._import){M.lastIndex=this.pos;var h=M.exec(this.input),a=this.pos+h[0].length,u=this.input.charCodeAt(a);if(40===u||46===u)return this.parseExpressionStatement(s,this.parseExpression())}return this.options.allowImportExportEverywhere||(i||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),e===b._import?this.parseImport(s):this.parseExport(s,n);default:if(this.isAsyncFunction())return t&&this.unexpected(),this.next(),this.parseFunctionStatement(s,!0,!t);var o=this.value,f=this.parseExpression();return e===b.name&&"Identifier"===f.type&&this.eat(b.colon)?this.parseLabeledStatement(s,o,f,t):this.parseExpressionStatement(s,f)}},ft.parseBreakContinueStatement=function(t,i){var n="break"===i;this.next(),this.eat(b.semi)||this.insertSemicolon()?t.label=null:this.type!==b.name?this.unexpected():(t.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var e=this.labels[r];if(null==t.label||e.name===t.label.name){if(null!=e.kind&&(n||"loop"===e.kind))break;if(t.label&&n)break}}return r===this.labels.length&&this.raise(t.start,"Unsyntactic "+i),this.finishNode(t,n?"BreakStatement":"ContinueStatement")},ft.parseDebuggerStatement=function(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")},ft.parseDoStatement=function(t){return this.next(),this.labels.push(ct),t.body=this.parseStatement("do"),this.labels.pop(),this.expect(b._while),t.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(b.semi):this.semicolon(),this.finishNode(t,"DoWhileStatement")},ft.parseForStatement=function(t){this.next();var i=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(ct),this.enterScope(0),this.expect(b.parenL),this.type===b.semi)return i>-1&&this.unexpected(i),this.parseFor(t,null);var n=this.isLet();if(this.type===b._var||this.type===b._const||n){var r=this.startNode(),e=n?"let":this.value;return this.next(),this.parseVar(r,!0,e),this.finishNode(r,"VariableDeclaration"),(this.type===b._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&1===r.declarations.length?(this.options.ecmaVersion>=9&&(this.type===b._in?i>-1&&this.unexpected(i):t.await=i>-1),this.parseForIn(t,r)):(i>-1&&this.unexpected(i),this.parseFor(t,r))}var s=this.isContextual("let"),h=!1,a=new ot,u=this.parseExpression(!(i>-1)||"await",a);return this.type===b._in||(h=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===b._in?i>-1&&this.unexpected(i):t.await=i>-1),s&&h&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,a),this.checkLValPattern(u),this.parseForIn(t,u)):(this.checkExpressionErrors(a,!0),i>-1&&this.unexpected(i),this.parseFor(t,u))},ft.parseFunctionStatement=function(t,i,n){return this.next(),this.parseFunction(t,dt|(n?0:pt),!1,i)},ft.parseIfStatement=function(t){return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement("if"),t.alternate=this.eat(b._else)?this.parseStatement("if"):null,this.finishNode(t,"IfStatement")},ft.parseReturnStatement=function(t){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(b.semi)||this.insertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")},ft.parseSwitchStatement=function(t){var i;this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(b.braceL),this.labels.push(lt),this.enterScope(0);for(var n=!1;this.type!==b.braceR;)if(this.type===b._case||this.type===b._default){var r=this.type===b._case;i&&this.finishNode(i,"SwitchCase"),t.cases.push(i=this.startNode()),i.consequent=[],this.next(),r?i.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,i.test=null),this.expect(b.colon)}else i||this.unexpected(),i.consequent.push(this.parseStatement(null));return this.exitScope(),i&&this.finishNode(i,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(t,"SwitchStatement")},ft.parseThrowStatement=function(t){return this.next(),_.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")};var vt=[];ft.parseTryStatement=function(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.type===b._catch){var i=this.startNode();if(this.next(),this.eat(b.parenL)){i.param=this.parseBindingAtom();var n="Identifier"===i.param.type;this.enterScope(n?G:0),this.checkLValPattern(i.param,n?rt:it),this.expect(b.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),i.param=null,this.enterScope(0);i.body=this.parseBlock(!1),this.exitScope(),t.handler=this.finishNode(i,"CatchClause")}return t.finalizer=this.eat(b._finally)?this.parseBlock():null,t.handler||t.finalizer||this.raise(t.start,"Missing catch or finally clause"),this.finishNode(t,"TryStatement")},ft.parseVarStatement=function(t,i){return this.next(),this.parseVar(t,!1,i),this.semicolon(),this.finishNode(t,"VariableDeclaration")},ft.parseWhileStatement=function(t){return this.next(),t.test=this.parseParenExpression(),this.labels.push(ct),t.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(t,"WhileStatement")},ft.parseWithStatement=function(t){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement("with"),this.finishNode(t,"WithStatement")},ft.parseEmptyStatement=function(t){return this.next(),this.finishNode(t,"EmptyStatement")},ft.parseLabeledStatement=function(t,i,n,r){for(var e=0,s=this.labels;e<s.length;e+=1)s[e].name===i&&this.raise(n.start,"Label '"+i+"' is already declared");for(var h=this.type.isLoop?"loop":this.type===b._switch?"switch":null,a=this.labels.length-1;a>=0;a--){var u=this.labels[a];if(u.statementStart!==t.start)break;u.statementStart=this.start,u.kind=h}return this.labels.push({name:i,kind:h,statementStart:this.start}),t.body=this.parseStatement(r?-1===r.indexOf("label")?r+"label":r:"label"),this.labels.pop(),t.label=n,this.finishNode(t,"LabeledStatement")},ft.parseExpressionStatement=function(t,i){return t.expression=i,this.semicolon(),this.finishNode(t,"ExpressionStatement")},ft.parseBlock=function(t,i,n){for(void 0===t&&(t=!0),void 0===i&&(i=this.startNode()),i.body=[],this.expect(b.braceL),t&&this.enterScope(0);this.type!==b.braceR;){var r=this.parseStatement(null);i.body.push(r)}return n&&(this.strict=!1),this.next(),t&&this.exitScope(),this.finishNode(i,"BlockStatement")},ft.parseFor=function(t,i){return t.init=i,this.expect(b.semi),t.test=this.type===b.semi?null:this.parseExpression(),this.expect(b.semi),t.update=this.type===b.parenR?null:this.parseExpression(),this.expect(b.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,"ForStatement")},ft.parseForIn=function(t,i){var n=this.type===b._in;return this.next(),"VariableDeclaration"===i.type&&null!=i.declarations[0].init&&(!n||this.options.ecmaVersion<8||this.strict||"var"!==i.kind||"Identifier"!==i.declarations[0].id.type)&&this.raise(i.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),t.left=i,t.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(b.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,n?"ForInStatement":"ForOfStatement")},ft.parseVar=function(t,i,n){for(t.declarations=[],t.kind=n;;){var r=this.startNode();if(this.parseVarId(r,n),this.eat(b.eq)?r.init=this.parseMaybeAssign(i):"const"!==n||this.type===b._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===r.id.type||i&&(this.type===b._in||this.isContextual("of"))?r.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),t.declarations.push(this.finishNode(r,"VariableDeclarator")),!this.eat(b.comma))break}return t},ft.parseVarId=function(t,i){t.id=this.parseBindingAtom(),this.checkLValPattern(t.id,"var"===i?tt:it,!1)};var dt=1,pt=2,gt=4;function mt(t,i){var n=i.key.name,r=t[n],e="true";return"MethodDefinition"!==i.type||"get"!==i.kind&&"set"!==i.kind||(e=(i.static?"s":"i")+i.kind),"iget"===r&&"iset"===e||"iset"===r&&"iget"===e||"sget"===r&&"sset"===e||"sset"===r&&"sget"===e?(t[n]="true",!1):!!r||(t[n]=e,!1)}function wt(t,i){var n=t.computed,r=t.key;return!n&&("Identifier"===r.type&&r.name===i||"Literal"===r.type&&r.value===i)}ft.parseFunction=function(t,i,n,r,e){this.initFunction(t),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===b.star&&i&pt&&this.unexpected(),t.generator=this.eat(b.star)),this.options.ecmaVersion>=8&&(t.async=!!r),i&dt&&(t.id=i&gt&&this.type!==b.name?null:this.parseIdent(),!t.id||i&pt||this.checkLValSimple(t.id,this.strict||t.generator||t.async?this.treatFunctionsAsVar?tt:it:nt));var s=this.yieldPos,h=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Q(t.async,t.generator)),i&dt||(t.id=this.type===b.name?this.parseIdent():null),this.parseFunctionParams(t),this.parseFunctionBody(t,n,!1,e),this.yieldPos=s,this.awaitPos=h,this.awaitIdentPos=a,this.finishNode(t,i&dt?"FunctionDeclaration":"FunctionExpression")},ft.parseFunctionParams=function(t){this.expect(b.parenL),t.params=this.parseBindingList(b.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},ft.parseClass=function(t,i){this.next();var n=this.strict;this.strict=!0,this.parseClassId(t,i),this.parseClassSuper(t);var r=this.enterClassBody(),e=this.startNode(),s=!1;for(e.body=[],this.expect(b.braceL);this.type!==b.braceR;){var h=this.parseClassElement(null!==t.superClass);h&&(e.body.push(h),"MethodDefinition"===h.type&&"constructor"===h.kind?(s&&this.raise(h.start,"Duplicate constructor in the same class"),s=!0):h.key&&"PrivateIdentifier"===h.key.type&&mt(r,h)&&this.raiseRecoverable(h.key.start,"Identifier '#"+h.key.name+"' has already been declared"))}return this.strict=n,this.next(),t.body=this.finishNode(e,"ClassBody"),this.exitClassBody(),this.finishNode(t,i?"ClassDeclaration":"ClassExpression")},ft.parseClassElement=function(t){if(this.eat(b.semi))return null;var i=this.options.ecmaVersion,n=this.startNode(),r="",e=!1,s=!1,h="method",a=!1;if(this.eatContextual("static")){if(i>=13&&this.eat(b.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===b.star?a=!0:r="static"}if(n.static=a,!r&&i>=8&&this.eatContextual("async")&&(!this.isClassElementNameStart()&&this.type!==b.star||this.canInsertSemicolon()?r="async":s=!0),!r&&(i>=9||!s)&&this.eat(b.star)&&(e=!0),!r&&!s&&!e){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?h=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),i<13||this.type===b.parenL||"method"!==h||e||s){var o=!n.static&&wt(n,"constructor"),f=o&&t;o&&"method"!==h&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=o?"constructor":h,this.parseClassMethod(n,e,s,f)}else this.parseClassField(n);return n},ft.isClassElementNameStart=function(){return this.type===b.name||this.type===b.privateId||this.type===b.num||this.type===b.string||this.type===b.bracketL||this.type.keyword},ft.parseClassElementName=function(t){this.type===b.privateId?("constructor"===this.value&&this.raise(this.start,"Classes can't have an element named '#constructor'"),t.computed=!1,t.key=this.parsePrivateIdent()):this.parsePropertyName(t)},ft.parseClassMethod=function(t,i,n,r){var e=t.key;"constructor"===t.kind?(i&&this.raise(e.start,"Constructor can't be a generator"),n&&this.raise(e.start,"Constructor can't be an async method")):t.static&&wt(t,"prototype")&&this.raise(e.start,"Classes may not have a static property named prototype");var s=t.value=this.parseMethod(i,n,r);return"get"===t.kind&&0!==s.params.length&&this.raiseRecoverable(s.start,"getter should have no params"),"set"===t.kind&&1!==s.params.length&&this.raiseRecoverable(s.start,"setter should have exactly one param"),"set"===t.kind&&"RestElement"===s.params[0].type&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(t,"MethodDefinition")},ft.parseClassField=function(t){if(wt(t,"constructor")?this.raise(t.key.start,"Classes can't have a field named 'constructor'"):t.static&&wt(t,"prototype")&&this.raise(t.key.start,"Classes can't have a static field named 'prototype'"),this.eat(b.eq)){var i=this.currentThisScope(),n=i.inClassFieldInit;i.inClassFieldInit=!0,t.value=this.parseMaybeAssign(),i.inClassFieldInit=n}else t.value=null;return this.semicolon(),this.finishNode(t,"PropertyDefinition")},ft.parseClassStaticBlock=function(t){t.body=[];var i=this.labels;for(this.labels=[],this.enterScope(J|K);this.type!==b.braceR;){var n=this.parseStatement(null);t.body.push(n)}return this.next(),this.exitScope(),this.labels=i,this.finishNode(t,"StaticBlock")},ft.parseClassId=function(t,i){this.type===b.name?(t.id=this.parseIdent(),i&&this.checkLValSimple(t.id,it,!1)):(!0===i&&this.unexpected(),t.id=null)},ft.parseClassSuper=function(t){t.superClass=this.eat(b._extends)?this.parseExprSubscripts(null,!1):null},ft.enterClassBody=function(){var t={declared:Object.create(null),used:[]};return this.privateNameStack.push(t),t.declared},ft.exitClassBody=function(){for(var t=this.privateNameStack.pop(),i=t.declared,n=t.used,r=this.privateNameStack.length,e=0===r?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var h=n[s];A(i,h.name)||(e?e.used.push(h):this.raiseRecoverable(h.start,"Private field '#"+h.name+"' must be declared in an enclosing class"))}},ft.parseExport=function(t,i){if(this.next(),this.eat(b.star))return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(t.exported=this.parseModuleExportName(),this.checkExport(i,t.exported,this.lastTokStart)):t.exported=null),this.expectContextual("from"),this.type!==b.string&&this.unexpected(),t.source=this.parseExprAtom(),this.semicolon(),this.finishNode(t,"ExportAllDeclaration");if(this.eat(b._default)){var n;if(this.checkExport(i,"default",this.lastTokStart),this.type===b._function||(n=this.isAsyncFunction())){var r=this.startNode();this.next(),n&&this.next(),t.declaration=this.parseFunction(r,dt|gt,!1,n)}else if(this.type===b._class){var e=this.startNode();t.declaration=this.parseClass(e,"nullableID")}else t.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(t,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())t.declaration=this.parseStatement(null),"VariableDeclaration"===t.declaration.type?this.checkVariableExport(i,t.declaration.declarations):this.checkExport(i,t.declaration.id,t.declaration.id.start),t.specifiers=[],t.source=null;else{if(t.declaration=null,t.specifiers=this.parseExportSpecifiers(i),this.eatContextual("from"))this.type!==b.string&&this.unexpected(),t.source=this.parseExprAtom();else{for(var s=0,h=t.specifiers;s<h.length;s+=1){var a=h[s];this.checkUnreserved(a.local),this.checkLocalExport(a.local),"Literal"===a.local.type&&this.raise(a.local.start,"A string literal cannot be used as an exported binding without `from`.")}t.source=null}this.semicolon()}return this.finishNode(t,"ExportNamedDeclaration")},ft.checkExport=function(t,i,n){t&&("string"!=typeof i&&(i="Identifier"===i.type?i.name:i.value),A(t,i)&&this.raiseRecoverable(n,"Duplicate export '"+i+"'"),t[i]=!0)},ft.checkPatternExport=function(t,i){var n=i.type;if("Identifier"===n)this.checkExport(t,i,i.start);else if("ObjectPattern"===n)for(var r=0,e=i.properties;r<e.length;r+=1){var s=e[r];this.checkPatternExport(t,s)}else if("ArrayPattern"===n)for(var h=0,a=i.elements;h<a.length;h+=1){var u=a[h];u&&this.checkPatternExport(t,u)}else"Property"===n?this.checkPatternExport(t,i.value):"AssignmentPattern"===n?this.checkPatternExport(t,i.left):"RestElement"===n?this.checkPatternExport(t,i.argument):"ParenthesizedExpression"===n&&this.checkPatternExport(t,i.expression)},ft.checkVariableExport=function(t,i){if(t)for(var n=0,r=i;n<r.length;n+=1){var e=r[n];this.checkPatternExport(t,e.id)}},ft.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},ft.parseExportSpecifiers=function(t){var i=[],n=!0;for(this.expect(b.braceL);!this.eat(b.braceR);){if(n)n=!1;else if(this.expect(b.comma),this.afterTrailingComma(b.braceR))break;var r=this.startNode();r.local=this.parseModuleExportName(),r.exported=this.eatContextual("as")?this.parseModuleExportName():r.local,this.checkExport(t,r.exported,r.exported.start),i.push(this.finishNode(r,"ExportSpecifier"))}return i},ft.parseImport=function(t){return this.next(),this.type===b.string?(t.specifiers=vt,t.source=this.parseExprAtom()):(t.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),t.source=this.type===b.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(t,"ImportDeclaration")},ft.parseImportSpecifiers=function(){var t=[],i=!0;if(this.type===b.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLValSimple(n.local,it),t.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(b.comma))return t}if(this.type===b.star){var r=this.startNode();return this.next(),this.expectContextual("as"),r.local=this.parseIdent(),this.checkLValSimple(r.local,it),t.push(this.finishNode(r,"ImportNamespaceSpecifier")),t}for(this.expect(b.braceL);!this.eat(b.braceR);){if(i)i=!1;else if(this.expect(b.comma),this.afterTrailingComma(b.braceR))break;var e=this.startNode();e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,it),t.push(this.finishNode(e,"ImportSpecifier"))}return t},ft.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===b.string){var t=this.parseLiteral(this.value);return z.test(t.value)&&this.raise(t.start,"An export name cannot include a lone surrogate."),t}return this.parseIdent(!0)},ft.adaptDirectivePrologue=function(t){for(var i=0;i<t.length&&this.isDirectiveCandidate(t[i]);++i)t[i].directive=t[i].expression.raw.slice(1,-1)},ft.isDirectiveCandidate=function(t){return this.options.ecmaVersion>=5&&"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"string"==typeof t.expression.value&&('"'===this.input[t.start]||"'"===this.input[t.start])};var yt=st.prototype;yt.toAssignable=function(t,i,n){if(this.options.ecmaVersion>=6&&t)switch(t.type){case"Identifier":this.inAsync&&"await"===t.name&&this.raise(t.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":t.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,e=t.properties;r<e.length;r+=1){var s=e[r];this.toAssignable(s,i),"RestElement"!==s.type||"ArrayPattern"!==s.argument.type&&"ObjectPattern"!==s.argument.type||this.raise(s.argument.start,"Unexpected token")}break;case"Property":"init"!==t.kind&&this.raise(t.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(t.value,i);break;case"ArrayExpression":t.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(t.elements,i);break;case"SpreadElement":t.type="RestElement",this.toAssignable(t.argument,i),"AssignmentPattern"===t.argument.type&&this.raise(t.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==t.operator&&this.raise(t.left.end,"Only '=' operator can be used for specifying default value."),t.type="AssignmentPattern",delete t.operator,this.toAssignable(t.left,i);break;case"ParenthesizedExpression":this.toAssignable(t.expression,i,n);break;case"ChainExpression":this.raiseRecoverable(t.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!i)break;default:this.raise(t.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return t},yt.toAssignableList=function(t,i){for(var n=t.length,r=0;r<n;r++){var e=t[r];e&&this.toAssignable(e,i)}if(n){var s=t[n-1];6===this.options.ecmaVersion&&i&&s&&"RestElement"===s.type&&"Identifier"!==s.argument.type&&this.unexpected(s.argument.start)}return t},yt.parseSpread=function(t){var i=this.startNode();return this.next(),i.argument=this.parseMaybeAssign(!1,t),this.finishNode(i,"SpreadElement")},yt.parseRestBinding=function(){var t=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==b.name&&this.unexpected(),t.argument=this.parseBindingAtom(),this.finishNode(t,"RestElement")},yt.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case b.bracketL:var t=this.startNode();return this.next(),t.elements=this.parseBindingList(b.bracketR,!0,!0),this.finishNode(t,"ArrayPattern");case b.braceL:return this.parseObj(!0)}return this.parseIdent()},yt.parseBindingList=function(t,i,n){for(var r=[],e=!0;!this.eat(t);)if(e?e=!1:this.expect(b.comma),i&&this.type===b.comma)r.push(null);else{if(n&&this.afterTrailingComma(t))break;if(this.type===b.ellipsis){var s=this.parseRestBinding();this.parseBindingListItem(s),r.push(s),this.type===b.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(t);break}var h=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(h),r.push(h)}return r},yt.parseBindingListItem=function(t){return t},yt.parseMaybeDefault=function(t,i,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(b.eq))return n;var r=this.startNodeAt(t,i);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")},yt.checkLValSimple=function(t,i,n){void 0===i&&(i=Y);var r=i!==Y;switch(t.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(t.name)&&this.raiseRecoverable(t.start,(r?"Binding ":"Assigning to ")+t.name+" in strict mode"),r&&(i===it&&"let"===t.name&&this.raiseRecoverable(t.start,"let is disallowed as a lexically bound name"),n&&(A(n,t.name)&&this.raiseRecoverable(t.start,"Argument name clash"),n[t.name]=!0),i!==et&&this.declareName(t.name,i,t.start));break;case"ChainExpression":this.raiseRecoverable(t.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(t.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(t.start,"Binding parenthesized expression"),this.checkLValSimple(t.expression,i,n);default:this.raise(t.start,(r?"Binding":"Assigning to")+" rvalue")}},yt.checkLValPattern=function(t,i,n){switch(void 0===i&&(i=Y),t.type){case"ObjectPattern":for(var r=0,e=t.properties;r<e.length;r+=1){var s=e[r];this.checkLValInnerPattern(s,i,n)}break;case"ArrayPattern":for(var h=0,a=t.elements;h<a.length;h+=1){var u=a[h];u&&this.checkLValInnerPattern(u,i,n)}break;default:this.checkLValSimple(t,i,n)}},yt.checkLValInnerPattern=function(t,i,n){switch(void 0===i&&(i=Y),t.type){case"Property":this.checkLValInnerPattern(t.value,i,n);break;case"AssignmentPattern":this.checkLValPattern(t.left,i,n);break;case"RestElement":this.checkLValPattern(t.argument,i,n);break;default:this.checkLValPattern(t,i,n)}};var bt=function(t,i,n,r,e){this.token=t,this.isExpr=!!i,this.preserveSpace=!!n,this.override=r,this.generator=!!e},_t={b_stat:new bt("{",!1),b_expr:new bt("{",!0),b_tmpl:new bt("${",!1),p_stat:new bt("(",!1),p_expr:new bt("(",!0),q_tmpl:new bt("`",!0,!0,(function(t){return t.tryReadTemplateToken()})),f_stat:new bt("function",!1),f_expr:new bt("function",!0),f_expr_gen:new bt("function",!0,!1,null,!0),f_gen:new bt("function",!1,!1,null,!0)},xt=st.prototype;xt.initialContext=function(){return[_t.b_stat]},xt.curContext=function(){return this.context[this.context.length-1]},xt.braceIsBlock=function(t){var i=this.curContext();return i===_t.f_expr||i===_t.f_stat||(t!==b.colon||i!==_t.b_stat&&i!==_t.b_expr?t===b._return||t===b.name&&this.exprAllowed?_.test(this.input.slice(this.lastTokEnd,this.start)):t===b._else||t===b.semi||t===b.eof||t===b.parenR||t===b.arrow||(t===b.braceL?i===_t.b_stat:t!==b._var&&t!==b._const&&t!==b.name&&!this.exprAllowed):!i.isExpr)},xt.inGeneratorContext=function(){for(var t=this.context.length-1;t>=1;t--){var i=this.context[t];if("function"===i.token)return i.generator}return!1},xt.updateContext=function(t){var i,n=this.type;n.keyword&&t===b.dot?this.exprAllowed=!1:(i=n.updateContext)?i.call(this,t):this.exprAllowed=n.beforeExpr},xt.overrideContext=function(t){this.curContext()!==t&&(this.context[this.context.length-1]=t)},b.parenR.updateContext=b.braceR.updateContext=function(){if(1!==this.context.length){var t=this.context.pop();t===_t.b_stat&&"function"===this.curContext().token&&(t=this.context.pop()),this.exprAllowed=!t.isExpr}else this.exprAllowed=!0},b.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?_t.b_stat:_t.b_expr),this.exprAllowed=!0},b.dollarBraceL.updateContext=function(){this.context.push(_t.b_tmpl),this.exprAllowed=!0},b.parenL.updateContext=function(t){var i=t===b._if||t===b._for||t===b._with||t===b._while;this.context.push(i?_t.p_stat:_t.p_expr),this.exprAllowed=!0},b.incDec.updateContext=function(){},b._function.updateContext=b._class.updateContext=function(t){!t.beforeExpr||t===b._else||t===b.semi&&this.curContext()!==_t.p_stat||t===b._return&&_.test(this.input.slice(this.lastTokEnd,this.start))||(t===b.colon||t===b.braceL)&&this.curContext()===_t.b_stat?this.context.push(_t.f_stat):this.context.push(_t.f_expr),this.exprAllowed=!1},b.backQuote.updateContext=function(){this.curContext()===_t.q_tmpl?this.context.pop():this.context.push(_t.q_tmpl),this.exprAllowed=!1},b.star.updateContext=function(t){if(t===b._function){var i=this.context.length-1;this.context[i]===_t.f_expr?this.context[i]=_t.f_expr_gen:this.context[i]=_t.f_gen}this.exprAllowed=!0},b.name.updateContext=function(t){var i=!1;this.options.ecmaVersion>=6&&t!==b.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(i=!0),this.exprAllowed=i};var St=st.prototype;function kt(t){return"MemberExpression"===t.type&&"PrivateIdentifier"===t.property.type||"ChainExpression"===t.type&&kt(t.expression)}St.checkPropClash=function(t,i,n){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===t.type||this.options.ecmaVersion>=6&&(t.computed||t.method||t.shorthand))){var r,e=t.key;switch(e.type){case"Identifier":r=e.name;break;case"Literal":r=String(e.value);break;default:return}var s=t.kind;if(this.options.ecmaVersion>=6)"__proto__"===r&&"init"===s&&(i.proto&&(n?n.doubleProto<0&&(n.doubleProto=e.start):this.raiseRecoverable(e.start,"Redefinition of __proto__ property")),i.proto=!0);else{var h=i[r="$"+r];h?("init"===s?this.strict&&h.init||h.get||h.set:h.init||h[s])&&this.raiseRecoverable(e.start,"Redefinition of property"):h=i[r]={init:!1,get:!1,set:!1},h[s]=!0}}},St.parseExpression=function(t,i){var n=this.start,r=this.startLoc,e=this.parseMaybeAssign(t,i);if(this.type===b.comma){var s=this.startNodeAt(n,r);for(s.expressions=[e];this.eat(b.comma);)s.expressions.push(this.parseMaybeAssign(t,i));return this.finishNode(s,"SequenceExpression")}return e},St.parseMaybeAssign=function(t,i,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(t);this.exprAllowed=!1}var r=!1,e=-1,s=-1,h=-1;i?(e=i.parenthesizedAssign,s=i.trailingComma,h=i.doubleProto,i.parenthesizedAssign=i.trailingComma=-1):(i=new ot,r=!0);var a=this.start,u=this.startLoc;this.type!==b.parenL&&this.type!==b.name||(this.potentialArrowAt=this.start,this.potentialArrowInForAwait="await"===t);var o=this.parseMaybeConditional(t,i);if(n&&(o=n.call(this,o,a,u)),this.type.isAssign){var f=this.startNodeAt(a,u);return f.operator=this.value,this.type===b.eq&&(o=this.toAssignable(o,!1,i)),r||(i.parenthesizedAssign=i.trailingComma=i.doubleProto=-1),i.shorthandAssign>=o.start&&(i.shorthandAssign=-1),this.type===b.eq?this.checkLValPattern(o):this.checkLValSimple(o),f.left=o,this.next(),f.right=this.parseMaybeAssign(t),h>-1&&(i.doubleProto=h),this.finishNode(f,"AssignmentExpression")}return r&&this.checkExpressionErrors(i,!0),e>-1&&(i.parenthesizedAssign=e),s>-1&&(i.trailingComma=s),o},St.parseMaybeConditional=function(t,i){var n=this.start,r=this.startLoc,e=this.parseExprOps(t,i);if(this.checkExpressionErrors(i))return e;if(this.eat(b.question)){var s=this.startNodeAt(n,r);return s.test=e,s.consequent=this.parseMaybeAssign(),this.expect(b.colon),s.alternate=this.parseMaybeAssign(t),this.finishNode(s,"ConditionalExpression")}return e},St.parseExprOps=function(t,i){var n=this.start,r=this.startLoc,e=this.parseMaybeUnary(i,!1,!1,t);return this.checkExpressionErrors(i)||e.start===n&&"ArrowFunctionExpression"===e.type?e:this.parseExprOp(e,n,r,-1,t)},St.parseExprOp=function(t,i,n,r,e){var s=this.type.binop;if(null!=s&&(!e||this.type!==b._in)&&s>r){var h=this.type===b.logicalOR||this.type===b.logicalAND,a=this.type===b.coalesce;a&&(s=b.logicalAND.binop);var u=this.value;this.next();var o=this.start,f=this.startLoc,c=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,e),o,f,s,e),l=this.buildBinary(i,n,t,c,u,h||a);return(h&&this.type===b.coalesce||a&&(this.type===b.logicalOR||this.type===b.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(l,i,n,r,e)}return t},St.buildBinary=function(t,i,n,r,e,s){"PrivateIdentifier"===r.type&&this.raise(r.start,"Private identifier can only be left side of binary expression");var h=this.startNodeAt(t,i);return h.left=n,h.operator=e,h.right=r,this.finishNode(h,s?"LogicalExpression":"BinaryExpression")},St.parseMaybeUnary=function(t,i,n,r){var e,s=this.start,h=this.startLoc;if(this.isContextual("await")&&this.canAwait)e=this.parseAwait(r),i=!0;else if(this.type.prefix){var a=this.startNode(),u=this.type===b.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,u,r),this.checkExpressionErrors(t,!0),u?this.checkLValSimple(a.argument):this.strict&&"delete"===a.operator&&"Identifier"===a.argument.type?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):"delete"===a.operator&&kt(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):i=!0,e=this.finishNode(a,u?"UpdateExpression":"UnaryExpression")}else if(i||this.type!==b.privateId){if(e=this.parseExprSubscripts(t,r),this.checkExpressionErrors(t))return e;for(;this.type.postfix&&!this.canInsertSemicolon();){var o=this.startNodeAt(s,h);o.operator=this.value,o.prefix=!1,o.argument=e,this.checkLValSimple(e),this.next(),e=this.finishNode(o,"UpdateExpression")}}else(r||0===this.privateNameStack.length)&&this.unexpected(),e=this.parsePrivateIdent(),this.type!==b._in&&this.unexpected();return n||!this.eat(b.starstar)?e:i?void this.unexpected(this.lastTokStart):this.buildBinary(s,h,e,this.parseMaybeUnary(null,!1,!1,r),"**",!1)},St.parseExprSubscripts=function(t,i){var n=this.start,r=this.startLoc,e=this.parseExprAtom(t,i);if("ArrowFunctionExpression"===e.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return e;var s=this.parseSubscripts(e,n,r,!1,i);return t&&"MemberExpression"===s.type&&(t.parenthesizedAssign>=s.start&&(t.parenthesizedAssign=-1),t.parenthesizedBind>=s.start&&(t.parenthesizedBind=-1),t.trailingComma>=s.start&&(t.trailingComma=-1)),s},St.parseSubscripts=function(t,i,n,r,e){for(var s=this.options.ecmaVersion>=8&&"Identifier"===t.type&&"async"===t.name&&this.lastTokEnd===t.end&&!this.canInsertSemicolon()&&t.end-t.start==5&&this.potentialArrowAt===t.start,h=!1;;){var a=this.parseSubscript(t,i,n,r,s,h,e);if(a.optional&&(h=!0),a===t||"ArrowFunctionExpression"===a.type){if(h){var u=this.startNodeAt(i,n);u.expression=a,a=this.finishNode(u,"ChainExpression")}return a}t=a}},St.parseSubscript=function(t,i,n,r,e,s,h){var a=this.options.ecmaVersion>=11,u=a&&this.eat(b.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var o=this.eat(b.bracketL);if(o||u&&this.type!==b.parenL&&this.type!==b.backQuote||this.eat(b.dot)){var f=this.startNodeAt(i,n);f.object=t,o?(f.property=this.parseExpression(),this.expect(b.bracketR)):this.type===b.privateId&&"Super"!==t.type?f.property=this.parsePrivateIdent():f.property=this.parseIdent("never"!==this.options.allowReserved),f.computed=!!o,a&&(f.optional=u),t=this.finishNode(f,"MemberExpression")}else if(!r&&this.eat(b.parenL)){var c=new ot,l=this.yieldPos,v=this.awaitPos,d=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var p=this.parseExprList(b.parenR,this.options.ecmaVersion>=8,!1,c);if(e&&!u&&!this.canInsertSemicolon()&&this.eat(b.arrow))return this.checkPatternErrors(c,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=l,this.awaitPos=v,this.awaitIdentPos=d,this.parseArrowExpression(this.startNodeAt(i,n),p,!0,h);this.checkExpressionErrors(c,!0),this.yieldPos=l||this.yieldPos,this.awaitPos=v||this.awaitPos,this.awaitIdentPos=d||this.awaitIdentPos;var g=this.startNodeAt(i,n);g.callee=t,g.arguments=p,a&&(g.optional=u),t=this.finishNode(g,"CallExpression")}else if(this.type===b.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var m=this.startNodeAt(i,n);m.tag=t,m.quasi=this.parseTemplate({isTagged:!0}),t=this.finishNode(m,"TaggedTemplateExpression")}return t},St.parseExprAtom=function(t,i){this.type===b.slash&&this.readRegexp();var n,r=this.potentialArrowAt===this.start;switch(this.type){case b._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),n=this.startNode(),this.next(),this.type!==b.parenL||this.allowDirectSuper||this.raise(n.start,"super() call outside constructor of a subclass"),this.type!==b.dot&&this.type!==b.bracketL&&this.type!==b.parenL&&this.unexpected(),this.finishNode(n,"Super");case b._this:return n=this.startNode(),this.next(),this.finishNode(n,"ThisExpression");case b.name:var e=this.start,s=this.startLoc,h=this.containsEsc,a=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!h&&"async"===a.name&&!this.canInsertSemicolon()&&this.eat(b._function))return this.overrideContext(_t.f_expr),this.parseFunction(this.startNodeAt(e,s),0,!1,!0,i);if(r&&!this.canInsertSemicolon()){if(this.eat(b.arrow))return this.parseArrowExpression(this.startNodeAt(e,s),[a],!1,i);if(this.options.ecmaVersion>=8&&"async"===a.name&&this.type===b.name&&!h&&(!this.potentialArrowInForAwait||"of"!==this.value||this.containsEsc))return a=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(b.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(e,s),[a],!0,i)}return a;case b.regexp:var u=this.value;return(n=this.parseLiteral(u.value)).regex={pattern:u.pattern,flags:u.flags},n;case b.num:case b.string:return this.parseLiteral(this.value);case b._null:case b._true:case b._false:return(n=this.startNode()).value=this.type===b._null?null:this.type===b._true,n.raw=this.type.keyword,this.next(),this.finishNode(n,"Literal");case b.parenL:var o=this.start,f=this.parseParenAndDistinguishExpression(r,i);return t&&(t.parenthesizedAssign<0&&!this.isSimpleAssignTarget(f)&&(t.parenthesizedAssign=o),t.parenthesizedBind<0&&(t.parenthesizedBind=o)),f;case b.bracketL:return n=this.startNode(),this.next(),n.elements=this.parseExprList(b.bracketR,!0,!0,t),this.finishNode(n,"ArrayExpression");case b.braceL:return this.overrideContext(_t.b_expr),this.parseObj(!1,t);case b._function:return n=this.startNode(),this.next(),this.parseFunction(n,0);case b._class:return this.parseClass(this.startNode(),!1);case b._new:return this.parseNew();case b.backQuote:return this.parseTemplate();case b._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}},St.parseExprImport=function(){var t=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var i=this.parseIdent(!0);switch(this.type){case b.parenL:return this.parseDynamicImport(t);case b.dot:return t.meta=i,this.parseImportMeta(t);default:this.unexpected()}},St.parseDynamicImport=function(t){if(this.next(),t.source=this.parseMaybeAssign(),!this.eat(b.parenR)){var i=this.start;this.eat(b.comma)&&this.eat(b.parenR)?this.raiseRecoverable(i,"Trailing comma is not allowed in import()"):this.unexpected(i)}return this.finishNode(t,"ImportExpression")},St.parseImportMeta=function(t){this.next();var i=this.containsEsc;return t.property=this.parseIdent(!0),"meta"!==t.property.name&&this.raiseRecoverable(t.property.start,"The only valid meta property for import is 'import.meta'"),i&&this.raiseRecoverable(t.start,"'import.meta' must not contain escaped characters"),"module"===this.options.sourceType||this.options.allowImportExportEverywhere||this.raiseRecoverable(t.start,"Cannot use 'import.meta' outside a module"),this.finishNode(t,"MetaProperty")},St.parseLiteral=function(t){var i=this.startNode();return i.value=t,i.raw=this.input.slice(this.start,this.end),110===i.raw.charCodeAt(i.raw.length-1)&&(i.bigint=i.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(i,"Literal")},St.parseParenExpression=function(){this.expect(b.parenL);var t=this.parseExpression();return this.expect(b.parenR),t},St.parseParenAndDistinguishExpression=function(t,i){var n,r=this.start,e=this.startLoc,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var h,a=this.start,u=this.startLoc,o=[],f=!0,c=!1,l=new ot,v=this.yieldPos,d=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==b.parenR;){if(f?f=!1:this.expect(b.comma),s&&this.afterTrailingComma(b.parenR,!0)){c=!0;break}if(this.type===b.ellipsis){h=this.start,o.push(this.parseParenItem(this.parseRestBinding())),this.type===b.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}o.push(this.parseMaybeAssign(!1,l,this.parseParenItem))}var p=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(b.parenR),t&&!this.canInsertSemicolon()&&this.eat(b.arrow))return this.checkPatternErrors(l,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=v,this.awaitPos=d,this.parseParenArrowList(r,e,o,i);o.length&&!c||this.unexpected(this.lastTokStart),h&&this.unexpected(h),this.checkExpressionErrors(l,!0),this.yieldPos=v||this.yieldPos,this.awaitPos=d||this.awaitPos,o.length>1?((n=this.startNodeAt(a,u)).expressions=o,this.finishNodeAt(n,"SequenceExpression",p,g)):n=o[0]}else n=this.parseParenExpression();if(this.options.preserveParens){var m=this.startNodeAt(r,e);return m.expression=n,this.finishNode(m,"ParenthesizedExpression")}return n},St.parseParenItem=function(t){return t},St.parseParenArrowList=function(t,i,n,r){return this.parseArrowExpression(this.startNodeAt(t,i),n,!1,r)};var Ct=[];St.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var t=this.startNode(),i=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(b.dot)){t.meta=i;var n=this.containsEsc;return t.property=this.parseIdent(!0),"target"!==t.property.name&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(t.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(t.start,"'new.target' can only be used in functions and class static block"),this.finishNode(t,"MetaProperty")}var r=this.start,e=this.startLoc,s=this.type===b._import;return t.callee=this.parseSubscripts(this.parseExprAtom(),r,e,!0,!1),s&&"ImportExpression"===t.callee.type&&this.raise(r,"Cannot use new with import()"),this.eat(b.parenL)?t.arguments=this.parseExprList(b.parenR,this.options.ecmaVersion>=8,!1):t.arguments=Ct,this.finishNode(t,"NewExpression")},St.parseTemplateElement=function(t){var i=t.isTagged,n=this.startNode();return this.type===b.invalidTemplate?(i||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),n.tail=this.type===b.backQuote,this.finishNode(n,"TemplateElement")},St.parseTemplate=function(t){void 0===t&&(t={});var i=t.isTagged;void 0===i&&(i=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:i});for(n.quasis=[r];!r.tail;)this.type===b.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(b.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(b.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:i}));return this.next(),this.finishNode(n,"TemplateLiteral")},St.isAsyncProp=function(t){return!t.computed&&"Identifier"===t.key.type&&"async"===t.key.name&&(this.type===b.name||this.type===b.num||this.type===b.string||this.type===b.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===b.star)&&!_.test(this.input.slice(this.lastTokEnd,this.start))},St.parseObj=function(t,i){var n=this.startNode(),r=!0,e={};for(n.properties=[],this.next();!this.eat(b.braceR);){if(r)r=!1;else if(this.expect(b.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(b.braceR))break;var s=this.parseProperty(t,i);t||this.checkPropClash(s,e,i),n.properties.push(s)}return this.finishNode(n,t?"ObjectPattern":"ObjectExpression")},St.parseProperty=function(t,i){var n,r,e,s,h=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(b.ellipsis))return t?(h.argument=this.parseIdent(!1),this.type===b.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(h,"RestElement")):(h.argument=this.parseMaybeAssign(!1,i),this.type===b.comma&&i&&i.trailingComma<0&&(i.trailingComma=this.start),this.finishNode(h,"SpreadElement"));this.options.ecmaVersion>=6&&(h.method=!1,h.shorthand=!1,(t||i)&&(e=this.start,s=this.startLoc),t||(n=this.eat(b.star)));var a=this.containsEsc;return this.parsePropertyName(h),!t&&!a&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(h)?(r=!0,n=this.options.ecmaVersion>=9&&this.eat(b.star),this.parsePropertyName(h)):r=!1,this.parsePropertyValue(h,t,n,r,e,s,i,a),this.finishNode(h,"Property")},St.parsePropertyValue=function(t,i,n,r,e,s,h,a){if((n||r)&&this.type===b.colon&&this.unexpected(),this.eat(b.colon))t.value=i?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,h),t.kind="init";else if(this.options.ecmaVersion>=6&&this.type===b.parenL)i&&this.unexpected(),t.kind="init",t.method=!0,t.value=this.parseMethod(n,r);else if(i||a||!(this.options.ecmaVersion>=5)||t.computed||"Identifier"!==t.key.type||"get"!==t.key.name&&"set"!==t.key.name||this.type===b.comma||this.type===b.braceR||this.type===b.eq)this.options.ecmaVersion>=6&&!t.computed&&"Identifier"===t.key.type?((n||r)&&this.unexpected(),this.checkUnreserved(t.key),"await"!==t.key.name||this.awaitIdentPos||(this.awaitIdentPos=e),t.kind="init",i?t.value=this.parseMaybeDefault(e,s,this.copyNode(t.key)):this.type===b.eq&&h?(h.shorthandAssign<0&&(h.shorthandAssign=this.start),t.value=this.parseMaybeDefault(e,s,this.copyNode(t.key))):t.value=this.copyNode(t.key),t.shorthand=!0):this.unexpected();else{(n||r)&&this.unexpected(),t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1);var u="get"===t.kind?0:1;if(t.value.params.length!==u){var o=t.value.start;"get"===t.kind?this.raiseRecoverable(o,"getter should have no params"):this.raiseRecoverable(o,"setter should have exactly one param")}else"set"===t.kind&&"RestElement"===t.value.params[0].type&&this.raiseRecoverable(t.value.params[0].start,"Setter cannot use rest params")}},St.parsePropertyName=function(t){if(this.options.ecmaVersion>=6){if(this.eat(b.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(b.bracketR),t.key;t.computed=!1}return t.key=this.type===b.num||this.type===b.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},St.initFunction=function(t){t.id=null,this.options.ecmaVersion>=6&&(t.generator=t.expression=!1),this.options.ecmaVersion>=8&&(t.async=!1)},St.parseMethod=function(t,i,n){var r=this.startNode(),e=this.yieldPos,s=this.awaitPos,h=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=t),this.options.ecmaVersion>=8&&(r.async=!!i),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Q(i,r.generator)|K|(n?X:0)),this.expect(b.parenL),r.params=this.parseBindingList(b.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=e,this.awaitPos=s,this.awaitIdentPos=h,this.finishNode(r,"FunctionExpression")},St.parseArrowExpression=function(t,i,n,r){var e=this.yieldPos,s=this.awaitPos,h=this.awaitIdentPos;return this.enterScope(Q(n,!1)|$),this.initFunction(t),this.options.ecmaVersion>=8&&(t.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,t.params=this.toAssignableList(i,!0),this.parseFunctionBody(t,!0,!1,r),this.yieldPos=e,this.awaitPos=s,this.awaitIdentPos=h,this.finishNode(t,"ArrowFunctionExpression")},St.parseFunctionBody=function(t,i,n,r){var e=i&&this.type!==b.braceL,s=this.strict,h=!1;if(e)t.body=this.parseMaybeAssign(r),t.expression=!0,this.checkParams(t,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(t.params);s&&!a||(h=this.strictDirective(this.end))&&a&&this.raiseRecoverable(t.start,"Illegal 'use strict' directive in function with non-simple parameter list");var u=this.labels;this.labels=[],h&&(this.strict=!0),this.checkParams(t,!s&&!h&&!i&&!n&&this.isSimpleParamList(t.params)),this.strict&&t.id&&this.checkLValSimple(t.id,et),t.body=this.parseBlock(!1,void 0,h&&!s),t.expression=!1,this.adaptDirectivePrologue(t.body.body),this.labels=u}this.exitScope()},St.isSimpleParamList=function(t){for(var i=0,n=t;i<n.length;i+=1)if("Identifier"!==n[i].type)return!1;return!0},St.checkParams=function(t,i){for(var n=Object.create(null),r=0,e=t.params;r<e.length;r+=1){var s=e[r];this.checkLValInnerPattern(s,tt,i?null:n)}},St.parseExprList=function(t,i,n,r){for(var e=[],s=!0;!this.eat(t);){if(s)s=!1;else if(this.expect(b.comma),i&&this.afterTrailingComma(t))break;var h=void 0;n&&this.type===b.comma?h=null:this.type===b.ellipsis?(h=this.parseSpread(r),r&&this.type===b.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):h=this.parseMaybeAssign(!1,r),e.push(h)}return e},St.checkUnreserved=function(t){var i=t.start,n=t.end,r=t.name;this.inGenerator&&"yield"===r&&this.raiseRecoverable(i,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===r&&this.raiseRecoverable(i,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&"arguments"===r&&this.raiseRecoverable(i,"Cannot use 'arguments' in class field initializer"),!this.inClassStaticBlock||"arguments"!==r&&"await"!==r||this.raise(i,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(i,"Unexpected keyword '"+r+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(i,n).indexOf("\\")||(this.strict?this.reservedWordsStrict:this.reservedWords).test(r)&&(this.inAsync||"await"!==r||this.raiseRecoverable(i,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(i,"The keyword '"+r+"' is reserved"))},St.parseIdent=function(t){var i=this.startNode();return this.type===b.name?i.name=this.value:this.type.keyword?(i.name=this.type.keyword,"class"!==i.name&&"function"!==i.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(!!t),this.finishNode(i,"Identifier"),t||(this.checkUnreserved(i),"await"!==i.name||this.awaitIdentPos||(this.awaitIdentPos=i.start)),i},St.parsePrivateIdent=function(){var t=this.startNode();return this.type===b.privateId?t.name=this.value:this.unexpected(),this.next(),this.finishNode(t,"PrivateIdentifier"),0===this.privateNameStack.length?this.raise(t.start,"Private field '#"+t.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(t),t},St.parseYield=function(t){this.yieldPos||(this.yieldPos=this.start);var i=this.startNode();return this.next(),this.type===b.semi||this.canInsertSemicolon()||this.type!==b.star&&!this.type.startsExpr?(i.delegate=!1,i.argument=null):(i.delegate=this.eat(b.star),i.argument=this.parseMaybeAssign(t)),this.finishNode(i,"YieldExpression")},St.parseAwait=function(t){this.awaitPos||(this.awaitPos=this.start);var i=this.startNode();return this.next(),i.argument=this.parseMaybeUnary(null,!0,!1,t),this.finishNode(i,"AwaitExpression")};var Mt=st.prototype;Mt.raise=function(t,i){var n=N(this.input,t);i+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(i);throw r.pos=t,r.loc=n,r.raisedAt=this.pos,r},Mt.raiseRecoverable=Mt.raise,Mt.curPosition=function(){if(this.options.locations)return new D(this.curLine,this.pos-this.lineStart)};var Et=st.prototype,It=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};Et.enterScope=function(t){this.scopeStack.push(new It(t))},Et.exitScope=function(){this.scopeStack.pop()},Et.treatFunctionsAsVarInScope=function(t){return t.flags&H||!this.inModule&&t.flags&q},Et.declareName=function(t,i,n){var r=!1;if(i===it){var e=this.currentScope();r=e.lexical.indexOf(t)>-1||e.functions.indexOf(t)>-1||e.var.indexOf(t)>-1,e.lexical.push(t),this.inModule&&e.flags&q&&delete this.undefinedExports[t]}else if(i===rt)this.currentScope().lexical.push(t);else if(i===nt){var s=this.currentScope();r=this.treatFunctionsAsVar?s.lexical.indexOf(t)>-1:s.lexical.indexOf(t)>-1||s.var.indexOf(t)>-1,s.functions.push(t)}else for(var h=this.scopeStack.length-1;h>=0;--h){var a=this.scopeStack[h];if(a.lexical.indexOf(t)>-1&&!(a.flags&G&&a.lexical[0]===t)||!this.treatFunctionsAsVarInScope(a)&&a.functions.indexOf(t)>-1){r=!0;break}if(a.var.push(t),this.inModule&&a.flags&q&&delete this.undefinedExports[t],a.flags&Z)break}r&&this.raiseRecoverable(n,"Identifier '"+t+"' has already been declared")},Et.checkLocalExport=function(t){-1===this.scopeStack[0].lexical.indexOf(t.name)&&-1===this.scopeStack[0].var.indexOf(t.name)&&(this.undefinedExports[t.name]=t)},Et.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},Et.currentVarScope=function(){for(var t=this.scopeStack.length-1;;t--){var i=this.scopeStack[t];if(i.flags&Z)return i}},Et.currentThisScope=function(){for(var t=this.scopeStack.length-1;;t--){var i=this.scopeStack[t];if(i.flags&Z&&!(i.flags&$))return i}};var Pt=function(t,i,n){this.type="",this.start=i,this.end=0,t.options.locations&&(this.loc=new B(t,n)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[i,0])},At=st.prototype;function Tt(t,i,n,r){return t.type=i,t.end=n,this.options.locations&&(t.loc.end=r),this.options.ranges&&(t.range[1]=n),t}At.startNode=function(){return new Pt(this,this.start,this.startLoc)},At.startNodeAt=function(t,i){return new Pt(this,t,i)},At.finishNode=function(t,i){return Tt.call(this,t,i,this.lastTokEnd,this.lastTokEndLoc)},At.finishNodeAt=function(t,i,n,r){return Tt.call(this,t,i,n,r)},At.copyNode=function(t){var i=new Pt(this,t.start,this.startLoc);for(var n in t)i[n]=t[n];return i};var Ot="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",Lt=Ot+" Extended_Pictographic",zt=Lt+" EBase EComp EMod EPres ExtPict",Dt={9:Ot,10:Lt,11:Lt,12:zt,13:zt,14:zt},Bt="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",Nt="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",Ft=Nt+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",Rt=Ft+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",jt=Rt+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",Ut=jt+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",qt={9:Nt,10:Ft,11:Rt,12:jt,13:Ut,14:Ut+" Kawi Nag_Mundari Nagm"},Ht={};function Vt(t){var i=Ht[t]={binary:O(Dt[t]+" "+Bt),nonBinary:{General_Category:O(Bt),Script:O(qt[t])}};i.nonBinary.Script_Extensions=i.nonBinary.Script,i.nonBinary.gc=i.nonBinary.General_Category,i.nonBinary.sc=i.nonBinary.Script,i.nonBinary.scx=i.nonBinary.Script_Extensions}for(var Wt=0,$t=[9,10,11,12,13,14];Wt<$t.length;Wt+=1)Vt($t[Wt]);var Gt=st.prototype,Kt=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":""),this.unicodeProperties=Ht[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function Xt(t){return 36===t||t>=40&&t<=43||46===t||63===t||t>=91&&t<=94||t>=123&&t<=125}function Jt(t){return l(t,!0)||36===t||95===t}function Zt(t){return v(t,!0)||36===t||95===t||8204===t||8205===t}function Qt(t){return t>=65&&t<=90||t>=97&&t<=122}function Yt(t){return t>=0&&t<=1114111}function ti(t){return 100===t||68===t||115===t||83===t||119===t||87===t}function ii(t){return Qt(t)||95===t}function ni(t){return ii(t)||ri(t)}function ri(t){return t>=48&&t<=57}function ei(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function si(t){return t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:t-48}function hi(t){return t>=48&&t<=55}Kt.prototype.reset=function(t,i,n){var r=-1!==n.indexOf("u");this.start=0|t,this.source=i+"",this.flags=n,this.switchU=r&&this.parser.options.ecmaVersion>=6,this.switchN=r&&this.parser.options.ecmaVersion>=9},Kt.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)},Kt.prototype.at=function(t,i){void 0===i&&(i=!1);var n=this.source,r=n.length;if(t>=r)return-1;var e=n.charCodeAt(t);if(!i&&!this.switchU||e<=55295||e>=57344||t+1>=r)return e;var s=n.charCodeAt(t+1);return s>=56320&&s<=57343?(e<<10)+s-56613888:e},Kt.prototype.nextIndex=function(t,i){void 0===i&&(i=!1);var n=this.source,r=n.length;if(t>=r)return r;var e,s=n.charCodeAt(t);return!i&&!this.switchU||s<=55295||s>=57344||t+1>=r||(e=n.charCodeAt(t+1))<56320||e>57343?t+1:t+2},Kt.prototype.current=function(t){return void 0===t&&(t=!1),this.at(this.pos,t)},Kt.prototype.lookahead=function(t){return void 0===t&&(t=!1),this.at(this.nextIndex(this.pos,t),t)},Kt.prototype.advance=function(t){void 0===t&&(t=!1),this.pos=this.nextIndex(this.pos,t)},Kt.prototype.eat=function(t,i){return void 0===i&&(i=!1),this.current(i)===t&&(this.advance(i),!0)},Gt.validateRegExpFlags=function(t){for(var i=t.validFlags,n=t.flags,r=0;r<n.length;r++){var e=n.charAt(r);-1===i.indexOf(e)&&this.raise(t.start,"Invalid regular expression flag"),n.indexOf(e,r+1)>-1&&this.raise(t.start,"Duplicate regular expression flag")}},Gt.validateRegExpPattern=function(t){this.regexp_pattern(t),!t.switchN&&this.options.ecmaVersion>=9&&t.groupNames.length>0&&(t.switchN=!0,this.regexp_pattern(t))},Gt.regexp_pattern=function(t){t.pos=0,t.lastIntValue=0,t.lastStringValue="",t.lastAssertionIsQuantifiable=!1,t.numCapturingParens=0,t.maxBackReference=0,t.groupNames.length=0,t.backReferenceNames.length=0,this.regexp_disjunction(t),t.pos!==t.source.length&&(t.eat(41)&&t.raise("Unmatched ')'"),(t.eat(93)||t.eat(125))&&t.raise("Lone quantifier brackets")),t.maxBackReference>t.numCapturingParens&&t.raise("Invalid escape");for(var i=0,n=t.backReferenceNames;i<n.length;i+=1){var r=n[i];-1===t.groupNames.indexOf(r)&&t.raise("Invalid named capture referenced")}},Gt.regexp_disjunction=function(t){for(this.regexp_alternative(t);t.eat(124);)this.regexp_alternative(t);this.regexp_eatQuantifier(t,!0)&&t.raise("Nothing to repeat"),t.eat(123)&&t.raise("Lone quantifier brackets")},Gt.regexp_alternative=function(t){for(;t.pos<t.source.length&&this.regexp_eatTerm(t););},Gt.regexp_eatTerm=function(t){return this.regexp_eatAssertion(t)?(t.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(t)&&t.switchU&&t.raise("Invalid quantifier"),!0):!!(t.switchU?this.regexp_eatAtom(t):this.regexp_eatExtendedAtom(t))&&(this.regexp_eatQuantifier(t),!0)},Gt.regexp_eatAssertion=function(t){var i=t.pos;if(t.lastAssertionIsQuantifiable=!1,t.eat(94)||t.eat(36))return!0;if(t.eat(92)){if(t.eat(66)||t.eat(98))return!0;t.pos=i}if(t.eat(40)&&t.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=t.eat(60)),t.eat(61)||t.eat(33))return this.regexp_disjunction(t),t.eat(41)||t.raise("Unterminated group"),t.lastAssertionIsQuantifiable=!n,!0}return t.pos=i,!1},Gt.regexp_eatQuantifier=function(t,i){return void 0===i&&(i=!1),!!this.regexp_eatQuantifierPrefix(t,i)&&(t.eat(63),!0)},Gt.regexp_eatQuantifierPrefix=function(t,i){return t.eat(42)||t.eat(43)||t.eat(63)||this.regexp_eatBracedQuantifier(t,i)},Gt.regexp_eatBracedQuantifier=function(t,i){var n=t.pos;if(t.eat(123)){var r=0,e=-1;if(this.regexp_eatDecimalDigits(t)&&(r=t.lastIntValue,t.eat(44)&&this.regexp_eatDecimalDigits(t)&&(e=t.lastIntValue),t.eat(125)))return-1!==e&&e<r&&!i&&t.raise("numbers out of order in {} quantifier"),!0;t.switchU&&!i&&t.raise("Incomplete quantifier"),t.pos=n}return!1},Gt.regexp_eatAtom=function(t){return this.regexp_eatPatternCharacters(t)||t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)},Gt.regexp_eatReverseSolidusAtomEscape=function(t){var i=t.pos;if(t.eat(92)){if(this.regexp_eatAtomEscape(t))return!0;t.pos=i}return!1},Gt.regexp_eatUncapturingGroup=function(t){var i=t.pos;if(t.eat(40)){if(t.eat(63)&&t.eat(58)){if(this.regexp_disjunction(t),t.eat(41))return!0;t.raise("Unterminated group")}t.pos=i}return!1},Gt.regexp_eatCapturingGroup=function(t){if(t.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(t):63===t.current()&&t.raise("Invalid group"),this.regexp_disjunction(t),t.eat(41))return t.numCapturingParens+=1,!0;t.raise("Unterminated group")}return!1},Gt.regexp_eatExtendedAtom=function(t){return t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)||this.regexp_eatInvalidBracedQuantifier(t)||this.regexp_eatExtendedPatternCharacter(t)},Gt.regexp_eatInvalidBracedQuantifier=function(t){return this.regexp_eatBracedQuantifier(t,!0)&&t.raise("Nothing to repeat"),!1},Gt.regexp_eatSyntaxCharacter=function(t){var i=t.current();return!!Xt(i)&&(t.lastIntValue=i,t.advance(),!0)},Gt.regexp_eatPatternCharacters=function(t){for(var i=t.pos,n=0;-1!==(n=t.current())&&!Xt(n);)t.advance();return t.pos!==i},Gt.regexp_eatExtendedPatternCharacter=function(t){var i=t.current();return!(-1===i||36===i||i>=40&&i<=43||46===i||63===i||91===i||94===i||124===i||(t.advance(),0))},Gt.regexp_groupSpecifier=function(t){if(t.eat(63)){if(this.regexp_eatGroupName(t))return-1!==t.groupNames.indexOf(t.lastStringValue)&&t.raise("Duplicate capture group name"),void t.groupNames.push(t.lastStringValue);t.raise("Invalid group")}},Gt.regexp_eatGroupName=function(t){if(t.lastStringValue="",t.eat(60)){if(this.regexp_eatRegExpIdentifierName(t)&&t.eat(62))return!0;t.raise("Invalid capture group name")}return!1},Gt.regexp_eatRegExpIdentifierName=function(t){if(t.lastStringValue="",this.regexp_eatRegExpIdentifierStart(t)){for(t.lastStringValue+=L(t.lastIntValue);this.regexp_eatRegExpIdentifierPart(t);)t.lastStringValue+=L(t.lastIntValue);return!0}return!1},Gt.regexp_eatRegExpIdentifierStart=function(t){var i=t.pos,n=this.options.ecmaVersion>=11,r=t.current(n);return t.advance(n),92===r&&this.regexp_eatRegExpUnicodeEscapeSequence(t,n)&&(r=t.lastIntValue),Jt(r)?(t.lastIntValue=r,!0):(t.pos=i,!1)},Gt.regexp_eatRegExpIdentifierPart=function(t){var i=t.pos,n=this.options.ecmaVersion>=11,r=t.current(n);return t.advance(n),92===r&&this.regexp_eatRegExpUnicodeEscapeSequence(t,n)&&(r=t.lastIntValue),Zt(r)?(t.lastIntValue=r,!0):(t.pos=i,!1)},Gt.regexp_eatAtomEscape=function(t){return!!(this.regexp_eatBackReference(t)||this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)||t.switchN&&this.regexp_eatKGroupName(t))||(t.switchU&&(99===t.current()&&t.raise("Invalid unicode escape"),t.raise("Invalid escape")),!1)},Gt.regexp_eatBackReference=function(t){var i=t.pos;if(this.regexp_eatDecimalEscape(t)){var n=t.lastIntValue;if(t.switchU)return n>t.maxBackReference&&(t.maxBackReference=n),!0;if(n<=t.numCapturingParens)return!0;t.pos=i}return!1},Gt.regexp_eatKGroupName=function(t){if(t.eat(107)){if(this.regexp_eatGroupName(t))return t.backReferenceNames.push(t.lastStringValue),!0;t.raise("Invalid named reference")}return!1},Gt.regexp_eatCharacterEscape=function(t){return this.regexp_eatControlEscape(t)||this.regexp_eatCControlLetter(t)||this.regexp_eatZero(t)||this.regexp_eatHexEscapeSequence(t)||this.regexp_eatRegExpUnicodeEscapeSequence(t,!1)||!t.switchU&&this.regexp_eatLegacyOctalEscapeSequence(t)||this.regexp_eatIdentityEscape(t)},Gt.regexp_eatCControlLetter=function(t){var i=t.pos;if(t.eat(99)){if(this.regexp_eatControlLetter(t))return!0;t.pos=i}return!1},Gt.regexp_eatZero=function(t){return 48===t.current()&&!ri(t.lookahead())&&(t.lastIntValue=0,t.advance(),!0)},Gt.regexp_eatControlEscape=function(t){var i=t.current();return 116===i?(t.lastIntValue=9,t.advance(),!0):110===i?(t.lastIntValue=10,t.advance(),!0):118===i?(t.lastIntValue=11,t.advance(),!0):102===i?(t.lastIntValue=12,t.advance(),!0):114===i&&(t.lastIntValue=13,t.advance(),!0)},Gt.regexp_eatControlLetter=function(t){var i=t.current();return!!Qt(i)&&(t.lastIntValue=i%32,t.advance(),!0)},Gt.regexp_eatRegExpUnicodeEscapeSequence=function(t,i){void 0===i&&(i=!1);var n=t.pos,r=i||t.switchU;if(t.eat(117)){if(this.regexp_eatFixedHexDigits(t,4)){var e=t.lastIntValue;if(r&&e>=55296&&e<=56319){var s=t.pos;if(t.eat(92)&&t.eat(117)&&this.regexp_eatFixedHexDigits(t,4)){var h=t.lastIntValue;if(h>=56320&&h<=57343)return t.lastIntValue=1024*(e-55296)+(h-56320)+65536,!0}t.pos=s,t.lastIntValue=e}return!0}if(r&&t.eat(123)&&this.regexp_eatHexDigits(t)&&t.eat(125)&&Yt(t.lastIntValue))return!0;r&&t.raise("Invalid unicode escape"),t.pos=n}return!1},Gt.regexp_eatIdentityEscape=function(t){if(t.switchU)return!!this.regexp_eatSyntaxCharacter(t)||!!t.eat(47)&&(t.lastIntValue=47,!0);var i=t.current();return!(99===i||t.switchN&&107===i||(t.lastIntValue=i,t.advance(),0))},Gt.regexp_eatDecimalEscape=function(t){t.lastIntValue=0;var i=t.current();if(i>=49&&i<=57){do{t.lastIntValue=10*t.lastIntValue+(i-48),t.advance()}while((i=t.current())>=48&&i<=57);return!0}return!1},Gt.regexp_eatCharacterClassEscape=function(t){var i=t.current();if(ti(i))return t.lastIntValue=-1,t.advance(),!0;if(t.switchU&&this.options.ecmaVersion>=9&&(80===i||112===i)){if(t.lastIntValue=-1,t.advance(),t.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(t)&&t.eat(125))return!0;t.raise("Invalid property name")}return!1},Gt.regexp_eatUnicodePropertyValueExpression=function(t){var i=t.pos;if(this.regexp_eatUnicodePropertyName(t)&&t.eat(61)){var n=t.lastStringValue;if(this.regexp_eatUnicodePropertyValue(t)){var r=t.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(t,n,r),!0}}if(t.pos=i,this.regexp_eatLoneUnicodePropertyNameOrValue(t)){var e=t.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(t,e),!0}return!1},Gt.regexp_validateUnicodePropertyNameAndValue=function(t,i,n){A(t.unicodeProperties.nonBinary,i)||t.raise("Invalid property name"),t.unicodeProperties.nonBinary[i].test(n)||t.raise("Invalid property value")},Gt.regexp_validateUnicodePropertyNameOrValue=function(t,i){t.unicodeProperties.binary.test(i)||t.raise("Invalid property name")},Gt.regexp_eatUnicodePropertyName=function(t){var i=0;for(t.lastStringValue="";ii(i=t.current());)t.lastStringValue+=L(i),t.advance();return""!==t.lastStringValue},Gt.regexp_eatUnicodePropertyValue=function(t){var i=0;for(t.lastStringValue="";ni(i=t.current());)t.lastStringValue+=L(i),t.advance();return""!==t.lastStringValue},Gt.regexp_eatLoneUnicodePropertyNameOrValue=function(t){return this.regexp_eatUnicodePropertyValue(t)},Gt.regexp_eatCharacterClass=function(t){if(t.eat(91)){if(t.eat(94),this.regexp_classRanges(t),t.eat(93))return!0;t.raise("Unterminated character class")}return!1},Gt.regexp_classRanges=function(t){for(;this.regexp_eatClassAtom(t);){var i=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassAtom(t)){var n=t.lastIntValue;!t.switchU||-1!==i&&-1!==n||t.raise("Invalid character class"),-1!==i&&-1!==n&&i>n&&t.raise("Range out of order in character class")}}},Gt.regexp_eatClassAtom=function(t){var i=t.pos;if(t.eat(92)){if(this.regexp_eatClassEscape(t))return!0;if(t.switchU){var n=t.current();(99===n||hi(n))&&t.raise("Invalid class escape"),t.raise("Invalid escape")}t.pos=i}var r=t.current();return 93!==r&&(t.lastIntValue=r,t.advance(),!0)},Gt.regexp_eatClassEscape=function(t){var i=t.pos;if(t.eat(98))return t.lastIntValue=8,!0;if(t.switchU&&t.eat(45))return t.lastIntValue=45,!0;if(!t.switchU&&t.eat(99)){if(this.regexp_eatClassControlLetter(t))return!0;t.pos=i}return this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)},Gt.regexp_eatClassControlLetter=function(t){var i=t.current();return!(!ri(i)&&95!==i||(t.lastIntValue=i%32,t.advance(),0))},Gt.regexp_eatHexEscapeSequence=function(t){var i=t.pos;if(t.eat(120)){if(this.regexp_eatFixedHexDigits(t,2))return!0;t.switchU&&t.raise("Invalid escape"),t.pos=i}return!1},Gt.regexp_eatDecimalDigits=function(t){var i=t.pos,n=0;for(t.lastIntValue=0;ri(n=t.current());)t.lastIntValue=10*t.lastIntValue+(n-48),t.advance();return t.pos!==i},Gt.regexp_eatHexDigits=function(t){var i=t.pos,n=0;for(t.lastIntValue=0;ei(n=t.current());)t.lastIntValue=16*t.lastIntValue+si(n),t.advance();return t.pos!==i},Gt.regexp_eatLegacyOctalEscapeSequence=function(t){if(this.regexp_eatOctalDigit(t)){var i=t.lastIntValue;if(this.regexp_eatOctalDigit(t)){var n=t.lastIntValue;i<=3&&this.regexp_eatOctalDigit(t)?t.lastIntValue=64*i+8*n+t.lastIntValue:t.lastIntValue=8*i+n}else t.lastIntValue=i;return!0}return!1},Gt.regexp_eatOctalDigit=function(t){var i=t.current();return hi(i)?(t.lastIntValue=i-48,t.advance(),!0):(t.lastIntValue=0,!1)},Gt.regexp_eatFixedHexDigits=function(t,i){var n=t.pos;t.lastIntValue=0;for(var r=0;r<i;++r){var e=t.current();if(!ei(e))return t.pos=n,!1;t.lastIntValue=16*t.lastIntValue+si(e),t.advance()}return!0};var ai=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new B(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},ui=st.prototype;function oi(t,i){return i?parseInt(t,8):parseFloat(t.replace(/_/g,""))}function fi(t){return"function"!=typeof BigInt?null:BigInt(t.replace(/_/g,""))}ui.next=function(t){!t&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new ai(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},ui.getToken=function(){return this.next(),new ai(this)},"undefined"!=typeof Symbol&&(ui[Symbol.iterator]=function(){var t=this;return{next:function(){var i=t.getToken();return{done:i.type===b.eof,value:i}}}}),ui.nextToken=function(){var t=this.curContext();return t&&t.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(b.eof):t.override?t.override(this):void this.readToken(this.fullCharCodeAtPos())},ui.readToken=function(t){return l(t,this.options.ecmaVersion>=6)||92===t?this.readWord():this.getTokenFromCode(t)},ui.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);if(t<=55295||t>=56320)return t;var i=this.input.charCodeAt(this.pos+1);return i<=56319||i>=57344?t:(t<<10)+i-56613888},ui.skipBlockComment=function(){var t=this.options.onComment&&this.curPosition(),i=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(-1===n&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,e=i;(r=k(this.input,e,this.pos))>-1;)++this.curLine,e=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(i+2,n),i,this.pos,t,this.curPosition())},ui.skipLineComment=function(t){for(var i=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=t);this.pos<this.input.length&&!S(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(i+t,this.pos),i,this.pos,n,this.curPosition())},ui.skipSpace=function(){t:for(;this.pos<this.input.length;){var t=this.input.charCodeAt(this.pos);switch(t){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(!(t>8&&t<14||t>=5760&&C.test(String.fromCharCode(t))))break t;++this.pos}}},ui.finishToken=function(t,i){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=t,this.value=i,this.updateContext(n)},ui.readToken_dot=function(){var t=this.input.charCodeAt(this.pos+1);if(t>=48&&t<=57)return this.readNumber(!0);var i=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===t&&46===i?(this.pos+=3,this.finishToken(b.ellipsis)):(++this.pos,this.finishToken(b.dot))},ui.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===t?this.finishOp(b.assign,2):this.finishOp(b.slash,1)},ui.readToken_mult_modulo_exp=function(t){var i=this.input.charCodeAt(this.pos+1),n=1,r=42===t?b.star:b.modulo;return this.options.ecmaVersion>=7&&42===t&&42===i&&(++n,r=b.starstar,i=this.input.charCodeAt(this.pos+2)),61===i?this.finishOp(b.assign,n+1):this.finishOp(r,n)},ui.readToken_pipe_amp=function(t){var i=this.input.charCodeAt(this.pos+1);return i===t?this.options.ecmaVersion>=12&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(b.assign,3):this.finishOp(124===t?b.logicalOR:b.logicalAND,2):61===i?this.finishOp(b.assign,2):this.finishOp(124===t?b.bitwiseOR:b.bitwiseAND,1)},ui.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(b.assign,2):this.finishOp(b.bitwiseXOR,1)},ui.readToken_plus_min=function(t){var i=this.input.charCodeAt(this.pos+1);return i===t?45!==i||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!_.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(b.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===i?this.finishOp(b.assign,2):this.finishOp(b.plusMin,1)},ui.readToken_lt_gt=function(t){var i=this.input.charCodeAt(this.pos+1),n=1;return i===t?(n=62===t&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(b.assign,n+1):this.finishOp(b.bitShift,n)):33!==i||60!==t||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===i&&(n=2),this.finishOp(b.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},ui.readToken_eq_excl=function(t){var i=this.input.charCodeAt(this.pos+1);return 61===i?this.finishOp(b.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===t&&62===i&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(b.arrow)):this.finishOp(61===t?b.eq:b.prefix,1)},ui.readToken_question=function(){var t=this.options.ecmaVersion;if(t>=11){var i=this.input.charCodeAt(this.pos+1);if(46===i){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(b.questionDot,2)}if(63===i)return t>=12&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(b.assign,3):this.finishOp(b.coalesce,2)}return this.finishOp(b.question,1)},ui.readToken_numberSign=function(){var t=35;if(this.options.ecmaVersion>=13&&(++this.pos,l(t=this.fullCharCodeAtPos(),!0)||92===t))return this.finishToken(b.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+L(t)+"'")},ui.getTokenFromCode=function(t){switch(t){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(b.parenL);case 41:return++this.pos,this.finishToken(b.parenR);case 59:return++this.pos,this.finishToken(b.semi);case 44:return++this.pos,this.finishToken(b.comma);case 91:return++this.pos,this.finishToken(b.bracketL);case 93:return++this.pos,this.finishToken(b.bracketR);case 123:return++this.pos,this.finishToken(b.braceL);case 125:return++this.pos,this.finishToken(b.braceR);case 58:return++this.pos,this.finishToken(b.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(b.backQuote);case 48:var i=this.input.charCodeAt(this.pos+1);if(120===i||88===i)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===i||79===i)return this.readRadixNumber(8);if(98===i||66===i)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.readToken_eq_excl(t);case 63:return this.readToken_question();case 126:return this.finishOp(b.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+L(t)+"'")},ui.finishOp=function(t,i){var n=this.input.slice(this.pos,this.pos+i);return this.pos+=i,this.finishToken(t,n)},ui.readRegexp=function(){for(var t,i,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(_.test(r)&&this.raise(n,"Unterminated regular expression"),t)t=!1;else{if("["===r)i=!0;else if("]"===r&&i)i=!1;else if("/"===r&&!i)break;t="\\"===r}++this.pos}var e=this.input.slice(n,this.pos);++this.pos;var s=this.pos,h=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new Kt(this));a.reset(n,e,h),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var u=null;try{u=new RegExp(e,h)}catch(t){}return this.finishToken(b.regexp,{pattern:e,flags:h,value:u})},ui.readInt=function(t,i,n){for(var r=this.options.ecmaVersion>=12&&void 0===i,e=n&&48===this.input.charCodeAt(this.pos),s=this.pos,h=0,a=0,u=0,o=null==i?1/0:i;u<o;++u,++this.pos){var f=this.input.charCodeAt(this.pos),c=void 0;if(r&&95===f)e&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===a&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===u&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=f;else{if((c=f>=97?f-97+10:f>=65?f-65+10:f>=48&&f<=57?f-48:1/0)>=t)break;a=f,h=h*t+c}}return r&&95===a&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||null!=i&&this.pos-s!==i?null:h},ui.readRadixNumber=function(t){var i=this.pos;this.pos+=2;var n=this.readInt(t);return null==n&&this.raise(this.start+2,"Expected number in radix "+t),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(n=fi(this.input.slice(i,this.pos)),++this.pos):l(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(b.num,n)},ui.readNumber=function(t){var i=this.pos;t||null!==this.readInt(10,void 0,!0)||this.raise(i,"Invalid number");var n=this.pos-i>=2&&48===this.input.charCodeAt(i);n&&this.strict&&this.raise(i,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!t&&this.options.ecmaVersion>=11&&110===r){var e=fi(this.input.slice(i,this.pos));return++this.pos,l(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(b.num,e)}n&&/[89]/.test(this.input.slice(i,this.pos))&&(n=!1),46!==r||n||(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),69!==r&&101!==r||n||(43!==(r=this.input.charCodeAt(++this.pos))&&45!==r||++this.pos,null===this.readInt(10)&&this.raise(i,"Invalid number")),l(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=oi(this.input.slice(i,this.pos),n);return this.finishToken(b.num,s)},ui.readCodePoint=function(){var t;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var i=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(i,"Code point out of bounds")}else t=this.readHexChar(4);return t},ui.readString=function(t){for(var i="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===t)break;92===r?(i+=this.input.slice(n,this.pos),i+=this.readEscapedChar(!1),n=this.pos):8232===r||8233===r?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(S(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return i+=this.input.slice(n,this.pos++),this.finishToken(b.string,i)};var ci={};ui.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(t){if(t!==ci)throw t;this.readInvalidTemplateToken()}this.inTemplateElement=!1},ui.invalidStringToken=function(t,i){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw ci;this.raise(t,i)},ui.readTmplToken=function(){for(var t="",i=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==b.template&&this.type!==b.invalidTemplate?(t+=this.input.slice(i,this.pos),this.finishToken(b.template,t)):36===n?(this.pos+=2,this.finishToken(b.dollarBraceL)):(++this.pos,this.finishToken(b.backQuote));if(92===n)t+=this.input.slice(i,this.pos),t+=this.readEscapedChar(!0),i=this.pos;else if(S(n)){switch(t+=this.input.slice(i,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:t+="\n";break;default:t+=String.fromCharCode(n)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),i=this.pos}else++this.pos}},ui.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(b.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},ui.readEscapedChar=function(t){var i=this.input.charCodeAt(++this.pos);switch(++this.pos,i){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return L(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),t){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(i>=48&&i<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],e=parseInt(r,8);return e>255&&(r=r.slice(0,-1),e=parseInt(r,8)),this.pos+=r.length-1,i=this.input.charCodeAt(this.pos),"0"===r&&56!==i&&57!==i||!this.strict&&!t||this.invalidStringToken(this.pos-1-r.length,t?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(e)}return S(i)?"":String.fromCharCode(i)}},ui.readHexChar=function(t){var i=this.pos,n=this.readInt(16,t);return null===n&&this.invalidStringToken(i,"Bad character escape sequence"),n},ui.readWord1=function(){this.containsEsc=!1;for(var t="",i=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var e=this.fullCharCodeAtPos();if(v(e,r))this.pos+=e<=65535?1:2;else{if(92!==e)break;this.containsEsc=!0,t+=this.input.slice(n,this.pos);var s=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var h=this.readCodePoint();(i?l:v)(h,r)||this.invalidStringToken(s,"Invalid Unicode escape"),t+=L(h),n=this.pos}i=!1}return t+this.input.slice(n,this.pos)},ui.readWord=function(){var t=this.readWord1(),i=b.name;return this.keywords.test(t)&&(i=w[t]),this.finishToken(i,t)};var li="8.8.2";function vi(t,i){return st.parse(t,i)}function di(t,i,n){return st.parseExpressionAt(t,i,n)}function pi(t,i){return st.tokenizer(t,i)}st.acorn={Parser:st,version:li,defaultOptions:F,Position:D,SourceLocation:B,getLineInfo:N,Node:Pt,TokenType:d,tokTypes:b,keywordTypes:w,TokContext:bt,tokContexts:_t,isIdentifierChar:v,isIdentifierStart:l,Token:ai,isNewLine:S,lineBreak:_,lineBreakG:x,nonASCIIwhitespace:C},t.Node=Pt,t.Parser=st,t.Position=D,t.SourceLocation=B,t.TokContext=bt,t.Token=ai,t.TokenType=d,t.defaultOptions=F,t.getLineInfo=N,t.isIdentifierChar=v,t.isIdentifierStart=l,t.isNewLine=S,t.keywordTypes=w,t.lineBreak=_,t.lineBreakG=x,t.nonASCIIwhitespace=C,t.parse=vi,t.parseExpressionAt=di,t.tokContexts=_t,t.tokTypes=b,t.tokenizer=pi,t.version=li}(i)},5042:function(t,i,n){var r,e,s;(function(h,a){var u=(h=h||n(9845)).window,o=h.document,f=new function(){var t=/^(statics|enumerable|beans|preserve)$/,i=[],n=i.slice,r=Object.create,e=Object.getOwnPropertyDescriptor,s=Object.defineProperty,h=i.forEach||function(t,i){for(var n=0,r=this.length;n<r;n++)t.call(i,this[n],n,this)},u=function(t,i){for(var n in this)this.hasOwnProperty(n)&&t.call(i,this[n],n,this)},o=Object.assign||function(t){for(var i=1,n=arguments.length;i<n;i++){var r=arguments[i];for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])}return t},f=function(t,i,n){if(t){var r=e(t,"length");(r&&"number"==typeof r.value?h:u).call(t,i,n=n||t)}return n};function c(i,n,r,h,a){var u={};function o(t,o){"string"==typeof(o=o||(o=e(n,t))&&(o.get?o:o.value))&&"#"===o[0]&&(o=i[o.substring(1)]||o);var f,c="function"==typeof o,v=o,d=a||c&&!o.base?o&&o.get?t in i:i[t]:null;a&&d||(c&&d&&(o.base=d),c&&!1!==h&&(f=t.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(u[f[3].toLowerCase()+f[4]]=f[2]),v&&!c&&v.get&&"function"==typeof v.get&&l.isPlainObject(v)||(v={value:v,writable:!0}),(e(i,t)||{configurable:!0}).configurable&&(v.configurable=!0,v.enumerable=null!=r?r:!f),s(i,t,v))}if(n){for(var f in n)n.hasOwnProperty(f)&&!t.test(f)&&o(f);for(var f in u){var c=u[f],v=i["set"+c],d=i["get"+c]||v&&i["is"+c];!d||!0!==h&&0!==d.length||o(f,{get:d,set:v})}}return i}function l(){for(var t=0,i=arguments.length;t<i;t++){var n=arguments[t];n&&o(this,n)}return this}return c(l,{inject:function(t){if(t){var i=!0===t.statics?t:t.statics,n=t.beans,r=t.preserve;i!==t&&c(this.prototype,t,t.enumerable,n,r),c(this,i,null,n,r)}for(var e=1,s=arguments.length;e<s;e++)this.inject(arguments[e]);return this},extend:function(){for(var t,i,n,e=this,h=0,a=arguments.length;h<a&&(!t||!i);h++)n=arguments[h],t=t||n.initialize,i=i||n.prototype;return t=t||function(){e.apply(this,arguments)},i=t.prototype=i||r(this.prototype),s(i,"constructor",{value:t,writable:!0,configurable:!0}),c(t,this),arguments.length&&this.inject.apply(t,arguments),t.base=e,t}}).inject({enumerable:!1,initialize:l,set:l,inject:function(){for(var t=0,i=arguments.length;t<i;t++){var n=arguments[t];n&&c(this,n,n.enumerable,n.beans,n.preserve)}return this},extend:function(){var t=r(this);return t.inject.apply(t,arguments)},each:function(t,i){return f(this,t,i)},clone:function(){return new this.constructor(this)},statics:{set:o,each:f,create:r,define:s,describe:e,clone:function(t){return o(new t.constructor,t)},isPlainObject:function(t){var i=null!=t&&t.constructor;return i&&(i===Object||i===l||"Object"===i.name)},pick:function(t,i){return t!==a?t:i},slice:function(t,i,r){return n.call(t,i,r)}}})};t.exports=f,f.inject({enumerable:!1,toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+f.each(this,(function(t,i){if(!/^_/.test(i)){var n=typeof t;this.push(i+": "+("number"===n?p.instance.number(t):"string"===n?"'"+t+"'":t))}}),[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(t){return f.importJSON(t,this)},exportJSON:function(t){return f.exportJSON(this,t)},toJSON:function(){return f.serialize(this)},set:function(t,i){return t&&f.filter(this,t,i,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function t(){var i=t.base.apply(this,arguments),n=i.prototype._class;return n&&!f.exports[n]&&(f.exports[n]=i),i},equals:function(t,i){if(t===i)return!0;if(t&&t.equals)return t.equals(i);if(i&&i.equals)return i.equals(t);if(t&&i&&"object"==typeof t&&"object"==typeof i){if(Array.isArray(t)&&Array.isArray(i)){if((n=t.length)!==i.length)return!1;for(;n--;)if(!f.equals(t[n],i[n]))return!1}else{var n,r=Object.keys(t);if((n=r.length)!==Object.keys(i).length)return!1;for(;n--;){var e=r[n];if(!i.hasOwnProperty(e)||!f.equals(t[e],i[e]))return!1}}return!0}return!1},read:function(t,i,n,r){if(this===f){var e=this.peek(t,i);return t.__index++,e}var s=this.prototype,h=s._readIndex,u=i||h&&t.__index||0,o=t.length,c=t[u];if(r=r||o-u,c instanceof this||n&&n.readNull&&null==c&&r<=1)return h&&(t.__index=u+1),c&&n&&n.clone?c.clone():c;if(c=f.create(s),h&&(c.__read=!0),c=c.initialize.apply(c,u>0||u+r<o?f.slice(t,u,u+r):t)||c,h){t.__index=u+c.__read;var l=c.__filtered;l&&(t.__filtered=l,c.__filtered=a),c.__read=a}return c},peek:function(t,i){return t[t.__index=i||t.__index||0]},remain:function(t){return t.length-(t.__index||0)},readList:function(t,i,n,r){for(var e,s=[],h=i||0,a=r?h+r:t.length,u=h;u<a;u++)s.push(Array.isArray(e=t[u])?this.read(e,0,n):this.read(t,u,n,1));return s},readNamed:function(t,i,n,r,e){var s=this.getNamed(t,i),h=s!==a;if(h){var u=t.__filtered;if(!u){var o=this.getSource(t);(u=t.__filtered=f.create(o)).__unfiltered=o}u[i]=a}return this.read(h?[s]:t,n,r,e)},readSupported:function(t,i){var n=this.getSource(t),r=this,e=!1;return n&&Object.keys(n).forEach((function(n){if(n in i){var s=r.readNamed(t,n);s!==a&&(i[n]=s),e=!0}})),e},getSource:function(t){var i=t.__source;if(i===a){var n=1===t.length&&t[0];i=t.__source=n&&f.isPlainObject(n)?n:null}return i},getNamed:function(t,i){var n=this.getSource(t);if(n)return i?n[i]:t.__filtered||n},hasNamed:function(t,i){return!!this.getNamed(t,i)},filter:function(t,i,n,r){var e;function s(r){if(!(n&&r in n||e&&r in e)){var s=i[r];s!==a&&(t[r]=s)}}if(r){for(var h,u={},o=0,f=r.length;o<f;o++)(h=r[o])in i&&(s(h),u[h]=!0);e=u}return Object.keys(i.__unfiltered||i).forEach(s),t},isPlainValue:function(t,i){return f.isPlainObject(t)||Array.isArray(t)||i&&"string"==typeof t},serialize:function(t,i,n,r){i=i||{};var e,s=!r;if(s&&(i.formatter=new p(i.precision),r={length:0,definitions:{},references:{},add:function(t,i){var n="#"+t._id,r=this.references[n];if(!r){this.length++;var e=i.call(t),s=t._class;s&&e[0]!==s&&e.unshift(s),this.definitions[n]=e,r=this.references[n]=[n]}return r}}),t&&t._serialize){e=t._serialize(i,r);var h=t._class;!h||t._compactSerialize||!s&&n||e[0]===h||e.unshift(h)}else if(Array.isArray(t)){e=[];for(var a=0,u=t.length;a<u;a++)e[a]=f.serialize(t[a],i,n,r)}else if(f.isPlainObject(t)){e={};var o=Object.keys(t);for(a=0,u=o.length;a<u;a++){var c=o[a];e[c]=f.serialize(t[c],i,n,r)}}else e="number"==typeof t?i.formatter.number(t,i.precision):t;return s&&r.length>0?[["dictionary",r.definitions],e]:e},deserialize:function(t,i,n,r,e){var s=t,h=!n,a=h&&t&&t.length&&"dictionary"===t[0][0];if(n=n||{},Array.isArray(t)){var u=t[0],o="dictionary"===u;if(1==t.length&&/^#/.test(u))return n.dictionary[u];s=[];for(var c=(u=f.exports[u])?1:0,l=t.length;c<l;c++)s.push(f.deserialize(t[c],i,n,o,a));if(u){var v=s;s=i?i(u,v,h||e):new u(v)}}else if(f.isPlainObject(t))for(var d in s={},r&&(n.dictionary=s),t)s[d]=f.deserialize(t[d],i,n);return a?s[1]:s},exportJSON:function(t,i){var n=f.serialize(t,i);return i&&0==i.asString?n:JSON.stringify(n)},importJSON:function(t,i){return f.deserialize("string"==typeof t?JSON.parse(t):t,(function(t,n,r){var e=r&&i&&i.constructor===t,s=e?i:f.create(t.prototype);if(1===n.length&&s instanceof E&&(e||!(s instanceof P))){var h=n[0];f.isPlainObject(h)&&(h.insert=!1,e&&(n=n.concat([E.INSERT])))}return(e?s.set:t).apply(s,n),e&&(i=null),s}))},push:function(t,i){var n=i.length;if(n<4096)t.push.apply(t,i);else{var r=t.length;t.length+=n;for(var e=0;e<n;e++)t[r+e]=i[e]}return t},splice:function(t,i,n,r){var e=i&&i.length,s=n===a;(n=s?t.length:n)>t.length&&(n=t.length);for(var h=0;h<e;h++)i[h]._index=n+h;if(s)return f.push(t,i),[];var u=[n,r];i&&f.push(u,i);for(var o=t.splice.apply(t,u),c=(h=0,o.length);h<c;h++)o[h]._index=a;for(h=n+e,c=t.length;h<c;h++)t[h]._index=h;return o},capitalize:function(t){return t.replace(/\b[a-z]/g,(function(t){return t.toUpperCase()}))},camelize:function(t){return t.replace(/-(.)/g,(function(t,i){return i.toUpperCase()}))},hyphenate:function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var c={on:function(t,i){if("string"!=typeof t)f.each(t,(function(t,i){this.on(i,t)}),this);else{var n=this._eventTypes,r=n&&n[t],e=this._callbacks=this._callbacks||{};-1===(e=e[t]=e[t]||[]).indexOf(i)&&(e.push(i),r&&r.install&&1===e.length&&r.install.call(this,t))}return this},off:function(t,i){if("string"==typeof t){var n,r=this._eventTypes,e=r&&r[t],s=this._callbacks&&this._callbacks[t];return s&&(!i||-1!==(n=s.indexOf(i))&&1===s.length?(e&&e.uninstall&&e.uninstall.call(this,t),delete this._callbacks[t]):-1!==n&&s.splice(n,1)),this}f.each(t,(function(t,i){this.off(i,t)}),this)},once:function(t,i){return this.on(t,(function n(){i.apply(this,arguments),this.off(t,n)}))},emit:function(t,i){var n=this._callbacks&&this._callbacks[t];if(!n)return!1;var r=f.slice(arguments,1),e=i&&i.target&&!i.currentTarget;n=n.slice(),e&&(i.currentTarget=this);for(var s=0,h=n.length;s<h;s++)if(0==n[s].apply(this,r)){i&&i.stop&&i.stop();break}return e&&delete i.currentTarget,!0},responds:function(t){return!(!this._callbacks||!this._callbacks[t])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(t){var i=this._eventTypes,n=this._callbacks,r=t?"install":"uninstall";if(i)for(var e in n)if(n[e].length>0){var s=i[e],h=s&&s[r];h&&h.call(this,e)}},statics:{inject:function t(i){var n=i._events;if(n){var r={};f.each(n,(function(t,n){var e="string"==typeof t,s=e?t:n,h=f.capitalize(s),a=s.substring(2).toLowerCase();r[a]=e?{}:t,s="_"+s,i["get"+h]=function(){return this[s]},i["set"+h]=function(t){var i=this[s];i&&this.off(a,i),t&&this.on(a,t),this[s]=t}})),i._eventTypes=r}return t.base.apply(this,arguments)}}},l=f.extend({_class:"PaperScope",initialize:function t(){lt=this,this.settings=new f({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=t._id++,t._scopes[this._id]=this;var i=t.prototype;if(!this.support){var n=ut.getContext(1,1)||{};i.support={nativeDash:"setLineDash"in n||"mozDash"in n,nativeBlendModes:ot.nativeModes},ut.release(n)}if(!this.agent){var r=h.navigator.userAgent.toLowerCase(),e=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(r)||[])[0],s="darwin"===e?"mac":e,a=i.agent=i.browser={platform:s};s&&(a[s]=!0),r.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,(function(t,i,n,r,e){if(!a.chrome){var s="opera"===i?r:/^(node|trident)$/.test(i)?e:n;a.version=s,a.versionNumber=parseFloat(s),i={trident:"msie",jsdom:"node"}[i]||i,a.name=i,a[i]=!0}})),a.chrome&&delete a.webkit,a.atom&&delete a.chrome}},version:"0.12.17",getView:function(){var t=this.project;return t&&t._view},getPaper:function(){return this},execute:function(t,i){var n=lt.PaperScript.execute(t,this,i);return Q.updateFocus(),n},install:function(t){var i=this;for(var n in f.each(["project","view","tool"],(function(n){f.define(t,n,{configurable:!0,get:function(){return i[n]}})})),this)!/^_/.test(n)&&this[n]&&(t[n]=this[n])},setup:function(t){return lt=this,this.project=new M(t),this},createCanvas:function(t,i){return ut.getCanvas(t,i)},activate:function(){lt=this},clear:function(){for(var t=this.projects,i=this.tools,n=t.length-1;n>=0;n--)t[n].remove();for(n=i.length-1;n>=0;n--)i[n].remove()},remove:function(){this.clear(),delete l._scopes[this._id]},statics:new function(){function t(t){return t+="Attribute",function(i,n){return i[t](n)||i[t]("data-paper-"+n)}}return{_scopes:{},_id:0,get:function(t){return this._scopes[t]||null},getAttribute:t("get"),hasAttribute:t("has")}}}),v=f.extend(c,{initialize:function(t){this._scope=lt,this._index=this._scope[this._list].push(this)-1,!t&&this._scope[this._reference]||this.activate()},activate:function(){if(!this._scope)return!1;var t=this._scope[this._reference];return t&&t!==this&&t.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",t),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null!=this._index&&(f.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),d={findItemBoundsCollisions:function(t,i,n){function r(t){for(var i=new Array(t.length),n=0;n<t.length;n++){var r=t[n].getBounds();i[n]=[r.left,r.top,r.right,r.bottom]}return i}var e=r(t),s=i&&i!==t?r(i):e;return this.findBoundsCollisions(e,s,n||0)},findCurveBoundsCollisions:function(t,i,n,r){function e(t){for(var i=Math.min,n=Math.max,r=new Array(t.length),e=0;e<t.length;e++){var s=t[e];r[e]=[i(s[0],s[2],s[4],s[6]),i(s[1],s[3],s[5],s[7]),n(s[0],s[2],s[4],s[6]),n(s[1],s[3],s[5],s[7])]}return r}var s=e(t),h=i&&i!==t?e(i):s;if(r){for(var a=this.findBoundsCollisions(s,h,n||0,!1,!0),u=this.findBoundsCollisions(s,h,n||0,!0,!0),o=[],f=0,c=a.length;f<c;f++)o[f]={hor:a[f],ver:u[f]};return o}return this.findBoundsCollisions(s,h,n||0)},findBoundsCollisions:function(t,i,n,r,e){var s=!i||t===i,h=s?t:t.concat(i),a=t.length,u=h.length;function o(t,i,n){for(var r=0,e=t.length;r<e;){var s=e+r>>>1;h[t[s]][i]<n?r=s+1:e=s}return r-1}for(var f=r?1:0,c=f+2,l=r?0:1,v=l+2,d=new Array(u),p=0;p<u;p++)d[p]=p;d.sort((function(t,i){return h[t][f]-h[i][f]}));var g=[],m=new Array(a);for(p=0;p<u;p++){var w=d[p],y=h[w],b=s?w:w-a,_=w<a,x=s||!_,S=_?[]:null;if(g.length){var k=o(g,c,y[f]-n)+1;if(g.splice(0,k),s&&e){S=S.concat(g);for(var C=0;C<g.length;C++){m[I=g[C]].push(b)}}else{var M=y[v],E=y[l];for(C=0;C<g.length;C++){var I=g[C],P=h[I],A=I<a,T=s||I>=a;(e||(_&&T||x&&A)&&M>=P[l]-n&&E<=P[v]+n)&&(_&&T&&S.push(s?I:I-a),x&&A&&m[I].push(b))}}}if(_&&(t===i&&S.push(w),m[w]=S),g.length){var O=o(g,c,y[c]);g.splice(O+1,0,w)}else g.push(w)}for(p=0;p<m.length;p++){var L=m[p];L&&L.sort((function(t,i){return t-i}))}return m}},p=f.extend({initialize:function(t){this.precision=f.pick(t,5),this.multiplier=Math.pow(10,this.precision)},number:function(t){return this.precision<16?Math.round(t*this.multiplier)/this.multiplier:t},pair:function(t,i,n){return this.number(t)+(n||",")+this.number(i)},point:function(t,i){return this.number(t.x)+(i||",")+this.number(t.y)},size:function(t,i){return this.number(t.width)+(i||",")+this.number(t.height)},rectangle:function(t,i){return this.point(t,i)+(i||",")+this.size(t,i)}});p.instance=new p;var g=new function(){var t=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],i=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],n=Math.abs,r=Math.sqrt,e=Math.pow,s=Math.log2||function(t){return Math.log(t)*Math.LOG2E},h=1e-12,a=112e-18;function u(t,i,n){return t<i?i:t>n?n:t}function o(t,i,r){function e(t){var i=134217729*t,n=t-i+i;return[n,t-n]}var s=i*i-t*r,h=i*i+t*r;if(3*n(s)<h){var a=e(t),u=e(i),o=e(r),f=i*i,c=t*r;s=f-c+(u[0]*u[0]-f+2*u[0]*u[1]+u[1]*u[1]-(a[0]*o[0]-c+a[0]*o[1]+a[1]*o[0]+a[1]*o[1]))}return s}function f(){var t=Math.max.apply(Math,arguments);return t&&(t<1e-8||t>1e8)?e(2,-Math.round(s(t))):0}return{EPSILON:h,MACHINE_EPSILON:a,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(r(2)-1)/3,isZero:function(t){return t>=-1e-12&&t<=h},isMachineZero:function(t){return t>=-112e-18&&t<=a},clamp:u,integrate:function(n,r,e,s){for(var h=t[s-2],a=i[s-2],u=.5*(e-r),o=u+r,f=0,c=s+1>>1,l=1&s?a[f++]*n(o):0;f<c;){var v=u*h[f];l+=a[f++]*(n(o+v)+n(o-v))}return u*l},findRoot:function(t,i,r,e,s,h,a){for(var o=0;o<h;o++){var f=t(r),c=f/i(r),l=r-c;if(n(c)<a){r=l;break}f>0?(s=r,r=l<=e?.5*(e+s):l):(e=r,r=l>=s?.5*(e+s):l)}return u(r,e,s)},solveQuadratic:function(t,i,e,s,c,l){var v,d=1/0;if(n(t)<h){if(n(i)<h)return n(e)<h?-1:0;v=-e/i}else{var p=o(t,i*=-.5,e);if(p&&n(p)<a){var g=f(n(t),n(i),n(e));g&&(p=o(t*=g,i*=g,e*=g))}if(p>=-112e-18){var m=p<0?0:r(p),w=i+(i<0?-m:m);0===w?d=-(v=e/t):(v=w/t,d=e/w)}}var y=0,b=null==c,_=c-h,x=l+h;return isFinite(v)&&(b||v>_&&v<x)&&(s[y++]=b?v:u(v,c,l)),d!==v&&isFinite(d)&&(b||d>_&&d<x)&&(s[y++]=b?d:u(d,c,l)),y},solveCubic:function(t,i,s,o,c,l,v){var d,p,m,w,y,b=f(n(t),n(i),n(s),n(o));function _(n){var r=t*(d=n);w=(r+(p=r+i))*d+(m=p*d+s),y=m*d+o}if(b&&(t*=b,i*=b,s*=b,o*=b),n(t)<h)t=i,p=s,m=o,d=1/0;else if(n(o)<h)p=i,m=s,d=0;else{_(-i/t/3);var x=y/t,S=e(n(x),1/3),k=x<0?-1:1,C=-w/t,M=C>0?1.324717957244746*Math.max(S,r(C)):S,E=d-k*M;if(E!==d){do{_(E),E=0===w?d:d-y/w/(1+a)}while(k*E>k*d);n(t)*d*d>n(o/d)&&(p=((m=-o/d)-s)/d)}}var I=g.solveQuadratic(t,p,m,c,l,v),P=null==l;return isFinite(d)&&(0===I||I>0&&d!==c[0]&&d!==c[1])&&(P||d>l-h&&d<v+h)&&(c[I++]=P?d:u(d,l,v)),I}}},m={_id:1,_pools:{},get:function(t){if(t){var i=this._pools[t];return i||(i=this._pools[t]={_id:1}),i._id++}return this._id++}},w=f.extend({_class:"Point",_readIndex:!0,initialize:function(t,i){var n=typeof t,r=this.__read,e=0;if("number"===n){var s="number"==typeof i;this._set(t,s?i:t),r&&(e=s?2:1)}else if("undefined"===n||null===t)this._set(0,0),r&&(e=null===t?1:0);else{var h="string"===n?t.split(/[\s,]+/)||[]:t;e=1,Array.isArray(h)?this._set(+h[0],+(h.length>1?h[1]:h[0])):"x"in h?this._set(h.x||0,h.y||0):"width"in h?this._set(h.width||0,h.height||0):"angle"in h?(this._set(h.length||0,0),this.setAngle(h.angle||0)):(this._set(0,0),e=0)}return r&&(this.__read=e),this},set:"#initialize",_set:function(t,i){return this.x=t,this.y=i,this},equals:function(t){return this===t||t&&(this.x===t.x&&this.y===t.y||Array.isArray(t)&&this.x===t[0]&&this.y===t[1])||!1},clone:function(){return new w(this.x,this.y)},toString:function(){var t=p.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+" }"},_serialize:function(t){var i=t.formatter;return[i.number(this.x),i.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(t){if(this.isZero()){var i=this._angle||0;this._set(Math.cos(i)*t,Math.sin(i)*t)}else{var n=t/this.getLength();g.isZero(n)&&this.getAngle(),this._set(this.x*n,this.y*n)}},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(t){this.setAngleInRadians.call(this,t*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var t=w.read(arguments),i=this.getLength()*t.getLength();if(g.isZero(i))return NaN;var n=this.dot(t)/i;return Math.acos(n<-1?-1:n>1?1:n)}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(t){if(this._angle=t,!this.isZero()){var i=this.getLength();this._set(Math.cos(t)*i,Math.sin(t)*i)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var t=w.read(arguments);return 180*Math.atan2(this.cross(t),this.dot(t))/Math.PI},getDistance:function(){var t=arguments,i=w.read(t),n=i.x-this.x,r=i.y-this.y,e=n*n+r*r;return f.read(t)?e:Math.sqrt(e)},normalize:function(t){t===a&&(t=1);var i=this.getLength(),n=0!==i?t/i:0,r=new w(this.x*n,this.y*n);return n>=0&&(r._angle=this._angle),r},rotate:function(t,i){if(0===t)return this.clone();t=t*Math.PI/180;var n=i?this.subtract(i):this,r=Math.sin(t),e=Math.cos(t);return n=new w(n.x*e-n.y*r,n.x*r+n.y*e),i?n.add(i):n},transform:function(t){return t?t._transformPoint(this):this},add:function(){var t=w.read(arguments);return new w(this.x+t.x,this.y+t.y)},subtract:function(){var t=w.read(arguments);return new w(this.x-t.x,this.y-t.y)},multiply:function(){var t=w.read(arguments);return new w(this.x*t.x,this.y*t.y)},divide:function(){var t=w.read(arguments);return new w(this.x/t.x,this.y/t.y)},modulo:function(){var t=w.read(arguments);return new w(this.x%t.x,this.y%t.y)},negate:function(){return new w(-this.x,-this.y)},isInside:function(){return x.read(arguments).contains(this)},isClose:function(){var t=arguments,i=w.read(t),n=f.read(t);return this.getDistance(i)<=n},isCollinear:function(){var t=w.read(arguments);return w.isCollinear(this.x,this.y,t.x,t.y)},isColinear:"#isCollinear",isOrthogonal:function(){var t=w.read(arguments);return w.isOrthogonal(this.x,this.y,t.x,t.y)},isZero:function(){var t=g.isZero;return t(this.x)&&t(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(t){return this.x*(t>1&&t<4?-1:1)>=0&&this.y*(t>2?-1:1)>=0},dot:function(){var t=w.read(arguments);return this.x*t.x+this.y*t.y},cross:function(){var t=w.read(arguments);return this.x*t.y-this.y*t.x},project:function(){var t=w.read(arguments),i=t.isZero()?0:this.dot(t)/t.dot(t);return new w(t.x*i,t.y*i)},statics:{min:function(){var t=arguments,i=w.read(t),n=w.read(t);return new w(Math.min(i.x,n.x),Math.min(i.y,n.y))},max:function(){var t=arguments,i=w.read(t),n=w.read(t);return new w(Math.max(i.x,n.x),Math.max(i.y,n.y))},random:function(){return new w(Math.random(),Math.random())},isCollinear:function(t,i,n,r){return Math.abs(t*r-i*n)<=1e-8*Math.sqrt((t*t+i*i)*(n*n+r*r))},isOrthogonal:function(t,i,n,r){return Math.abs(t*n+i*r)<=1e-8*Math.sqrt((t*t+i*i)*(n*n+r*r))}}},f.each(["round","ceil","floor","abs"],(function(t){var i=Math[t];this[t]=function(){return new w(i(this.x),i(this.y))}}),{})),y=w.extend({initialize:function(t,i,n,r){this._x=t,this._y=i,this._owner=n,this._setter=r},_set:function(t,i,n){return this._x=t,this._y=i,n||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){return"setPosition"===this._setter?4:0}}),b=f.extend({_class:"Size",_readIndex:!0,initialize:function(t,i){var n=typeof t,r=this.__read,e=0;if("number"===n){var s="number"==typeof i;this._set(t,s?i:t),r&&(e=s?2:1)}else if("undefined"===n||null===t)this._set(0,0),r&&(e=null===t?1:0);else{var h="string"===n?t.split(/[\s,]+/)||[]:t;e=1,Array.isArray(h)?this._set(+h[0],+(h.length>1?h[1]:h[0])):"width"in h?this._set(h.width||0,h.height||0):"x"in h?this._set(h.x||0,h.y||0):(this._set(0,0),e=0)}return r&&(this.__read=e),this},set:"#initialize",_set:function(t,i){return this.width=t,this.height=i,this},equals:function(t){return t===this||t&&(this.width===t.width&&this.height===t.height||Array.isArray(t)&&this.width===t[0]&&this.height===t[1])||!1},clone:function(){return new b(this.width,this.height)},toString:function(){var t=p.instance;return"{ width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var i=t.formatter;return[i.number(this.width),i.number(this.height)]},add:function(){var t=b.read(arguments);return new b(this.width+t.width,this.height+t.height)},subtract:function(){var t=b.read(arguments);return new b(this.width-t.width,this.height-t.height)},multiply:function(){var t=b.read(arguments);return new b(this.width*t.width,this.height*t.height)},divide:function(){var t=b.read(arguments);return new b(this.width/t.width,this.height/t.height)},modulo:function(){var t=b.read(arguments);return new b(this.width%t.width,this.height%t.height)},negate:function(){return new b(-this.width,-this.height)},isZero:function(){var t=g.isZero;return t(this.width)&&t(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(t,i){return new b(Math.min(t.width,i.width),Math.min(t.height,i.height))},max:function(t,i){return new b(Math.max(t.width,i.width),Math.max(t.height,i.height))},random:function(){return new b(Math.random(),Math.random())}}},f.each(["round","ceil","floor","abs"],(function(t){var i=Math[t];this[t]=function(){return new b(i(this.width),i(this.height))}}),{})),_=b.extend({initialize:function(t,i,n,r){this._width=t,this._height=i,this._owner=n,this._setter=r},_set:function(t,i,n){return this._width=t,this._height=i,n||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(t){this._width=t,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(t){this._height=t,this._owner[this._setter](this)}}),x=f.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(t,i,n,r){var e,s=arguments,h=typeof t;if("number"===h?(this._set(t,i,n,r),e=4):"undefined"===h||null===t?(this._set(0,0,0,0),e=null===t?1:0):1===s.length&&(Array.isArray(t)?(this._set.apply(this,t),e=1):t.x!==a||t.width!==a?(this._set(t.x||0,t.y||0,t.width||0,t.height||0),e=1):t.from===a&&t.to===a&&(this._set(0,0,0,0),f.readSupported(s,this)&&(e=1))),e===a){var u,o,c=w.readNamed(s,"from"),l=f.peek(s),v=c.x,d=c.y;if(l&&l.x!==a||f.hasNamed(s,"to")){var p=w.readNamed(s,"to");u=p.x-v,o=p.y-d,u<0&&(v=p.x,u=-u),o<0&&(d=p.y,o=-o)}else{var g=b.read(s);u=g.width,o=g.height}this._set(v,d,u,o),e=s.__index}var m=s.__filtered;return m&&(this.__filtered=m),this.__read&&(this.__read=e),this},set:"#initialize",_set:function(t,i,n,r){return this.x=t,this.y=i,this.width=n,this.height=r,this},clone:function(){return new x(this.x,this.y,this.width,this.height)},equals:function(t){var i=f.isPlainValue(t)?x.read(arguments):t;return i===this||i&&this.x===i.x&&this.y===i.y&&this.width===i.width&&this.height===i.height||!1},toString:function(){var t=p.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+", width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var i=t.formatter;return[i.number(this.x),i.number(this.y),i.number(this.width),i.number(this.height)]},getPoint:function(t){return new(t?w:y)(this.x,this.y,this,"setPoint")},setPoint:function(){var t=w.read(arguments);this.x=t.x,this.y=t.y},getSize:function(t){return new(t?b:_)(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var t=b.read(arguments),i=this._sx,n=this._sy,r=t.width,e=t.height;i&&(this.x+=(this.width-r)*i),n&&(this.y+=(this.height-e)*n),this.width=r,this.height=e,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(t){if(!this._fw){var i=t-this.x;this.width-=.5===this._sx?2*i:i}this.x=t,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(t){if(!this._fh){var i=t-this.y;this.height-=.5===this._sy?2*i:i}this.y=t,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(t){if(!this._fw){var i=t-this.x;this.width=.5===this._sx?2*i:i}this.x=t-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(t){if(!this._fh){var i=t-this.y;this.height=.5===this._sy?2*i:i}this.y=t-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(t){this._fw||.5===this._sx?this.x=t-this.width/2:(this._sx&&(this.x+=2*(t-this.x)*this._sx),this.width=2*(t-this.x)),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(t){this._fh||.5===this._sy?this.y=t-this.height/2:(this._sy&&(this.y+=2*(t-this.y)*this._sy),this.height=2*(t-this.y)),this._sy=.5,this._fh=0},getCenter:function(t){return new(t?w:y)(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var t=w.read(arguments);return this.setCenterX(t.x),this.setCenterY(t.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(t){return t&&t.width!==a||4===(Array.isArray(t)?t:arguments).length?this._containsRectangle(x.read(arguments)):this._containsPoint(w.read(arguments))},_containsPoint:function(t){var i=t.x,n=t.y;return i>=this.x&&n>=this.y&&i<=this.x+this.width&&n<=this.y+this.height},_containsRectangle:function(t){var i=t.x,n=t.y;return i>=this.x&&n>=this.y&&i+t.width<=this.x+this.width&&n+t.height<=this.y+this.height},intersects:function(){var t=x.read(arguments),i=f.read(arguments)||0;return t.x+t.width>this.x-i&&t.y+t.height>this.y-i&&t.x<this.x+this.width+i&&t.y<this.y+this.height+i},intersect:function(){var t=x.read(arguments),i=Math.max(this.x,t.x),n=Math.max(this.y,t.y),r=Math.min(this.x+this.width,t.x+t.width),e=Math.min(this.y+this.height,t.y+t.height);return new x(i,n,r-i,e-n)},unite:function(){var t=x.read(arguments),i=Math.min(this.x,t.x),n=Math.min(this.y,t.y),r=Math.max(this.x+this.width,t.x+t.width),e=Math.max(this.y+this.height,t.y+t.height);return new x(i,n,r-i,e-n)},include:function(){var t=w.read(arguments),i=Math.min(this.x,t.x),n=Math.min(this.y,t.y),r=Math.max(this.x+this.width,t.x),e=Math.max(this.y+this.height,t.y);return new x(i,n,r-i,e-n)},expand:function(){var t=b.read(arguments),i=t.width,n=t.height;return new x(this.x-i/2,this.y-n/2,this.width+i,this.height+n)},scale:function(t,i){return this.expand(this.width*t-this.width,this.height*(i===a?t:i)-this.height)}},f.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],(function(t,i){var n=t.join(""),r=/^[RL]/.test(n);i>=4&&(t[1]+=r?"Y":"X");var e=t[r?0:1],s=t[r?1:0],h="get"+e,a="get"+s,u="set"+e,o="set"+s,f="set"+n;this["get"+n]=function(t){return new(t?w:y)(this[h](),this[a](),this,f)},this[f]=function(){var t=w.read(arguments);this[u](t.x),this[o](t.y)}}),{beans:!0})),S=x.extend({initialize:function(t,i,n,r,e,s){this._set(t,i,n,r,!0),this._owner=e,this._setter=s},_set:function(t,i,n,r,e){return this._x=t,this._y=i,this._width=n,this._height=r,e||this._owner[this._setter](this),this}},new function(){var t=x.prototype;return f.each(["x","y","width","height"],(function(t){var i=f.capitalize(t),n="_"+t;this["get"+i]=function(){return this[n]},this["set"+i]=function(t){this[n]=t,this._dontNotify||this._owner[this._setter](this)}}),f.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],(function(i){var n="set"+i;this[n]=function(){this._dontNotify=!0,t[n].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}}),{isSelected:function(){return!!(2&this._owner._selection)},setSelected:function(t){var i=this._owner;i._changeSelection&&i._changeSelection(2,t)}}))}),k=f.extend({_class:"Matrix",initialize:function t(i,n){var r=arguments,e=r.length,s=!0;if(e>=6?this._set.apply(this,r):1===e||2===e?i instanceof t?this._set(i._a,i._b,i._c,i._d,i._tx,i._ty,n):Array.isArray(i)?this._set.apply(this,n?i.concat([n]):i):s=!1:e?s=!1:this.reset(),!s)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(t,i,n,r,e,s,h){return this._a=t,this._b=i,this._c=n,this._d=r,this._tx=e,this._ty=s,h||this._changed(),this},_serialize:function(t,i){return f.serialize(this.getValues(),t,!0,i)},_changed:function(){var t=this._owner;t&&(t._applyMatrix?t.transform(null,!0):t._changed(25))},clone:function(){return new k(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(t){return t===this||t&&this._a===t._a&&this._b===t._b&&this._c===t._c&&this._d===t._d&&this._tx===t._tx&&this._ty===t._ty},toString:function(){var t=p.instance;return"[["+[t.number(this._a),t.number(this._c),t.number(this._tx)].join(", ")+"], ["+[t.number(this._b),t.number(this._d),t.number(this._ty)].join(", ")+"]]"},reset:function(t){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,t||this._changed(),this},apply:function(t,i){var n=this._owner;return!!n&&(n.transform(null,f.pick(t,!0),i),this.isIdentity())},translate:function(){var t=w.read(arguments),i=t.x,n=t.y;return this._tx+=i*this._a+n*this._c,this._ty+=i*this._b+n*this._d,this._changed(),this},scale:function(){var t=arguments,i=w.read(t),n=w.read(t,0,{readNull:!0});return n&&this.translate(n),this._a*=i.x,this._b*=i.x,this._c*=i.y,this._d*=i.y,n&&this.translate(n.negate()),this._changed(),this},rotate:function(t){t*=Math.PI/180;var i=w.read(arguments,1),n=i.x,r=i.y,e=Math.cos(t),s=Math.sin(t),h=n-n*e+r*s,a=r-n*s-r*e,u=this._a,o=this._b,f=this._c,c=this._d;return this._a=e*u+s*f,this._b=e*o+s*c,this._c=-s*u+e*f,this._d=-s*o+e*c,this._tx+=h*u+a*f,this._ty+=h*o+a*c,this._changed(),this},shear:function(){var t=arguments,i=w.read(t),n=w.read(t,0,{readNull:!0});n&&this.translate(n);var r=this._a,e=this._b;return this._a+=i.y*this._c,this._b+=i.y*this._d,this._c+=i.x*r,this._d+=i.x*e,n&&this.translate(n.negate()),this._changed(),this},skew:function(){var t=arguments,i=w.read(t),n=w.read(t,0,{readNull:!0}),r=Math.PI/180,e=new w(Math.tan(i.x*r),Math.tan(i.y*r));return this.shear(e,n)},append:function(t,i){if(t){var n=this._a,r=this._b,e=this._c,s=this._d,h=t._a,a=t._c,u=t._b,o=t._d,f=t._tx,c=t._ty;this._a=h*n+u*e,this._c=a*n+o*e,this._b=h*r+u*s,this._d=a*r+o*s,this._tx+=f*n+c*e,this._ty+=f*r+c*s,i||this._changed()}return this},prepend:function(t,i){if(t){var n=this._a,r=this._b,e=this._c,s=this._d,h=this._tx,a=this._ty,u=t._a,o=t._c,f=t._b,c=t._d,l=t._tx,v=t._ty;this._a=u*n+o*r,this._c=u*e+o*s,this._b=f*n+c*r,this._d=f*e+c*s,this._tx=u*h+o*a+l,this._ty=f*h+c*a+v,i||this._changed()}return this},appended:function(t){return this.clone().append(t)},prepended:function(t){return this.clone().prepend(t)},invert:function(){var t=this._a,i=this._b,n=this._c,r=this._d,e=this._tx,s=this._ty,h=t*r-i*n,a=null;return h&&!isNaN(h)&&isFinite(e)&&isFinite(s)&&(this._a=r/h,this._b=-i/h,this._c=-n/h,this._d=t/h,this._tx=(n*s-r*e)/h,this._ty=(i*e-t*s)/h,a=this),a},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new k(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return 1===this._a&&0===this._b&&0===this._c&&1===this._d&&0===this._tx&&0===this._ty},isInvertible:function(){var t=this._a*this._d-this._c*this._b;return t&&!isNaN(t)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(t,i,n){return arguments.length<3?this._transformPoint(w.read(arguments)):this._transformCoordinates(t,i,n)},_transformPoint:function(t,i,n){var r=t.x,e=t.y;return i||(i=new w),i._set(r*this._a+e*this._c+this._tx,r*this._b+e*this._d+this._ty,n)},_transformCoordinates:function(t,i,n){for(var r=0,e=2*n;r<e;r+=2){var s=t[r],h=t[r+1];i[r]=s*this._a+h*this._c+this._tx,i[r+1]=s*this._b+h*this._d+this._ty}return i},_transformCorners:function(t){var i=t.x,n=t.y,r=i+t.width,e=n+t.height,s=[i,n,r,n,r,e,i,e];return this._transformCoordinates(s,s,4)},_transformBounds:function(t,i,n){for(var r=this._transformCorners(t),e=r.slice(0,2),s=e.slice(),h=2;h<8;h++){var a=r[h],u=1&h;a<e[u]?e[u]=a:a>s[u]&&(s[u]=a)}return i||(i=new x),i._set(e[0],e[1],s[0]-e[0],s[1]-e[1],n)},inverseTransform:function(){return this._inverseTransform(w.read(arguments))},_inverseTransform:function(t,i,n){var r=this._a,e=this._b,s=this._c,h=this._d,a=this._tx,u=this._ty,o=r*h-e*s,f=null;if(o&&!isNaN(o)&&isFinite(a)&&isFinite(u)){var c=t.x-this._tx,l=t.y-this._ty;i||(i=new w),f=i._set((c*h-l*s)/o,(l*r-c*e)/o,n)}return f},decompose:function(){var t,i,n,r=this._a,e=this._b,s=this._c,h=this._d,a=r*h-e*s,u=Math.sqrt,o=Math.atan2,f=180/Math.PI;if(0!==r||0!==e){var c=u(r*r+e*e);t=Math.acos(r/c)*(e>0?1:-1),i=[c,a/c],n=[o(r*s+e*h,c*c),0]}else if(0!==s||0!==h){var l=u(s*s+h*h);t=Math.asin(s/l)*(h>0?1:-1),i=[a/l,l],n=[0,o(r*s+e*h,l*l)]}else t=0,n=i=[0,0];return{translation:this.getTranslation(),rotation:t*f,scaling:new w(i),skewing:new w(n[0]*f,n[1]*f)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new w(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(t){this.isIdentity()||t.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},f.each(["a","b","c","d","tx","ty"],(function(t){var i=f.capitalize(t),n="_"+t;this["get"+i]=function(){return this[n]},this["set"+i]=function(t){this[n]=t,this._changed()}}),{})),C=f.extend({_class:"Line",initialize:function(t,i,n,r,e){var s=!1;arguments.length>=4?(this._px=t,this._py=i,this._vx=n,this._vy=r,s=e):(this._px=t.x,this._py=t.y,this._vx=i.x,this._vy=i.y,s=n),s||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new w(this._px,this._py)},getVector:function(){return new w(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(t,i){return C.intersect(this._px,this._py,this._vx,this._vy,t._px,t._py,t._vx,t._vy,!0,i)},getSide:function(t,i){return C.getSide(this._px,this._py,this._vx,this._vy,t.x,t.y,!0,i)},getDistance:function(t){return Math.abs(this.getSignedDistance(t))},getSignedDistance:function(t){return C.getSignedDistance(this._px,this._py,this._vx,this._vy,t.x,t.y,!0)},isCollinear:function(t){return w.isCollinear(this._vx,this._vy,t._vx,t._vy)},isOrthogonal:function(t){return w.isOrthogonal(this._vx,this._vy,t._vx,t._vy)},statics:{intersect:function(t,i,n,r,e,s,h,a,u,o){u||(n-=t,r-=i,h-=e,a-=s);var f=n*a-r*h;if(!g.isMachineZero(f)){var c=t-e,l=i-s,v=(h*l-a*c)/f,d=(n*l-r*c)/f,p=-1e-12,m=1+1e-12;if(o||p<v&&v<m&&p<d&&d<m)return o||(v=v<=0?0:v>=1?1:v),new w(t+v*n,i+v*r)}},getSide:function(t,i,n,r,e,s,h,a){h||(n-=t,r-=i);var u=e-t,o=u*r-(s-i)*n;return!a&&g.isMachineZero(o)&&(o=(u*n+u*n)/(n*n+r*r))>=0&&o<=1&&(o=0),o<0?-1:o>0?1:0},getSignedDistance:function(t,i,n,r,e,s,h){return h||(n-=t,r-=i),0===n?r>0?e-t:t-e:0===r?n<0?s-i:i-s:((e-t)*r-(s-i)*n)/(r>n?r*Math.sqrt(1+n*n/(r*r)):n*Math.sqrt(1+r*r/(n*n)))},getDistance:function(t,i,n,r,e,s,h){return Math.abs(C.getSignedDistance(t,i,n,r,e,s,h))}}}),M=v.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(t){v.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new X(null,null,this),this._view=Q.create(this,t||ut.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(t,i){return f.serialize(this._children,t,!0,i)},_changed:function(t,i){if(1&t){var n=this._view;n&&(n._needsUpdate=!0,!n._requested&&n._autoUpdate&&n.requestUpdate())}var r=this._changes;if(r&&i){var e=this._changesById,s=i._id,h=e[s];h?h.flags|=t:r.push(e[s]={item:i,flags:t})}},clear:function(){for(var t=this._children,i=t.length-1;i>=0;i--)t[i].remove()},isEmpty:function(){return!this._children.length},remove:function t(){return!!t.base.call(this)&&(this._view&&this._view.remove(),!0)},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(t){this._currentStyle.set(t)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new P({project:this,insert:!0})},getSymbolDefinitions:function(){var t=[],i={};return this.getItems({class:O,match:function(n){var r=n._definition,e=r._id;return i[e]||(i[e]=!0,t.push(r)),!1}}),t},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var t=this._selectionItems,i=[];for(var n in t){var r=t[n],e=r._selection;1&e&&r.isInserted()?i.push(r):e||this._updateSelection(r)}return i},_updateSelection:function(t){var i=t._id,n=this._selectionItems;t._selection?n[i]!==t&&(this._selectionCount++,n[i]=t):n[i]===t&&(this._selectionCount--,delete n[i])},selectAll:function(){for(var t=this._children,i=0,n=t.length;i<n;i++)t[i].setFullySelected(!0)},deselectAll:function(){var t=this._selectionItems;for(var i in t)t[i].setFullySelected(!1)},addLayer:function(t){return this.insertLayer(a,t)},insertLayer:function(t,i){if(i instanceof P){i._remove(!1,!0),f.splice(this._children,[i],t,0),i._setProject(this,!0);var n=i._name;n&&i.setName(n),this._changes&&i._changed(5),this._activeLayer||(this._activeLayer=i)}else i=null;return i},_insertItem:function(t,i,n){return i=this.insertLayer(t,i)||(this._activeLayer||this._insertItem(a,new P(E.NO_INSERT),!0)).insertChild(t,i),n&&i.activate&&i.activate(),i},getItems:function(t){return E._getItems(this,t)},getItem:function(t){return E._getItems(this,t,null,null,!0)[0]||null},importJSON:function(t){this.activate();var i=this._activeLayer;return f.importJSON(t,i&&i.isEmpty()&&i)},removeOn:function(t){var i=this._removeSets;if(i){"mouseup"===t&&(i.mousedrag=null);var n=i[t];if(n){for(var r in n){var e=n[r];for(var s in i){var h=i[s];h&&h!=n&&delete h[e._id]}e.remove()}i[t]=null}}},draw:function(t,i,n){this._updateVersion++,t.save(),i.applyToContext(t);for(var r=this._children,e=new f({offset:new w(0,0),pixelRatio:n,viewMatrix:i.isIdentity()?null:i,matrices:[new k],updateMatrix:!0}),s=0,h=r.length;s<h;s++)r[s].draw(t,e);if(t.restore(),this._selectionCount>0){t.save(),t.strokeWidth=1;var a=this._selectionItems,u=this._scope.settings.handleSize,o=this._updateVersion;for(var c in a)a[c]._drawSelection(t,i,u,a,o);t.restore()}}}),E=f.extend(c,{statics:{extend:function t(i){return i._serializeFields&&(i._serializeFields=f.set({},this.prototype._serializeFields,i._serializeFields)),t.base.apply(this,arguments)},INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new k,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var t=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return f.each(t,(function(t){this._events[t]={install:function(t){this.getView()._countItemEvent(t,1)},uninstall:function(t){this.getView()._countItemEvent(t,-1)}}}),{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:t}})},{initialize:function(){},_initialize:function(t,i){var n=t&&f.isPlainObject(t),r=n&&!0===t.internal,e=this._matrix=new k,s=n&&t.project||lt.project,h=lt.settings;return this._id=r?null:m.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&h.applyMatrix,i&&e.translate(i),e._owner=this,this._style=new X(s._currentStyle,this,s),r||n&&0==t.insert||!h.insertItems&&(!n||1!=t.insert)?this._setProject(s):(n&&t.parent||s)._insertItem(a,this,!0),n&&t!==E.NO_INSERT&&t!==E.INSERT&&this.set(t,{internal:!0,insert:!0,project:!0,parent:!0}),n},_serialize:function(t,i){var n={},r=this;function e(e){for(var s in e){var h=r[s];f.equals(h,"leading"===s?1.2*e.fontSize:e[s])||(n[s]=f.serialize(h,t,"data"!==s,i))}}return e(this._serializeFields),this instanceof I||e(this._style._defaults),[this._class,n]},_changed:function(t){var i=this._symbol,n=this._parent||i,r=this._project;8&t&&(this._bounds=this._position=this._decomposed=a),16&t&&(this._globalMatrix=a),n&&72&t&&E._clearBoundsCache(n),2&t&&E._clearBoundsCache(this),r&&r._changed(t,this),i&&i._changed(t)},getId:function(){return this._id},getName:function(){return this._name},setName:function(t){if(this._name&&this._removeNamed(),t===+t+"")throw new Error("Names consisting only of numbers are not supported.");var i=this._getOwner();if(t&&i){var n=i._children,r=i._namedChildren;(r[t]=r[t]||[]).push(this),t in n||(n[t]=this)}this._name=t||a,this._changed(256)},getStyle:function(){return this._style},setStyle:function(t){this.getStyle().set(t)}},f.each(["locked","visible","blendMode","opacity","guide"],(function(t){var i=f.capitalize(t),n="_"+t,r={locked:256,visible:265};this["get"+i]=function(){return this[n]},this["set"+i]=function(i){i!=this[n]&&(this[n]=i,this._changed(r[t]||257))}}),{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(t){if(t!==this._selection){this._selection=t;var i=this._project;i&&(i._updateSelection(this),this._changed(257))}},_changeSelection:function(t,i){var n=this._selection;this.setSelection(i?n|t:n&~t)},isSelected:function(){if(this._selectChildren)for(var t=this._children,i=0,n=t.length;i<n;i++)if(t[i].isSelected())return!0;return!!(1&this._selection)},setSelected:function(t){if(this._selectChildren)for(var i=this._children,n=0,r=i.length;n<r;n++)i[n].setSelected(t);this._changeSelection(1,t)},isFullySelected:function(){var t=this._children,i=!!(1&this._selection);if(t&&i){for(var n=0,r=t.length;n<r;n++)if(!t[n].isFullySelected())return!1;return!0}return i},setFullySelected:function(t){var i=this._children;if(i)for(var n=0,r=i.length;n<r;n++)i[n].setFullySelected(t);this._changeSelection(1,t)},isClipMask:function(){return this._clipMask},setClipMask:function(t){this._clipMask!=(t=!!t)&&(this._clipMask=t,t&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(t){this._data=t},getPosition:function(t){var i=t?w:y,n=this._position||(this._position=this._getPositionFromBounds());return new i(n.x,n.y,this,"setPosition")},setPosition:function(){this.translate(w.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(t){return this._pivot?this._matrix._transformPoint(this._pivot):(t||this.getBounds()).getCenter(!0)},getPivot:function(){var t=this._pivot;return t?new y(t.x,t.y,this,"setPivot"):null},setPivot:function(){this._pivot=w.read(arguments,0,{clone:!0,readNull:!0}),this._position=a}},f.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},(function(t,i){this[i]=function(i){return this.getBounds(i,t)}}),{beans:!0,getBounds:function(t,i){var n=i||t instanceof k,r=f.set({},n?i:t,this._boundsOptions);r.stroke&&!this.getStrokeScaling()||(r.cacheItem=this);var e=this._getCachedBounds(n&&t,r).rect;return arguments.length?e:new S(e.x,e.y,e.width,e.height,this,"setBounds")},setBounds:function(){var t=x.read(arguments),i=this.getBounds(),n=this._matrix,r=new k,e=t.getCenter();r.translate(e),t.width==i.width&&t.height==i.height||(n.isInvertible()||(n.set(n._backup||(new k).translate(n.getTranslation())),i=this.getBounds()),r.scale(0!==i.width?t.width/i.width:0,0!==i.height?t.height/i.height:0)),e=i.getCenter(),r.translate(-e.x,-e.y),this.transform(r)},_getBounds:function(t,i){var n=this._children;return n&&n.length?(E._updateBoundsCache(this,i.cacheItem),E._getBounds(n,t,i)):new x},_getBoundsCacheKey:function(t,i){return[t.stroke?1:0,t.handle?1:0,i?1:0].join("")},_getCachedBounds:function(t,i,n){t=t&&t._orNullIfIdentity();var r=i.internal&&!n,e=i.cacheItem,s=r?null:this._matrix._orNullIfIdentity(),h=e&&(!t||t.equals(s))&&this._getBoundsCacheKey(i,r),a=this._bounds;if(E._updateBoundsCache(this._parent||this._symbol,e),h&&a&&h in a)return{rect:(l=a[h]).rect.clone(),nonscaling:l.nonscaling};var u=this._getBounds(t||s,i),o=u.rect||u,f=this._style,c=u.nonscaling||f.hasStroke()&&!f.getStrokeScaling();if(h){a||(this._bounds=a={});var l=a[h]={rect:o.clone(),nonscaling:c,internal:r}}return{rect:o,nonscaling:c}},_getStrokeMatrix:function(t,i){var n=this.getStrokeScaling()?null:i&&i.internal?this:this._parent||this._symbol&&this._symbol._item,r=n?n.getViewMatrix().invert():t;return r&&r._shiftless()},statics:{_updateBoundsCache:function(t,i){if(t&&i){var n=i._id,r=t._boundsCache=t._boundsCache||{ids:{},list:[]};r.ids[n]||(r.list.push(i),r.ids[n]=i)}},_clearBoundsCache:function(t){var i=t._boundsCache;if(i){t._bounds=t._position=t._boundsCache=a;for(var n=0,r=i.list,e=r.length;n<e;n++){var s=r[n];s!==t&&(s._bounds=s._position=a,s._boundsCache&&E._clearBoundsCache(s))}}},_getBounds:function(t,i,n){var r=1/0,e=-r,s=r,h=e,a=!1;n=n||{};for(var u=0,o=t.length;u<o;u++){var f=t[u];if(f._visible&&!f.isEmpty(!0)){var c=f._getCachedBounds(i&&i.appended(f._matrix),n,!0),l=c.rect;r=Math.min(l.x,r),s=Math.min(l.y,s),e=Math.max(l.x+l.width,e),h=Math.max(l.y+l.height,h),c.nonscaling&&(a=!0)}}return{rect:isFinite(r)?new x(r,s,e-r,h-s):new x,nonscaling:a}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var t=this._decompose();return t?t.rotation:0},setRotation:function(t){var i=this.getRotation();if(null!=i&&null!=t){var n=this._decomposed;this.rotate(t-i),n&&(n.rotation=t,this._decomposed=n)}},getScaling:function(){var t=this._decompose(),i=t&&t.scaling;return new y(i?i.x:1,i?i.y:1,this,"setScaling")},setScaling:function(){var t=this.getScaling(),i=w.read(arguments,0,{clone:!0,readNull:!0});if(t&&i&&!t.equals(i)){var n=this.getRotation(),r=this._decomposed,e=new k,s=g.isZero;if(s(t.x)||s(t.y))e.translate(r.translation),n&&e.rotate(n),e.scale(i.x,i.y),this._matrix.set(e);else{var h=this.getPosition(!0);e.translate(h),n&&e.rotate(n),e.scale(i.x/t.x,i.y/t.y),n&&e.rotate(-n),e.translate(h.negate()),this.transform(e)}r&&(r.scaling=i,this._decomposed=r)}},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.set.apply(t,arguments)},getGlobalMatrix:function(t){var i=this._globalMatrix;if(i)for(var n=this._parent,r=[];n;){if(!n._globalMatrix){i=null;for(var e=0,s=r.length;e<s;e++)r[e]._globalMatrix=null;break}r.push(n),n=n._parent}i||(i=this._globalMatrix=this._matrix.clone(),(n=this._parent)&&i.prepend(n.getGlobalMatrix(!0)));return t?i:i.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(t){(this._applyMatrix=this._canApplyMatrix&&!!t)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(t,i){if(this._project!==t){this._project&&this._installEvents(!1),this._project=t;for(var n=this._children,r=0,e=n&&n.length;r<e;r++)n[r]._setProject(t);i=!0}i&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function t(i){t.base.call(this,i);for(var n=this._children,r=0,e=n&&n.length;r<e;r++)n[r]._installEvents(i)},getLayer:function(){for(var t=this;t=t._parent;)if(t instanceof P)return t;return null},getParent:function(){return this._parent},setParent:function(t){return t.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(t){this.removeChildren(),this.addChildren(t)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var t=this._getOwner();return t&&t._children[this._index+1]||null},getPreviousSibling:function(){var t=this._getOwner();return t&&t._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(t){return t===this||t&&this._class===t._class&&this._style.equals(t._style)&&this._matrix.equals(t._matrix)&&this._locked===t._locked&&this._visible===t._visible&&this._blendMode===t._blendMode&&this._opacity===t._opacity&&this._clipMask===t._clipMask&&this._guide===t._guide&&this._equals(t)||!1},_equals:function(t){return f.equals(this._children,t._children)},clone:function(t){var i=new this.constructor(E.NO_INSERT),n=this._children,r=f.pick(t?t.insert:a,t===a||!0===t),e=f.pick(t?t.deep:a,!0);n&&i.copyAttributes(this),n&&!e||i.copyContent(this),n||i.copyAttributes(this),r&&i.insertAbove(this);var s=this._name,h=this._parent;if(s&&h){n=h._children;for(var u=s,o=1;n[s];)s=u+" "+o++;s!==u&&i.setName(s)}return i},copyContent:function(t){for(var i=t._children,n=0,r=i&&i.length;n<r;n++)this.addChild(i[n].clone(!1),!0)},copyAttributes:function(t,i){this.setStyle(t._style);for(var n=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],r=0,e=n.length;r<e;r++){var s=n[r];t.hasOwnProperty(s)&&(this[s]=t[s])}i||this._matrix.set(t._matrix,!0),this.setApplyMatrix(t._applyMatrix),this.setPivot(t._pivot),this.setSelection(t._selection);var h=t._data,a=t._name;this._data=h?f.clone(h):null,a&&this.setName(a)},rasterize:function(t,i){var n,r,e;f.isPlainObject(t)?(n=t.resolution,r=t.insert,e=t.raster):(n=t,r=i),e||(e=new T(E.NO_INSERT));var s=this.getStrokeBounds(),h=(n||this.getView().getResolution())/72,u=s.getTopLeft().floor(),o=s.getBottomRight().ceil(),c=new b(o.subtract(u)),l=c.multiply(h);if(e.setSize(l,!0),!l.isZero()){var v=e.getContext(!0),d=(new k).scale(h).translate(u.negate());v.save(),d.applyToContext(v),this.draw(v,new f({matrices:[d]})),v.restore()}return e._matrix.set((new k).translate(u.add(c.divide(2))).scale(1/h)),(r===a||r)&&e.insertAbove(this),e},contains:function(){var t=this._matrix;return t.isInvertible()&&!!this._contains(t._inverseTransform(w.read(arguments)))},_contains:function(t){var i=this._children;if(i){for(var n=i.length-1;n>=0;n--)if(i[n].contains(t))return!0;return!1}return t.isInside(this.getInternalBounds())},isInside:function(){return x.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new j.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(t,i){return t instanceof E&&this._asPathItem().getIntersections(t._asPathItem(),null,i,!0).length>0}},new function(){function t(){var t=arguments;return this._hitTest(w.read(t),z.getOptions(t))}function i(){var t=arguments,i=w.read(t),n=z.getOptions(t),r=[];return this._hitTest(i,new f({all:r},n)),r}function n(t,i,n,r){var e=this._children;if(e)for(var s=e.length-1;s>=0;s--){var h=e[s],a=h!==r&&h._hitTest(t,i,n);if(a&&!i.all)return a}return null}return M.inject({hitTest:t,hitTestAll:i,_hitTest:n}),{hitTest:t,hitTestAll:i,_hitTestChildren:n}},{_hitTest:function(t,i,n){if(this._locked||!this._visible||this._guide&&!i.guides||this.isEmpty())return null;var r=this._matrix,e=n?n.appended(r):this.getGlobalMatrix().prepend(this.getView()._matrix),s=Math.max(i.tolerance,1e-12),h=i._tolerancePadding=new b(j._getStrokePadding(s,r._shiftless().invert()));if(!(t=r._inverseTransform(t))||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(h.multiply(2))._containsPoint(t))return null;var a,u,o=!(i.guides&&!this._guide||i.selected&&!this.isSelected()||i.type&&i.type!==f.hyphenate(this._class)||i.class&&!(this instanceof i.class)),c=i.match,l=this;function v(t){return t&&c&&!c(t)&&(t=null),t&&i.all&&i.all.push(t),t}function d(i,n){var r=n?a["get"+n]():l.getPosition();if(t.subtract(r).divide(h).length<=1)return new z(i,l,{name:n?f.hyphenate(n):i,point:r})}var p=i.position,g=i.center,m=i.bounds;if(o&&this._parent&&(p||g||m)){if((g||m)&&(a=this.getInternalBounds()),!(u=p&&d("position")||g&&d("center","Center"))&&m)for(var w=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],y=0;y<8&&!u;y++)u=d("bounds",w[y]);u=v(u)}return u||(u=this._hitTestChildren(t,i,e)||o&&v(this._hitTestSelf(t,i,e,this.getStrokeScaling()?null:e._shiftless().invert()))||null),u&&u.point&&(u.point=r.transform(u.point)),u},_hitTestSelf:function(t,i){if(i.fill&&this.hasFill()&&this._contains(t))return new z("fill",this)},matches:function(t,i){var n=typeof t;if("object"===n){for(var r in t)if(t.hasOwnProperty(r)&&!this.matches(r,t[r]))return!1;return!0}if("function"===n)return t(this);if("match"===t)return i(this);var e=/^(empty|editable)$/.test(t)?this["is"+f.capitalize(t)]():"type"===t?f.hyphenate(this._class):this[t];if("class"===t){if("function"==typeof i)return this instanceof i;e=this._class}if("function"==typeof i)return!!i(e);if(i){if(i.test)return i.test(e);if(f.isPlainObject(i))return function t(i,n){for(var r in i)if(i.hasOwnProperty(r)){var e=i[r],s=n[r];if(f.isPlainObject(e)&&f.isPlainObject(s)){if(!t(e,s))return!1}else if(!f.equals(e,s))return!1}return!0}(i,e)}return f.equals(e,i)},getItems:function(t){return E._getItems(this,t,this._matrix)},getItem:function(t){return E._getItems(this,t,this._matrix,null,!0)[0]||null},statics:{_getItems:function t(i,n,r,e,s){if(!e){var h="object"==typeof n&&n,a=h&&h.overlapping,u=h&&h.inside,o=(w=a||u)&&x.read([w]);e={items:[],recursive:h&&!1!==h.recursive,inside:!!u,overlapping:!!a,rect:o,path:a&&new j.Rectangle({rectangle:o,insert:!1})},h&&(n=f.filter({},n,{recursive:!0,inside:!0,overlapping:!0}))}var c=i._children,l=e.items;r=(o=e.rect)&&(r||new k);for(var v=0,d=c&&c.length;v<d;v++){var p=c[v],g=r&&r.appended(p._matrix),m=!0;if(o){var w=p.getBounds(g);if(!o.intersects(w))continue;o.contains(w)||e.overlapping&&(w.contains(o)||e.path.intersects(p,g))||(m=!1)}if(m&&p.matches(n)&&(l.push(p),s))break;if(!1!==e.recursive&&t(p,n,g,e,s),s&&l.length>0)break}return l}}},{importJSON:function(t){var i=f.importJSON(t,this);return i!==this?this.addChild(i):i},addChild:function(t){return this.insertChild(a,t)},insertChild:function(t,i){var n=i?this.insertChildren(t,[i]):null;return n&&n[0]},addChildren:function(t){return this.insertChildren(this._children.length,t)},insertChildren:function(t,i){var n=this._children;if(n&&i&&i.length>0){for(var r={},e=(i=f.slice(i)).length-1;e>=0;e--){var s=(o=i[e])&&o._id;!o||r[s]?i.splice(e,1):(o._remove(!1,!0),r[s]=!0)}f.splice(n,i,t,0);for(var h=this._project,a=h._changes,u=(e=0,i.length);e<u;e++){var o,c=(o=i[e])._name;o._parent=this,o._setProject(h,!0),c&&o.setName(c),a&&o._changed(5)}this._changed(11)}else i=null;return i},_insertItem:"#insertChild",_insertAt:function(t,i){var n=t&&t._getOwner(),r=t!==this&&n?this:null;return r&&(r._remove(!1,!0),n._insertItem(t._index+i,r)),r},insertAbove:function(t){return this._insertAt(t,1)},insertBelow:function(t){return this._insertAt(t,0)},sendToBack:function(){var t=this._getOwner();return t?t._insertItem(0,this):null},bringToFront:function(){var t=this._getOwner();return t?t._insertItem(a,this):null},appendTop:"#addChild",appendBottom:function(t){return this.insertChild(0,t)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(t){return t._insertItem(a,this)},copyTo:function(t){return this.clone(!1).addTo(t)},reduce:function(t){var i=this._children;if(i&&1===i.length){var n=i[0].reduce(t);return this._parent?(n.insertAbove(this),this.remove()):n.remove(),n}return this},_removeNamed:function(){var t=this._getOwner();if(t){var i=t._children,n=t._namedChildren,r=this._name,e=n[r],s=e?e.indexOf(this):-1;-1!==s&&(i[r]==this&&delete i[r],e.splice(s,1),e.length?i[r]=e[0]:delete n[r])}},_remove:function(t,i){var n=this._getOwner(),r=this._project,e=this._index;return this._style&&this._style._dispose(),!!n&&(this._name&&this._removeNamed(),null!=e&&(r._activeLayer===this&&(r._activeLayer=this.getNextSibling()||this.getPreviousSibling()),f.splice(n._children,null,e,1)),this._installEvents(!1),t&&r._changes&&this._changed(5),i&&n._changed(11,this),this._parent=null,!0)},remove:function(){return this._remove(!0,!0)},replaceWith:function(t){var i=t&&t.insertBelow(this);return i&&this.remove(),i},removeChildren:function(t,i){if(!this._children)return null;t=t||0,i=f.pick(i,this._children.length);for(var n=f.splice(this._children,null,t,i-t),r=n.length-1;r>=0;r--)n[r]._remove(!0,!1);return n.length>0&&this._changed(11),n},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var t=0,i=this._children.length;t<i;t++)this._children[t]._index=t;this._changed(11)}},isEmpty:function(t){var i=this._children,n=i?i.length:0;if(t){for(var r=0;r<n;r++)if(!i[r].isEmpty(t))return!1;return!0}return!n},isEditable:function(){for(var t=this;t;){if(!t._visible||t._locked)return!1;t=t._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(t){function i(t){var i=[];do{i.unshift(t)}while(t=t._parent);return i}for(var n=i(this),r=i(t),e=0,s=Math.min(n.length,r.length);e<s;e++)if(n[e]!=r[e])return n[e]._index<r[e]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return!!this._parent&&this._parent.isInserted()},isAbove:function(t){return-1===this._getOrder(t)},isBelow:function(t){return 1===this._getOrder(t)},isParent:function(t){return this._parent===t},isChild:function(t){return t&&t._parent===this},isDescendant:function(t){for(var i=this;i=i._parent;)if(i===t)return!0;return!1},isAncestor:function(t){return!!t&&t.isDescendant(this)},isSibling:function(t){return this._parent===t._parent},isGroupedWith:function(t){for(var i=this._parent;i;){if(i._parent&&/^(Group|Layer|CompoundPath)$/.test(i._class)&&t.isDescendant(i))return!0;i=i._parent}return!1}},f.each(["rotate","scale","shear","skew"],(function(t){var i="rotate"===t;this[t]=function(){var n=arguments,r=(i?f:w).read(n),e=w.read(n,0,{readNull:!0});return this.transform((new k)[t](r,e||this.getPosition(!0)))}}),{translate:function(){var t=new k;return this.transform(t.translate.apply(t,arguments))},transform:function(t,i,n){var r=this._matrix,e=t&&!t.isIdentity(),s=n&&this._canApplyMatrix||this._applyMatrix&&(e||!r.isIdentity()||i&&this._children);if(!e&&!s)return this;if(e){!t.isInvertible()&&r.isInvertible()&&(r._backup=r.getValues()),r.prepend(t,!0);var h=this._style,a=h.getFillColor(!0),u=h.getStrokeColor(!0);a&&a.transform(t),u&&u.transform(t)}if(s&&(s=this._transformContent(r,i,n))){var o=this._pivot;o&&r._transformPoint(o,o,!0),r.reset(!0),n&&this._canApplyMatrix&&(this._applyMatrix=!0)}var f=this._bounds,c=this._position;(e||s)&&this._changed(25);var l=e&&f&&t.decompose();if(l&&l.skewing.isZero()&&l.rotation%90==0){for(var v in f){var d=f[v];if(d.nonscaling)delete f[v];else if(s||!d.internal){var p=d.rect;t._transformBounds(p,p)}}this._bounds=f;var g=f[this._getBoundsCacheKey(this._boundsOptions||{})];g&&(this._position=this._getPositionFromBounds(g.rect))}else e&&c&&this._pivot&&(this._position=t._transformPoint(c,c));return this},_transformContent:function(t,i,n){var r=this._children;if(r){for(var e=0,s=r.length;e<s;e++)r[e].transform(t,i,n);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(w.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(w.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(w.read(arguments))},localToParent:function(){return this._matrix._transformPoint(w.read(arguments))},fitBounds:function(t,i){t=x.read(arguments);var n=this.getBounds(),r=n.height/n.width,e=t.height/t.width,s=(i?r>e:r<e)?t.width/n.width:t.height/n.height,h=new x(new w,new b(n.width*s,n.height*s));h.setCenter(t.getCenter()),this.setBounds(h)}}),{_setStyles:function(t,i,n){var r=this._style,e=this._matrix;if(r.hasFill()&&(t.fillStyle=r.getFillColor().toCanvasStyle(t,e)),r.hasStroke()){t.strokeStyle=r.getStrokeColor().toCanvasStyle(t,e),t.lineWidth=r.getStrokeWidth();var s=r.getStrokeJoin(),h=r.getStrokeCap(),a=r.getMiterLimit();if(s&&(t.lineJoin=s),h&&(t.lineCap=h),a&&(t.miterLimit=a),lt.support.nativeDash){var u=r.getDashArray(),o=r.getDashOffset();u&&u.length&&("setLineDash"in t?(t.setLineDash(u),t.lineDashOffset=o):(t.mozDash=u,t.mozDashOffset=o))}}if(r.hasShadow()){var f=i.pixelRatio||1,c=n._shiftless().prepend((new k).scale(f,f)),l=c.transform(new w(r.getShadowBlur(),0)),v=c.transform(this.getShadowOffset());t.shadowColor=r.getShadowColor().toCanvasStyle(t),t.shadowBlur=l.getLength(),t.shadowOffsetX=v.x,t.shadowOffsetY=v.y}},draw:function(t,i,n){this._updateVersion=this._project._updateVersion;if(this._visible&&0!==this._opacity){var r=i.matrices,e=i.viewMatrix,s=this._matrix,h=r[r.length-1].appended(s);if(h.isInvertible()){e=e?e.appended(h):h,r.push(h),i.updateMatrix&&(this._globalMatrix=h);var a,u,o,f=this._blendMode,c=g.clamp(this._opacity,0,1),l="normal"===f,v=ot.nativeModes[f],d=l&&1===c||i.dontStart||i.clip||(v||l&&c<1)&&this._canComposite(),p=i.pixelRatio||1;if(!d){var m=this.getStrokeBounds(e);if(!m.width||!m.height)return void r.pop();o=i.offset,u=i.offset=m.getTopLeft().floor(),a=t,t=ut.getContext(m.getSize().ceil().add(1).multiply(p)),1!==p&&t.scale(p,p)}t.save();var w=n?n.appended(s):this._canScaleStroke&&!this.getStrokeScaling(!0)&&e,y=!d&&i.clipItem,b=!w||y;if(d?(t.globalAlpha=c,v&&(t.globalCompositeOperation=f)):b&&t.translate(-u.x,-u.y),b&&(d?s:e).applyToContext(t),y&&i.clipItem.draw(t,i.extend({clip:!0})),w){t.setTransform(p,0,0,p,0,0);var _=i.offset;_&&t.translate(-_.x,-_.y)}this._draw(t,i,e,w),t.restore(),r.pop(),i.clip&&!i.dontFinish&&t.clip(this.getFillRule()),d||(ot.process(f,t,a,c,u.subtract(o).multiply(p)),ut.release(t),i.offset=o)}}},_isUpdated:function(t){var i=this._parent;if(i instanceof U)return i._isUpdated(t);var n=this._updateVersion===t;return!n&&i&&i._visible&&i._isUpdated(t)&&(this._updateVersion=t,n=!0),n},_drawSelection:function(t,i,n,r,e){var s=this._selection,h=1&s,a=2&s||h&&this._selectBounds,u=4&s;if(this._drawSelected||(h=!1),(h||a||u)&&this._isUpdated(e)){var o,f=this.getSelectedColor(!0)||(o=this.getLayer())&&o.getSelectedColor(!0),c=i.appended(this.getGlobalMatrix(!0)),l=n/2;if(t.strokeStyle=t.fillStyle=f?f.toCanvasStyle(t):"#009dec",h&&this._drawSelected(t,c,r),u){var v=this.getPosition(!0),d=this._parent,p=d?d.localToGlobal(v):v,g=p.x,m=p.y;t.beginPath(),t.arc(g,m,l,0,2*Math.PI,!0),t.stroke();for(var w=[[0,-1],[1,0],[0,1],[-1,0]],y=l,b=n+1,_=0;_<4;_++){var x=w[_],S=x[0],k=x[1];t.moveTo(g+S*y,m+k*y),t.lineTo(g+S*b,m+k*b),t.stroke()}}if(a){var C=c._transformCorners(this.getInternalBounds());t.beginPath();for(_=0;_<8;_++)t[_?"lineTo":"moveTo"](C[_],C[++_]);t.closePath(),t.stroke();for(_=0;_<8;_++)t.fillRect(C[_]-l,C[++_]-l,n,n)}}},_canComposite:function(){return!1}},f.each(["down","drag","up","move"],(function(t){this["removeOn"+f.capitalize(t)]=function(){var i={};return i[t]=!0,this.removeOn(i)}}),{removeOn:function(t){for(var i in t)if(t[i]){var n="mouse"+i,r=this._project,e=r._removeSets=r._removeSets||{};e[n]=e[n]||{},e[n][this._id]=this}return this}}),{tween:function(t,i,n){n||(n=i,i=t,t=null,n||(n=i,i=null));var r=n&&n.easing,e=n&&n.start,s=null!=n&&("number"==typeof n?n:n.duration),h=new ht(this,t,i,s,r,e);return s&&this.on("frame",(function t(i){h._handleFrame(1e3*i.time),h.running||this.off("frame",t)})),h},tweenTo:function(t,i){return this.tween(null,t,i)},tweenFrom:function(t,i){return this.tween(t,null,i)}}),I=E.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function t(i){t.base.call(this,i),2050&i&&(this._clipItem=a)},_getClipItem:function(){var t=this._clipItem;if(t===a){t=null;for(var i=this._children,n=0,r=i.length;n<r;n++)if(i[n]._clipMask){t=i[n];break}this._clipItem=t}return t},isClipped:function(){return!!this._getClipItem()},setClipped:function(t){var i=this.getFirstChild();i&&i.setClipMask(t)},_getBounds:function t(i,n){var r=this._getClipItem();return r?r._getCachedBounds(r._matrix.prepended(i),f.set({},n,{stroke:!1})):t.base.call(this,i,n)},_hitTestChildren:function t(i,n,r){var e=this._getClipItem();return(!e||e.contains(i))&&t.base.call(this,i,n,r,e)},_draw:function(t,i){var n=i.clip,r=!n&&this._getClipItem();i=i.extend({clipItem:r,clip:!1}),n?(t.beginPath(),i.dontStart=i.dontFinish=!0):r&&r.draw(t,i.extend({clip:!0}));for(var e=this._children,s=0,h=e.length;s<h;s++){var a=e[s];a!==r&&a.draw(t,i)}}}),P=I.extend({_class:"Layer",initialize:function(){I.apply(this,arguments)},_getOwner:function(){return this._parent||null!=this._index&&this._project},isInserted:function t(){return this._parent?t.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),A=E.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(t,i){this._initialize(t,i)},_equals:function(t){return this._type===t._type&&this._size.equals(t._size)&&f.equals(this._radius,t._radius)},copyContent:function(t){this.setType(t._type),this.setSize(t._size),this.setRadius(t._radius)},getType:function(){return this._type},setType:function(t){this._type=t},getShape:"#getType",setShape:"#setType",getSize:function(){var t=this._size;return new _(t.width,t.height,this,"setSize")},setSize:function(){var t=b.read(arguments);if(this._size){if(!this._size.equals(t)){var i=this._type,n=t.width,r=t.height;"rectangle"===i?this._radius.set(b.min(this._radius,t.divide(2).abs())):"circle"===i?(n=r=(n+r)/2,this._radius=n/2):"ellipse"===i&&this._radius._set(n/2,r/2),this._size._set(n,r),this._changed(9)}}else this._size=t.clone()},getRadius:function(){var t=this._radius;return"circle"===this._type?t:new _(t.width,t.height,this,"setRadius")},setRadius:function(t){var i=this._type;if("circle"===i){if(t===this._radius)return;var n=2*t;this._radius=t,this._size._set(n,n)}else if(t=b.read(arguments),this._radius){if(this._radius.equals(t))return;if(this._radius.set(t),"rectangle"===i){n=b.max(this._size,t.multiply(2));this._size.set(n)}else"ellipse"===i&&this._size._set(2*t.width,2*t.height)}else this._radius=t.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(t){var i=new(j[f.capitalize(this._type)])({center:new w,size:this._size,radius:this._radius,insert:!1});return i.copyAttributes(this),lt.settings.applyMatrix&&i.setApplyMatrix(!0),(t===a||t)&&i.insertAbove(this),i},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(t,i,n,r){var e=this._style,s=e.hasFill(),h=e.hasStroke(),a=i.dontFinish||i.clip,u=!r;if(s||h||a){var o=this._type,f=this._radius,c="circle"===o;if(i.dontStart||t.beginPath(),u&&c)t.arc(0,0,f,0,2*Math.PI,!0);else{var l=c?f:f.width,v=c?f:f.height,d=this._size,p=d.width,g=d.height;if(u&&"rectangle"===o&&0===l&&0===v)t.rect(-p/2,-g/2,p,g);else{var m=p/2,w=g/2,y=.44771525016920644,b=l*y,_=v*y,x=[-m,-w+v,-m,-w+_,-m+b,-w,-m+l,-w,m-l,-w,m-b,-w,m,-w+_,m,-w+v,m,w-v,m,w-_,m-b,w,m-l,w,-m+l,w,-m+b,w,-m,w-_,-m,w-v];r&&r.transform(x,x,32),t.moveTo(x[0],x[1]),t.bezierCurveTo(x[2],x[3],x[4],x[5],x[6],x[7]),m!==l&&t.lineTo(x[8],x[9]),t.bezierCurveTo(x[10],x[11],x[12],x[13],x[14],x[15]),w!==v&&t.lineTo(x[16],x[17]),t.bezierCurveTo(x[18],x[19],x[20],x[21],x[22],x[23]),m!==l&&t.lineTo(x[24],x[25]),t.bezierCurveTo(x[26],x[27],x[28],x[29],x[30],x[31])}}t.closePath()}a||!s&&!h||(this._setStyles(t,i,n),s&&(t.fill(e.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),h&&t.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(t,i){var n=new x(this._size).setCenter(0,0),r=this._style,e=i.stroke&&r.hasStroke()&&r.getStrokeWidth();return t&&(n=t._transformBounds(n)),e?n.expand(j._getStrokePadding(e,this._getStrokeMatrix(t,i))):n}},new function(){function t(t,i,n){var r=t._radius;if(!r.isZero())for(var e=t._size.divide(2),s=1;s<=4;s++){var h=new w(s>1&&s<4?-1:1,s>2?-1:1),a=h.multiply(e),u=a.subtract(h.multiply(r));if(new x(n?a.add(h.multiply(n)):a,u).contains(i))return{point:u,quadrant:s}}}function i(t,i,n,r){var e=t.divide(i);return(!r||e.isInQuadrant(r))&&e.subtract(e.normalize()).multiply(i).divide(n).length<=1}return{_contains:function i(n){if("rectangle"===this._type){var r=t(this,n);return r?n.subtract(r.point).divide(this._radius).getLength()<=1:i.base.call(this,n)}return n.divide(this.size).getLength()<=.5},_hitTestSelf:function n(r,e,s,h){var a=!1,u=this._style,o=e.stroke&&u.hasStroke(),f=e.fill&&u.hasFill();if(o||f){var c=this._type,l=this._radius,v=o?u.getStrokeWidth()/2:0,d=e._tolerancePadding.add(j._getStrokePadding(v,!u.getStrokeScaling()&&h));if("rectangle"===c){var p=d.multiply(2),g=t(this,r,p);if(g)a=i(r.subtract(g.point),l,d,g.quadrant);else{var m=new x(this._size).setCenter(0,0),w=m.expand(p),y=m.expand(p.negate());a=w._containsPoint(r)&&!y._containsPoint(r)}}else a=i(r,l,d)}return a?new z(o?"stroke":"fill",this):n.base.apply(this,arguments)}}},{statics:new function(){function t(t,i,n,r,e){var s=f.create(A.prototype);return s._type=t,s._size=n,s._radius=r,s._initialize(f.getNamed(e),i),s}return{Circle:function(){var i=arguments,n=w.readNamed(i,"center"),r=f.readNamed(i,"radius");return t("circle",n,new b(2*r),r,i)},Rectangle:function(){var i=arguments,n=x.readNamed(i,"rectangle"),r=b.min(b.readNamed(i,"radius"),n.getSize(!0).divide(2));return t("rectangle",n.getCenter(!0),n.getSize(!0),r,i)},Ellipse:function(){var i=arguments,n=A._readEllipse(i),r=n.radius;return t("ellipse",n.center,r.multiply(2),r,i)},_readEllipse:function(t){var i,n;if(f.hasNamed(t,"radius"))i=w.readNamed(t,"center"),n=b.readNamed(t,"radius");else{var r=x.readNamed(t,"rectangle");i=r.getCenter(!0),n=r.getSize(!0).divide(2)}return{center:i,radius:n}}}}}),T=E.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(t,i){if(!this._initialize(t,i!==a&&w.read(arguments))){var n,r=typeof t,e="string"===r?o.getElementById(t):"object"===r?t:null;if(e&&e!==E.NO_INSERT)if(e.getContext||null!=e.naturalHeight)n=e;else if(e){var s=b.read(arguments);s.isZero()||(n=ut.getCanvas(s))}n?this.setImage(n):this.setSource(t)}this._size||(this._size=new b,this._loaded=!1)},_equals:function(t){return this.getSource()===t.getSource()},copyContent:function(t){var i=t._image,n=t._canvas;if(i)this._setImage(i);else if(n){var r=ut.getCanvas(t._size);r.getContext("2d").drawImage(n,0,0),this._setImage(r)}this._crossOrigin=t._crossOrigin},getSize:function(){var t=this._size;return new _(t?t.width:0,t?t.height:0,this,"setSize")},setSize:function(t,i){var n=b.read(arguments);if(n.equals(this._size))i&&this.clear();else if(n.width>0&&n.height>0){var r=!i&&this.getElement();this._setImage(ut.getCanvas(n)),r&&this.getContext(!0).drawImage(r,0,0,n.width,n.height)}else this._canvas&&ut.release(this._canvas),this._size=n.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(t){this.setSize(t,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(t){this.setSize(this.getWidth(),t)},getLoaded:function(){return this._loaded},isEmpty:function(){var t=this._size;return!t||0===t.width&&0===t.height},getResolution:function(){var t=this._matrix,i=new w(0,0).transform(t),n=new w(1,0).transform(t).subtract(i),r=new w(0,1).transform(t).subtract(i);return new b(72/n.getLength(),72/r.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(t){var i=this;function n(t){var n=i.getView(),r=t&&t.type||"load";n&&i.responds(r)&&(lt=n._scope,i.emit(r,new tt(t)))}this._setImage(t),this._loaded?setTimeout(n,0):t&&Z.add(t,{load:function(r){i._setImage(t),n(r)},error:n})},_setImage:function(t){this._canvas&&ut.release(this._canvas),t&&t.getContext?(this._image=null,this._canvas=t,this._loaded=!0):(this._image=t,this._canvas=null,this._loaded=!!(t&&t.src&&t.complete)),this._size=new b(t?t.naturalWidth||t.width:0,t?t.naturalHeight||t.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var t=ut.getContext(this._size);try{this._image&&t.drawImage(this._image,0,0),this._canvas=t.canvas}catch(i){ut.release(t)}}return this._canvas},setCanvas:"#setImage",getContext:function(t){return this._context||(this._context=this.getCanvas().getContext("2d")),t&&(this._image=null,this._changed(1025)),this._context},setContext:function(t){this._context=t},getSource:function(){var t=this._image;return t&&t.src||this.toDataURL()},setSource:function(t){var i=new h.Image,n=this._crossOrigin;n&&(i.crossOrigin=n),t&&(i.src=t),this.setImage(i)},getCrossOrigin:function(){var t=this._image;return t&&t.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(t){this._crossOrigin=t;var i=this._image;i&&(i.crossOrigin=t)},getSmoothing:function(){return this._smoothing},setSmoothing:function(t){this._smoothing="string"==typeof t?t:t?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var t=x.read(arguments),i=ut.getContext(t.getSize());return i.drawImage(this.getCanvas(),t.x,t.y,t.width,t.height,0,0,t.width,t.height),i.canvas},getSubRaster:function(){var t=x.read(arguments),i=new T(E.NO_INSERT);return i._setImage(this.getSubCanvas(t)),i.translate(t.getCenter().subtract(this.getSize().divide(2))),i._matrix.prepend(this._matrix),i.insertAbove(this),i},toDataURL:function(){var t=this._image,i=t&&t.src;if(/^data:/.test(i))return i;var n=this.getCanvas();return n?n.toDataURL.apply(n,arguments):null},drawImage:function(t){var i=w.read(arguments,1);this.getContext(!0).drawImage(t,i.x,i.y)},getAverageColor:function(t){var i,n;if(t?t instanceof R?(n=t,i=t.getBounds()):"object"==typeof t&&("width"in t?i=new x(t):"x"in t&&(i=new x(t.x-.5,t.y-.5,1,1))):i=this.getBounds(),!i)return null;var r=Math.min(i.width,32),e=Math.min(i.height,32),s=T._sampleContext;s?s.clearRect(0,0,33,33):s=T._sampleContext=ut.getContext(new b(32)),s.save();var h=(new k).scale(r/i.width,e/i.height).translate(-i.x,-i.y);h.applyToContext(s),n&&n.draw(s,new f({clip:!0,matrices:[h]})),this._matrix.applyToContext(s);var a=this.getElement(),u=this._size;a&&s.drawImage(a,-u.width/2,-u.height/2),s.restore();for(var o=s.getImageData(.5,.5,Math.ceil(r),Math.ceil(e)).data,c=[0,0,0],l=0,v=0,d=o.length;v<d;v+=4){var p=o[v+3];l+=p,p/=255,c[0]+=o[v]*p,c[1]+=o[v+1]*p,c[2]+=o[v+2]*p}for(v=0;v<3;v++)c[v]/=l;return l?$.read(c):null},getPixel:function(){var t=w.read(arguments),i=this.getContext().getImageData(t.x,t.y,1,1).data;return new $("rgb",[i[0]/255,i[1]/255,i[2]/255],i[3]/255)},setPixel:function(){var t=arguments,i=w.read(t),n=$.read(t),r=n._convert("rgb"),e=n._alpha,s=this.getContext(!0),h=s.createImageData(1,1),a=h.data;a[0]=255*r[0],a[1]=255*r[1],a[2]=255*r[2],a[3]=null!=e?255*e:255,s.putImageData(h,i.x,i.y)},clear:function(){var t=this._size;this.getContext(!0).clearRect(0,0,t.width+1,t.height+1)},createImageData:function(){var t=b.read(arguments);return this.getContext().createImageData(t.width,t.height)},getImageData:function(){var t=x.read(arguments);return t.isEmpty()&&(t=new x(this._size)),this.getContext().getImageData(t.x,t.y,t.width,t.height)},putImageData:function(t){var i=w.read(arguments,1);this.getContext(!0).putImageData(t,i.x,i.y)},setImageData:function(t){this.setSize(t),this.getContext(!0).putImageData(t,0,0)},_getBounds:function(t,i){var n=new x(this._size).setCenter(0,0);return t?t._transformBounds(n):n},_hitTestSelf:function(t){if(this._contains(t)){var i=this;return new z("pixel",i,{offset:t.add(i._size.divide(2)).round(),color:{get:function(){return i.getPixel(this.offset)}}})}},_draw:function(t,i,n){var r=this.getElement();if(r&&r.width>0&&r.height>0){t.globalAlpha=g.clamp(this._opacity,0,1),this._setStyles(t,i,n);var e=this._smoothing,s="off"===e;J.setPrefixed(t,s?"imageSmoothingEnabled":"imageSmoothingQuality",!s&&e),t.drawImage(r,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),O=E.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(t,i){this._initialize(t,i!==a&&w.read(arguments,1))||this.setDefinition(t instanceof L?t:new L(t))},_equals:function(t){return this._definition===t._definition},copyContent:function(t){this.setDefinition(t._definition)},getDefinition:function(){return this._definition},setDefinition:function(t){this._definition=t,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(t,i){var n=this._definition._item;return n._getCachedBounds(n._matrix.prepended(t),i)},_hitTestSelf:function(t,i,n){var r=i.extend({all:!1}),e=this._definition._item._hitTest(t,r,n);return e&&(e.item=this),e},_draw:function(t,i){this._definition._item.draw(t,i)}}),L=f.extend({_class:"SymbolDefinition",initialize:function(t,i){this._id=m.get(),this.project=lt.project,t&&this.setItem(t,i)},_serialize:function(t,i){return i.add(this,(function(){return f.serialize([this._class,this._item],t,!1,i)}))},_changed:function(t){8&t&&E._clearBoundsCache(this),1&t&&this.project._changed(t)},getItem:function(){return this._item},setItem:function(t,i){t._symbol&&(t=t.clone()),this._item&&(this._item._symbol=null),this._item=t,t.remove(),t.setSelected(!1),i||t.setPosition(new w),t._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(t){return new O(this,t)},clone:function(){return new L(this._item.clone(!1))},equals:function(t){return t===this||t&&this._item.equals(t._item)||!1}}),z=f.extend({_class:"HitResult",initialize:function(t,i,n){this.type=t,this.item=i,n&&this.inject(n)},statics:{getOptions:function(t){var i=t&&f.read(t);return new f({type:null,tolerance:lt.settings.hitTolerance,fill:!i,stroke:!i,segments:!i,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},i)}}}),D=f.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(t,i,n,r,e,s){var h,u,o,f,c=arguments.length;c>0&&(null==t||"object"==typeof t?1===c&&t&&"point"in t?(h=t.point,u=t.handleIn,o=t.handleOut,f=t.selection):(h=t,u=i,o=n,f=r):(h=[t,i],u=n!==a?[n,r]:null,o=e!==a?[e,s]:null)),new B(h,this,"_point"),new B(u,this,"_handleIn"),new B(o,this,"_handleOut"),f&&this.setSelection(f)},_serialize:function(t,i){var n=this._point,r=this._selection,e=r||this.hasHandles()?[n,this._handleIn,this._handleOut]:n;return r&&e.push(r),f.serialize(e,t,!0,i)},_changed:function(t){var i=this._path;if(i){var n,r=i._curves,e=this._index;r&&(t&&t!==this._point&&t!==this._handleIn||!(n=e>0?r[e-1]:i._closed?r[r.length-1]:null)||n._changed(),t&&t!==this._point&&t!==this._handleOut||!(n=r[e])||n._changed()),i._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(w.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(w.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(w.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var t=this._handleIn,i=this._handleOut;return!t.isZero()&&!i.isZero()&&t.isCollinear(i)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(t){var i=this._selection,n=this._path;this._selection=t=t||0,n&&t!==i&&(n._updateSelection(this,i,t),n._changed(257))},_changeSelection:function(t,i){var n=this._selection;this.setSelection(i?n|t:n&~t)},isSelected:function(){return!!(7&this._selection)},setSelected:function(t){this._changeSelection(7,t)},getIndex:function(){return this._index!==a?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var t=this._path,i=this._index;return t?(i>0&&!t._closed&&i===t._segments.length-1&&i--,t.getCurves()[i]||null):null},getLocation:function(){var t=this.getCurve();return t?new F(t,this===t._segment1?0:1):null},getNext:function(){var t=this._path&&this._path._segments;return t&&(t[this._index+1]||this._path._closed&&t[0])||null},smooth:function(t,i,n){var r=t||{},e=r.type,s=r.factor,h=this.getPrevious(),u=this.getNext(),o=(h||this)._point,f=this._point,c=(u||this)._point,l=o.getDistance(f),v=f.getDistance(c);if(e&&"catmull-rom"!==e){if("geometric"!==e)throw new Error("Smoothing method '"+e+"' not supported.");if(h&&u){var d=o.subtract(c),p=s===a?.4:s,g=p*l/(l+v);i||this.setHandleIn(d.multiply(g)),n||this.setHandleOut(d.multiply(g-p))}}else{var m=s===a?.5:s,y=Math.pow(l,m),b=y*y,_=Math.pow(v,m),x=_*_;if(!i&&h){var S=2*x+3*_*y+b,k=3*_*(_+y);this.setHandleIn(0!==k?new w((x*o._x+S*f._x-b*c._x)/k-f._x,(x*o._y+S*f._y-b*c._y)/k-f._y):new w)}if(!n&&u){S=2*b+3*y*_+x,k=3*y*(y+_);this.setHandleOut(0!==k?new w((b*c._x+S*f._x-x*o._x)/k-f._x,(b*c._y+S*f._y-x*o._y)/k-f._y):new w)}}},getPrevious:function(){var t=this._path&&this._path._segments;return t&&(t[this._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var t=this._path;return t&&this._index===t._segments.length-1||!1},reverse:function(){var t=this._handleIn,i=this._handleOut,n=t.clone();t.set(i),i.set(n)},reversed:function(){return new D(this._point,this._handleOut,this._handleIn)},remove:function(){return!!this._path&&!!this._path.removeSegment(this._index)},clone:function(){return new D(this._point,this._handleIn,this._handleOut)},equals:function(t){return t===this||t&&this._class===t._class&&this._point.equals(t._point)&&this._handleIn.equals(t._handleIn)&&this._handleOut.equals(t._handleOut)||!1},toString:function(){var t=["point: "+this._point];return this._handleIn.isZero()||t.push("handleIn: "+this._handleIn),this._handleOut.isZero()||t.push("handleOut: "+this._handleOut),"{ "+t.join(", ")+" }"},transform:function(t){this._transformCoordinates(t,new Array(6),!0),this._changed()},interpolate:function(t,i,n){var r=1-n,e=n,s=t._point,h=i._point,a=t._handleIn,u=i._handleIn,o=i._handleOut,f=t._handleOut;this._point._set(r*s._x+e*h._x,r*s._y+e*h._y,!0),this._handleIn._set(r*a._x+e*u._x,r*a._y+e*u._y,!0),this._handleOut._set(r*f._x+e*o._x,r*f._y+e*o._y,!0),this._changed()},_transformCoordinates:function(t,i,n){var r=this._point,e=n&&this._handleIn.isZero()?null:this._handleIn,s=n&&this._handleOut.isZero()?null:this._handleOut,h=r._x,a=r._y,u=2;return i[0]=h,i[1]=a,e&&(i[u++]=e._x+h,i[u++]=e._y+a),s&&(i[u++]=s._x+h,i[u++]=s._y+a),t&&(t._transformCoordinates(i,i,u/2),h=i[0],a=i[1],n?(r._x=h,r._y=a,u=2,e&&(e._x=i[u++]-h,e._y=i[u++]-a),s&&(s._x=i[u++]-h,s._y=i[u++]-a)):(e||(i[u++]=h,i[u++]=a),s||(i[u++]=h,i[u++]=a))),i}}),B=w.extend({initialize:function(t,i,n){var r,e,s;if(t)if((r=t[0])!==a)e=t[1];else{var h=t;(r=h.x)===a&&(r=(h=w.read(arguments)).x),e=h.y,s=h.selected}else r=e=0;this._x=r,this._y=e,this._owner=i,i[n]=this,s&&this.setSelected(!0)},_set:function(t,i){return this._x=t,this._y=i,this._owner._changed(this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner._changed(this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner._changed(this)},isZero:function(){var t=g.isZero;return t(this._x)&&t(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){var t=this._owner;return this===t._point?1:this===t._handleIn?2:this===t._handleOut?4:0}}),N=f.extend({_class:"Curve",beans:!0,initialize:function(t,i,n,r,e,s,h,a){var u,o,f,c,l,v,d=arguments.length;3===d?(this._path=t,u=i,o=n):d?1===d?"segment1"in t?(u=new D(t.segment1),o=new D(t.segment2)):"point1"in t?(f=t.point1,l=t.handle1,v=t.handle2,c=t.point2):Array.isArray(t)&&(f=[t[0],t[1]],c=[t[6],t[7]],l=[t[2]-t[0],t[3]-t[1]],v=[t[4]-t[6],t[5]-t[7]]):2===d?(u=new D(t),o=new D(i)):4===d?(f=t,l=i,v=n,c=r):8===d&&(f=[t,i],c=[h,a],l=[n-t,r-i],v=[e-h,s-a]):(u=new D,o=new D),this._segment1=u||new D(f,null,l),this._segment2=o||new D(c,v,null)},_serialize:function(t,i){return f.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],t,!0,i)},_changed:function(){this._length=this._bounds=a},clone:function(){return new N(this._segment1,this._segment2)},toString:function(){var t=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||t.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||t.push("handle2: "+this._segment2._handleIn),t.push("point2: "+this._segment2._point),"{ "+t.join(", ")+" }"},classify:function(){return N.classify(this.getValues())},remove:function(){var t=!1;if(this._path){var i=this._segment2,n=i._handleOut;(t=i.remove())&&this._segment1._handleOut.set(n)}return t},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(w.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(w.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(w.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(w.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var t=this._path;return t&&this._segment1._index===t._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(t){this.getPoint1().setSelected(t),this.getHandle1().setSelected(t),this.getHandle2().setSelected(t),this.getPoint2().setSelected(t)},getValues:function(t){return N.getValues(this._segment1,this._segment2,t)},getPoints:function(){for(var t=this.getValues(),i=[],n=0;n<8;n+=2)i.push(new w(t[n],t[n+1]));return i}},{getLength:function(){return null==this._length&&(this._length=N.getLength(this.getValues(),0,1)),this._length},getArea:function(){return N.getArea(this.getValues())},getLine:function(){return new C(this._segment1._point,this._segment2._point)},getPart:function(t,i){return new N(N.getPart(this.getValues(),t,i))},getPartLength:function(t,i){return N.getLength(this.getValues(),t,i)},divideAt:function(t){return this.divideAtTime(t&&t.curve===this?t.time:this.getTimeAt(t))},divideAtTime:function(t,i){var n=null;if(t>=1e-8&&t<=.99999999){var r=N.subdivide(this.getValues(),t),e=r[0],s=r[1],h=i||this.hasHandles(),a=this._segment1,u=this._segment2,o=this._path;h&&(a._handleOut._set(e[2]-e[0],e[3]-e[1]),u._handleIn._set(s[4]-s[6],s[5]-s[7]));var f=e[6],c=e[7],l=new D(new w(f,c),h&&new w(e[4]-f,e[5]-c),h&&new w(s[2]-f,s[3]-c));o?(o.insert(a._index+1,l),n=this.getNext()):(this._segment2=l,this._changed(),n=new N(l,u))}return n},splitAt:function(t){var i=this._path;return i?i.splitAt(t):null},splitAtTime:function(t){return this.splitAt(this.getLocationAtTime(t))},divide:function(t,i){return this.divideAtTime(t===a?.5:i?t:this.getTimeAt(t))},split:function(t,i){return this.splitAtTime(t===a?.5:i?t:this.getTimeAt(t))},reversed:function(){return new N(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(t,i,n,r){var e=t._point,s=t._handleOut,h=i._handleIn,a=i._point,u=e.x,o=e.y,f=a.x,c=a.y,l=r?[u,o,u,o,f,c,f,c]:[u,o,u+s._x,o+s._y,f+h._x,c+h._y,f,c];return n&&n._transformCoordinates(l,l,4),l},subdivide:function(t,i){var n=t[0],r=t[1],e=t[2],s=t[3],h=t[4],u=t[5],o=t[6],f=t[7];i===a&&(i=.5);var c=1-i,l=c*n+i*e,v=c*r+i*s,d=c*e+i*h,p=c*s+i*u,g=c*h+i*o,m=c*u+i*f,w=c*l+i*d,y=c*v+i*p,b=c*d+i*g,_=c*p+i*m,x=c*w+i*b,S=c*y+i*_;return[[n,r,l,v,w,y,x,S],[x,S,b,_,g,m,o,f]]},getMonoCurves:function(t,i){var n=[],r=i?0:1,e=t[r+0],s=t[r+2],h=t[r+4],a=t[r+6];if(e>=s==s>=h&&s>=h==h>=a||N.isStraight(t))n.push(t);else{var u=3*(s-h)-e+a,o=2*(e+h)-4*s,f=s-e,c=[],l=g.solveQuadratic(u,o,f,c,1e-8,.99999999);if(l){c.sort();var v=c[0],d=N.subdivide(t,v);n.push(d[0]),l>1&&(v=(c[1]-v)/(1-v),d=N.subdivide(d[1],v),n.push(d[0])),n.push(d[1])}else n.push(t)}return n},solveCubic:function(t,i,n,r,e,s){var h=t[i],a=t[i+2],u=t[i+4],o=t[i+6],f=0;if(!(h<n&&o<n&&a<n&&u<n||h>n&&o>n&&a>n&&u>n)){var c=3*(a-h),l=3*(u-a)-c,v=o-h-c-l;f=g.solveCubic(v,l,c,h-n,r,e,s)}return f},getTimeOf:function(t,i){var n=new w(t[0],t[1]),r=new w(t[6],t[7]),e=1e-7;if(null===(i.isClose(n,1e-12)?0:i.isClose(r,1e-12)?1:null))for(var s=[i.x,i.y],h=[],a=0;a<2;a++)for(var u=N.solveCubic(t,a,s[a],h,0,1),o=0;o<u;o++){var f=h[o];if(i.isClose(N.getPoint(t,f),e))return f}return i.isClose(n,e)?0:i.isClose(r,e)?1:null},getNearestTime:function(t,i){if(N.isStraight(t)){var n=t[0],r=t[1],e=t[6]-n,s=t[7]-r,h=e*e+s*s;if(0===h)return 0;var a=((i.x-n)*e+(i.y-r)*s)/h;return a<1e-12?0:a>.999999999999?1:N.getTimeOf(t,new w(n+a*e,r+a*s))}var u=1/0,o=0;function f(n){if(n>=0&&n<=1){var r=i.getDistance(N.getPoint(t,n),!0);if(r<u)return u=r,o=n,!0}}for(var c=0;c<=100;c++)f(c/100);for(var l=.005;l>1e-8;)f(o-l)||f(o+l)||(l/=2);return o},getPart:function(t,i,n){var r=i>n;if(r){var e=i;i=n,n=e}return i>0&&(t=N.subdivide(t,i)[1]),n<1&&(t=N.subdivide(t,(n-i)/(1-i))[0]),r?[t[6],t[7],t[4],t[5],t[2],t[3],t[0],t[1]]:t},isFlatEnough:function(t,i){var n=t[0],r=t[1],e=t[2],s=t[3],h=t[4],a=t[5],u=t[6],o=t[7],f=3*e-2*n-u,c=3*s-2*r-o,l=3*h-2*u-n,v=3*a-2*o-r;return Math.max(f*f,l*l)+Math.max(c*c,v*v)<=16*i*i},getArea:function(t){var i=t[0],n=t[1],r=t[2],e=t[3],s=t[4],h=t[5],a=t[6],u=t[7];return 3*((u-n)*(r+s)-(a-i)*(e+h)+e*(i-s)-r*(n-h)+u*(s+i/3)-a*(h+n/3))/20},getBounds:function(t){for(var i=t.slice(0,2),n=i.slice(),r=[0,0],e=0;e<2;e++)N._addBounds(t[e],t[e+2],t[e+4],t[e+6],e,0,i,n,r);return new x(i[0],i[1],n[0]-i[0],n[1]-i[1])},_addBounds:function(t,i,n,r,e,s,h,a,u){function o(t,i){var n=t-i,r=t+i;n<h[e]&&(h[e]=n),r>a[e]&&(a[e]=r)}s/=2;var f=h[e]+s,c=a[e]-s;if(t<f||i<f||n<f||r<f||t>c||i>c||n>c||r>c)if(i<t!=i<r&&n<t!=n<r)o(t,0),o(r,0);else{var l=3*(i-n)-t+r,v=2*(t+n)-4*i,d=i-t,p=g.solveQuadratic(l,v,d,u);o(r,0);for(var m=0;m<p;m++){var w=u[m],y=1-w;1e-8<=w&&w<=.99999999&&o(y*y*y*t+3*y*y*w*i+3*y*w*w*n+w*w*w*r,s)}}}}},f.each(["getBounds","getStrokeBounds","getHandleBounds"],(function(t){this[t]=function(){this._bounds||(this._bounds={});var i=this._bounds[t];return i||(i=this._bounds[t]=j[t]([this._segment1,this._segment2],!1,this._path)),i.clone()}}),{}),f.each({isStraight:function(t,i,n,r){if(i.isZero()&&n.isZero())return!0;var e=r.subtract(t);if(e.isZero())return!1;if(e.isCollinear(i)&&e.isCollinear(n)){var s=new C(t,r);if(s.getDistance(t.add(i))<1e-7&&s.getDistance(r.add(n))<1e-7){var h=e.dot(e),a=e.dot(i)/h,u=e.dot(n)/h;return a>=0&&a<=1&&u<=0&&u>=-1}}return!1},isLinear:function(t,i,n,r){var e=r.subtract(t).divide(3);return i.equals(e)&&n.negate().equals(e)}},(function(t,i){this[i]=function(i){var n=this._segment1,r=this._segment2;return t(n._point,n._handleOut,r._handleIn,r._point,i)},this.statics[i]=function(i,n){var r=i[0],e=i[1],s=i[6],h=i[7];return t(new w(r,e),new w(i[2]-r,i[3]-e),new w(i[4]-s,i[5]-h),new w(s,h),n)}}),{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(t){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(t||0)},isCollinear:function(t){return t&&this.isStraight()&&t.isStraight()&&this.getLine().isCollinear(t.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(t,i){return this.getLocationAtTime(i?t:this.getTimeAt(t))},getLocationAtTime:function(t){return null!=t&&t>=0&&t<=1?new F(this,t):null},getTimeAt:function(t,i){return N.getTimeAt(this.getValues(),t,i)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var t=w.read(arguments);return t.isZero()?[]:N.getTimesWithTangent(this.getValues(),t)},getOffsetAtTime:function(t){return this.getPartLength(0,t)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(w.read(arguments)))},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getTimeOf:function(){return N.getTimeOf(this.getValues(),w.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var t=w.read(arguments),i=this.getValues(),n=N.getNearestTime(i,t),r=N.getPoint(i,n);return new F(this,n,r,null,t.getDistance(r))},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t}},new function(){var t=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return f.each(t,(function(t){this[t+"At"]=function(i,n){var r=this.getValues();return N[t](r,n?i:N.getTimeAt(r,i))},this[t+"AtTime"]=function(i){return N[t](this.getValues(),i)}}),{statics:{_evaluateMethods:t}})},new function(){function t(t){var i=t[0],n=t[1],r=t[2],e=t[3],s=t[4],h=t[5],a=t[6],u=t[7],o=9*(r-s)+3*(a-i),f=6*(i+s)-12*r,c=3*(r-i),l=9*(e-h)+3*(u-n),v=6*(n+h)-12*e,d=3*(e-n);return function(t){var i=(o*t+f)*t+c,n=(l*t+v)*t+d;return Math.sqrt(i*i+n*n)}}function i(t,i){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(i-t))))}function n(t,i,n,r){if(null==i||i<0||i>1)return null;var e=t[0],s=t[1],h=t[2],a=t[3],u=t[4],o=t[5],f=t[6],c=t[7],l=g.isZero;l(h-e)&&l(a-s)&&(h=e,a=s),l(u-f)&&l(o-c)&&(u=f,o=c);var v,d,p=3*(h-e),m=3*(u-h)-p,y=f-e-p-m,b=3*(a-s),_=3*(o-a)-b,x=c-s-b-_;if(0===n)v=0===i?e:1===i?f:((y*i+m)*i+p)*i+e,d=0===i?s:1===i?c:((x*i+_)*i+b)*i+s;else{var S=1e-8,k=1-S;if(i<S?(v=p,d=b):i>k?(v=3*(f-u),d=3*(c-o)):(v=(3*y*i+2*m)*i+p,d=(3*x*i+2*_)*i+b),r){0===v&&0===d&&(i<S||i>k)&&(v=u-h,d=o-a);var C=Math.sqrt(v*v+d*d);C&&(v/=C,d/=C)}if(3===n){u=6*y*i+2*m,o=6*x*i+2*_;var M=Math.pow(v*v+d*d,1.5);v=0!==M?(v*o-d*u)/M:0,d=0}}return 2===n?new w(d,-v):new w(v,d)}return{statics:{classify:function(t){var i=t[0],n=t[1],r=t[2],e=t[3],s=t[4],h=t[5],u=t[6],o=t[7],f=r*(n-o)+e*(u-i)+i*o-n*u,c=3*(s*(e-n)+h*(i-r)+r*n-e*i),l=c-f,v=l-f+(i*(o-h)+n*(s-u)+u*h-o*s),d=Math.sqrt(v*v+l*l+c*c),p=0!==d?1/d:0,m=g.isZero,w="serpentine";function y(t,i,n){var r=i!==a,e=r&&i>0&&i<1,s=r&&n>0&&n<1;return!r||(e||s)&&("loop"!==t||e&&s)||(t="arch",e=s=!1),{type:t,roots:e||s?e&&s?i<n?[i,n]:[n,i]:[e?i:n]:null}}if(l*=p,c*=p,m(v*=p))return m(l)?y(m(c)?"line":"quadratic"):y(w,c/(3*l));var b=3*l*l-4*v*c;if(m(b))return y("cusp",l/(2*v));var _=b>0?Math.sqrt(b/3):Math.sqrt(-b),x=2*v;return y(b>0?w:"loop",(l+_)/x,(l-_)/x)},getLength:function(n,r,e,s){if(r===a&&(r=0),e===a&&(e=1),N.isStraight(n)){var h=n;e<1&&(h=N.subdivide(h,e)[0],r/=e),r>0&&(h=N.subdivide(h,r)[1]);var u=h[6]-h[0],o=h[7]-h[1];return Math.sqrt(u*u+o*o)}return g.integrate(s||t(n),r,e,i(r,e))},getTimeAt:function(n,r,e){if(e===a&&(e=r<0?1:0),0===r)return e;var s=Math.abs,h=r>0,u=h?e:0,o=h?1:e,f=t(n),c=N.getLength(n,u,o,f),l=s(r)-c;if(s(l)<1e-12)return h?o:u;if(l>1e-12)return null;var v=r/c,d=0;return g.findRoot((function(t){return d+=g.integrate(f,e,t,i(e,t)),e=t,d-r}),f,e+v,u,o,32,1e-12)},getPoint:function(t,i){return n(t,i,0,!1)},getTangent:function(t,i){return n(t,i,1,!0)},getWeightedTangent:function(t,i){return n(t,i,1,!1)},getNormal:function(t,i){return n(t,i,2,!0)},getWeightedNormal:function(t,i){return n(t,i,2,!1)},getCurvature:function(t,i){return n(t,i,3,!1).x},getPeaks:function(t){var i=t[0],n=t[1],r=t[2],e=t[3],s=t[4],h=t[5],a=3*r-i-3*s+t[6],u=3*i-6*r+3*s,o=-3*i+3*r,f=3*e-n-3*h+t[7],c=3*n-6*e+3*h,l=-3*n+3*e,v=[];return g.solveCubic(9*(a*a+f*f),9*(a*u+c*f),2*(u*u+c*c)+3*(o*a+l*f),o*u+c*l,v,1e-8,.99999999),v.sort()}}}},new function(){function t(t,i,n,r,e,s,h){var a=!h&&n.getPrevious()===e,u=!h&&n!==e&&n.getNext()===e,o=1e-8,f=1-o;if(null!==r&&r>=(a?o:0)&&r<=(u?f:1)&&null!==s&&s>=(u?o:0)&&s<=(a?f:1)){var c=new F(n,r,null,h),l=new F(e,s,null,h);c._intersection=l,l._intersection=c,i&&!i(c)||F.insert(t,c,!0)}}function i(r,e,s,h,a,u,o,f,c,l,v,d,p){if(++c>=4096||++f>=40)return c;var g,m,w=e[0],y=e[1],b=e[6],_=e[7],x=C.getSignedDistance,S=x(w,y,b,_,e[2],e[3]),k=x(w,y,b,_,e[4],e[5]),M=S*k>0?3/4:4/9,E=M*Math.min(0,S,k),I=M*Math.max(0,S,k),P=x(w,y,b,_,r[0],r[1]),A=x(w,y,b,_,r[2],r[3]),T=x(w,y,b,_,r[4],r[5]),O=x(w,y,b,_,r[6],r[7]),L=function(t,i,n,r){var e,s=[0,t],h=[1/3,i],a=[2/3,n],u=[1,r],o=i-(2*t+r)/3,f=n-(t+2*r)/3;if(o*f<0)e=[[s,h,u],[s,a,u]];else{var c=o/f;e=[c>=2?[s,h,u]:c<=.5?[s,a,u]:[s,h,a,u],[s,u]]}return(o||f)<0?e.reverse():e}(P,A,T,O),z=L[0],D=L[1];if(0===S&&0===k&&0===P&&0===A&&0===T&&0===O||null==(g=n(z,D,E,I))||null==(m=n(z.reverse(),D.reverse(),E,I)))return c;var B=l+(v-l)*g,F=l+(v-l)*m;if(Math.max(p-d,F-B)<1e-9){var R=(B+F)/2,j=(d+p)/2;t(a,u,o?h:s,o?j:R,o?s:h,o?R:j)}else{r=N.getPart(r,g,m);var U=p-d;if(m-g>.8)if(F-B>U){R=(B+F)/2;c=i(e,(q=N.subdivide(r,.5))[0],h,s,a,u,!o,f,c,d,p,B,R),c=i(e,q[1],h,s,a,u,!o,f,c,d,p,R,F)}else{var q;j=(d+p)/2;c=i((q=N.subdivide(e,.5))[0],r,h,s,a,u,!o,f,c,d,j,B,F),c=i(q[1],r,h,s,a,u,!o,f,c,j,p,B,F)}else c=0===U||U>=1e-9?i(e,r,h,s,a,u,!o,f,c,d,p,B,F):i(r,e,s,h,a,u,o,f,c,B,F,d,p)}return c}function n(t,i,n,e){return t[0][1]<n?r(t,!0,n):i[0][1]>e?r(i,!1,e):t[0][0]}function r(t,i,n){for(var r=t[0][0],e=t[0][1],s=1,h=t.length;s<h;s++){var a=t[s][0],u=t[s][1];if(i?u>=n:u<=n)return u===n?a:r+(n-e)*(a-r)/(u-e);r=a,e=u}return null}function e(t,i,n,r,e){var s=g.isZero;if(s(r)&&s(e)){var h=N.getTimeOf(t,new w(i,n));return null===h?[]:[h]}for(var a=Math.atan2(-e,r),u=Math.sin(a),o=Math.cos(a),f=[],c=[],l=0;l<8;l+=2){var v=t[l]-i,d=t[l+1]-n;f.push(v*o-d*u,v*u+d*o)}return N.solveCubic(f,1,0,c,0,1),c}function s(i,n,r,s,h,a,u){for(var o=n[0],f=n[1],c=e(i,o,f,n[6]-o,n[7]-f),l=0,v=c.length;l<v;l++){var d=c[l],p=N.getPoint(i,d),g=N.getTimeOf(n,p);null!==g&&t(h,a,u?s:r,u?g:d,u?r:s,u?d:g)}}function h(i,n,r,e,s,h){var a=C.intersect(i[0],i[1],i[6],i[7],n[0],n[1],n[6],n[7]);a&&t(s,h,r,N.getTimeOf(i,a),e,N.getTimeOf(n,a))}function a(n,r,e,a,u,f){var c=1e-12,l=Math.min,v=Math.max;if(v(n[0],n[2],n[4],n[6])+c>l(r[0],r[2],r[4],r[6])&&l(n[0],n[2],n[4],n[6])-c<v(r[0],r[2],r[4],r[6])&&v(n[1],n[3],n[5],n[7])+c>l(r[1],r[3],r[5],r[7])&&l(n[1],n[3],n[5],n[7])-c<v(r[1],r[3],r[5],r[7])){var d=o(n,r);if(d)for(var p=0;p<2;p++){var g=d[p];t(u,f,e,g[0],a,g[1],!0)}else{var m=N.isStraight(n),y=N.isStraight(r),b=m&&y,_=m&&!y,x=u.length;if((b?h:m||y?s:i)(_?r:n,_?n:r,_?a:e,_?e:a,u,f,_,0,0,0,1,0,1),!b||u.length===x)for(p=0;p<4;p++){var S=p>>1,k=1&p,C=6*S,M=6*k,E=new w(n[C],n[C+1]),I=new w(r[M],r[M+1]);E.isClose(I,c)&&t(u,f,e,S,a,k)}}}return u}function u(i,n,r,e){var s=N.classify(i);if("loop"===s.type){var h=s.roots;t(r,e,n,h[0],n,h[1])}return r}function o(t,i){function n(t){var i=t[6]-t[0],n=t[7]-t[1];return i*i+n*n}var r=Math.abs,e=C.getDistance,s=1e-7,h=N.isStraight(t),a=N.isStraight(i),u=h&&a,o=n(t)<n(i),f=o?i:t,c=o?t:i,l=f[0],v=f[1],d=f[6]-l,p=f[7]-v;if(e(l,v,d,p,c[0],c[1],!0)<s&&e(l,v,d,p,c[6],c[7],!0)<s)!u&&e(l,v,d,p,f[2],f[3],!0)<s&&e(l,v,d,p,f[4],f[5],!0)<s&&e(l,v,d,p,c[2],c[3],!0)<s&&e(l,v,d,p,c[4],c[5],!0)<s&&(h=a=u=!0);else if(u)return null;if(h^a)return null;for(var g=[t,i],m=[],y=0;y<4&&m.length<2;y++){var b=1&y,_=1^b,x=y>>1,S=N.getTimeOf(g[b],new w(g[_][x?6:0],g[_][x?7:1]));if(null!=S){var k=b?[x,S]:[S,x];(!m.length||r(k[0]-m[0][0])>1e-8&&r(k[1]-m[0][1])>1e-8)&&m.push(k)}if(y>2&&!m.length)break}if(2!==m.length)m=null;else if(!u){var M=N.getPart(t,m[0][0],m[1][0]),E=N.getPart(i,m[0][1],m[1][1]);(r(E[2]-M[2])>s||r(E[3]-M[3])>s||r(E[4]-M[4])>s||r(E[5]-M[5])>s)&&(m=null)}return m}return{getIntersections:function(t){var i=this.getValues(),n=t&&t!==this&&t.getValues();return n?a(i,n,this,t,[]):u(i,this,[])},statics:{getOverlaps:o,getIntersections:function(t,i,n,r,e,s){var h=!i;h&&(i=t);for(var o=t.length,f=i.length,c=new Array(o),l=h?c:new Array(f),v=[],p=0;p<o;p++)c[p]=t[p].getValues(r);if(!h)for(p=0;p<f;p++)l[p]=i[p].getValues(e);for(var g=d.findCurveBoundsCollisions(c,l,1e-7),m=0;m<o;m++){var w=t[m],y=c[m];h&&u(y,w,v,n);var b=g[m];if(b)for(var _=0;_<b.length;_++){if(s&&v.length)return v;var x=b[_];if(!h||x>m){var S=i[x];a(y,l[x],w,S,v,n)}}}return v},getCurveLineIntersections:e,getTimesWithTangent:function(t,i){var n=t[0],r=t[1],e=t[2],s=t[3],h=t[4],a=t[5],u=t[6],o=t[7],f=i.normalize(),c=f.x,l=f.y,v=3*u-9*h+9*e-3*n,d=3*o-9*a+9*s-3*r,p=6*h-12*e+6*n,m=6*a-12*s+6*r,w=3*e-3*n,y=3*s-3*r,b=2*v*l-2*d*c,_=[];if(Math.abs(b)<g.CURVETIME_EPSILON){if(0!=(b=v*m-d*p)){var x=-(v*y-d*w)/b;x>=0&&x<=1&&_.push(x)}}else{var S=(p*p-4*v*w)*l*l+(-2*p*m+4*d*w+4*v*y)*c*l+(m*m-4*d*y)*c*c,k=p*l-m*c;if(S>=0&&0!=b){var C=Math.sqrt(S),M=-(k+C)/b,E=(-k+C)/b;M>=0&&M<=1&&_.push(M),E>=0&&E<=1&&_.push(E)}}return _}}}}),F=f.extend({_class:"CurveLocation",initialize:function(t,i,n,r,e){if(i>=.99999999){var s=t.getNext();s&&(i=0,t=s)}this._setCurve(t),this._time=i,this._point=n||t.getPointAtTime(i),this._overlap=r,this._distance=e,this._intersection=this._next=this._previous=null},_setPath:function(t){this._path=t,this._version=t?t._version:0},_setCurve:function(t){this._setPath(t._path),this._curve=t,this._segment=null,this._segment1=t._segment1,this._segment2=t._segment2},_setSegment:function(t){var i=t.getCurve();i?this._setCurve(i):(this._setPath(t._path),this._segment1=t,this._segment2=null),this._segment=t,this._time=t===this._segment1?0:1,this._point=t._point.clone()},getSegment:function(){var t=this._segment;if(!t){var i=this.getCurve(),n=this.getTime();0===n?t=i._segment1:1===n?t=i._segment2:null!=n&&(t=i.getPartLength(0,n)<i.getPartLength(n,1)?i._segment1:i._segment2),this._segment=t}return t},getCurve:function(){var t=this._path,i=this;function n(t){var n=t&&t.getCurve();if(n&&null!=(i._time=n.getTimeOf(i._point)))return i._setCurve(n),n}return t&&t._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null),this._curve||n(this._segment)||n(this._segment1)||n(this._segment2.getPrevious())},getPath:function(){var t=this.getCurve();return t&&t._path},getIndex:function(){var t=this.getCurve();return t&&t.getIndex()},getTime:function(){var t=this.getCurve(),i=this._time;return t&&null==i?this._time=t.getTimeOf(this._point):i},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var t=this._offset;if(null==t){t=0;var i=this.getPath(),n=this.getIndex();if(i&&null!=n)for(var r=i.getCurves(),e=0;e<n;e++)t+=r[e].getLength();this._offset=t+=this.getCurveOffset()}return t},getCurveOffset:function(){var t=this._curveOffset;if(null==t){var i=this.getCurve(),n=this.getTime();this._curveOffset=t=null!=n&&i&&i.getPartLength(0,n)}return t},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var t=this.getCurve(),i=t&&t.divideAtTime(this.getTime());return i&&this._setSegment(i._segment1),i},split:function(){var t=this.getCurve(),i=t._path,n=t&&t.splitAtTime(this.getTime());return n&&this._setSegment(i.getLastSegment()),n},equals:function(t,i){var n=this===t;if(!n&&t instanceof F){var r=this.getCurve(),e=t.getCurve(),s=r._path;if(s===e._path){var h=Math.abs,a=h(this.getOffset()-t.getOffset()),u=!i&&this._intersection,o=!i&&t._intersection;n=(a<1e-7||s&&h(s.getLength()-a)<1e-7)&&(!u&&!o||u&&o&&u.equals(o,!0))}}return n},toString:function(){var t=[],i=this.getPoint(),n=p.instance;i&&t.push("point: "+i);var r=this.getIndex();null!=r&&t.push("index: "+r);var e=this.getTime();return null!=e&&t.push("time: "+n.number(e)),null!=this._distance&&t.push("distance: "+n.number(this._distance)),"{ "+t.join(", ")+" }"},isTouching:function(){var t=this._intersection;if(t&&this.getTangent().isCollinear(t.getTangent())){var i=this.getCurve(),n=t.getCurve();return!(i.isStraight()&&n.isStraight()&&i.getLine().intersect(n.getLine()))}return!1},isCrossing:function(){var t=this._intersection;if(!t)return!1;var i=this.getTime(),n=t.getTime(),r=1e-8,e=1-r,s=i>=r&&i<=e,h=n>=r&&n<=e;if(s&&h)return!this.isTouching();var a=this.getCurve(),u=a&&i<r?a.getPrevious():a,o=t.getCurve(),f=o&&n<r?o.getPrevious():o;if(i>e&&(a=a.getNext()),n>e&&(o=o.getNext()),!(u&&a&&f&&o))return!1;var c=[];function l(t,i){var n=t.getValues(),r=N.classify(n).roots||N.getPeaks(n),e=r.length,s=N.getLength(n,i&&e?r[e-1]:0,!i&&e?r[0]:1);c.push(e?s:s/32)}function v(t,i,n){return i<n?t>i&&t<n:t>i||t<n}s||(l(u,!0),l(a,!1)),h||(l(f,!0),l(o,!1));var d=this.getPoint(),p=Math.min.apply(Math,c),g=s?a.getTangentAtTime(i):a.getPointAt(p).subtract(d),m=s?g.negate():u.getPointAt(-p).subtract(d),w=h?o.getTangentAtTime(n):o.getPointAt(p).subtract(d),y=h?w.negate():f.getPointAt(-p).subtract(d),b=m.getAngle(),_=g.getAngle(),x=y.getAngle(),S=w.getAngle();return!!(s?v(b,x,S)^v(_,x,S)&&v(b,S,x)^v(_,S,x):v(x,b,_)^v(S,b,_)&&v(x,_,b)^v(S,_,b))},hasOverlap:function(){return!!this._overlap}},f.each(N._evaluateMethods,(function(t){var i=t+"At";this[t]=function(){var t=this.getCurve(),n=this.getTime();return null!=n&&t&&t[i](n,!0)}}),{preserve:!0}),new function(){function t(t,i,n){var r=t.length,e=0,s=r-1;function h(n,e){for(var s=n+e;s>=-1&&s<=r;s+=e){var h=t[(s%r+r)%r];if(!i.getPoint().isClose(h.getPoint(),1e-7))break;if(i.equals(h))return h}return null}for(;e<=s;){var a,u=e+s>>>1,o=t[u];if(n&&(a=i.equals(o)?o:h(u,-1)||h(u,1)))return i._overlap&&(a._overlap=a._intersection._overlap=!0),a;var f=i.getPath(),c=o.getPath();(f!==c?f._id-c._id:i.getIndex()+i.getTime()-(o.getIndex()+o.getTime()))<0?s=u-1:e=u+1}return t.splice(e,0,i),i}return{statics:{insert:t,expand:function(i){for(var n=i.slice(),r=i.length-1;r>=0;r--)t(n,i[r]._intersection,!1);return n}}}}),R=E.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(t){var i,n,r;if(f.isPlainObject(t)?(n=t.segments,i=t.pathData):Array.isArray(t)?n=t:"string"==typeof t&&(i=t),n){var e=n[0];r=e&&Array.isArray(e[0])}else i&&(r=(i.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(i));return new(r?U:j)(t)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(t){this.isClockwise()!=(t=!!t)&&this.reverse()},setPathData:function(t){var i,n,r,e=t&&t.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),s=!1,h=new w,a=new w;function u(t,n){var r=+i[t];return s&&(r+=h[n]),r}function o(t){return new w(u(t,"x"),u(t+1,"y"))}this.clear();for(var f=0,c=e&&e.length;f<c;f++){var l=e[f],v=l[0],d=v.toLowerCase(),p=(i=l.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g))&&i.length;switch(s=v===d,"z"!==n||/[mz]/.test(d)||this.moveTo(h),d){case"m":case"l":for(var g="m"===d,m=0;m<p;m+=2)this[g?"moveTo":"lineTo"](h=o(m)),g&&(a=h,g=!1);r=h;break;case"h":case"v":var y="h"===d?"x":"y";h=h.clone();for(m=0;m<p;m++)h[y]=u(m,y),this.lineTo(h);r=h;break;case"c":for(m=0;m<p;m+=6)this.cubicCurveTo(o(m),r=o(m+2),h=o(m+4));break;case"s":for(m=0;m<p;m+=4)this.cubicCurveTo(/[cs]/.test(n)?h.multiply(2).subtract(r):h,r=o(m),h=o(m+2)),n=d;break;case"q":for(m=0;m<p;m+=4)this.quadraticCurveTo(r=o(m),h=o(m+2));break;case"t":for(m=0;m<p;m+=2)this.quadraticCurveTo(r=/[qt]/.test(n)?h.multiply(2).subtract(r):h,h=o(m)),n=d;break;case"a":for(m=0;m<p;m+=7)this.arcTo(h=o(m+5),new b(+i[m],+i[m+1]),+i[m+2],+i[m+4],+i[m+3]);break;case"z":this.closePath(1e-12),h=a}n=d}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(t){var i=t.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(t):{};return i.onPath||!!("evenodd"===this.getFillRule()?1&i.windingL||1&i.windingR:i.winding)},getIntersections:function(t,i,n,r){var e=this===t||!t,s=this._matrix._orNullIfIdentity(),h=e?s:(n||t._matrix)._orNullIfIdentity();return e||this.getBounds(s).intersects(t.getBounds(h),1e-12)?N.getIntersections(this.getCurves(),!e&&t.getCurves(),i,s,h,r):[]},getCrossings:function(t){return this.getIntersections(t,(function(t){return t.isCrossing()}))},getNearestLocation:function(){for(var t=w.read(arguments),i=this.getCurves(),n=1/0,r=null,e=0,s=i.length;e<s;e++){var h=i[e].getNearestLocation(t);h._distance<n&&(n=h._distance,r=h)}return r},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t},interpolate:function(t,i,n){var r=!this._children,e=r?"_segments":"_children",s=t[e],h=i[e],a=this[e];if(!s||!h||s.length!==h.length)throw new Error("Invalid operands in interpolate() call: "+t+", "+i);var u=a.length,o=h.length;if(u<o)for(var f=r?D:j,c=u;c<o;c++)this.add(new f);else u>o&&this[r?"removeSegments":"removeChildren"](o,u);for(c=0;c<o;c++)a[c].interpolate(s[c],h[c],n);r&&(this.setClosed(t._closed),this._changed(9))},compare:function(t){var i=!1;if(t){var n=this._children||[this],r=t._children?t._children.slice():[t],e=n.length,s=r.length,h=[],a=0;i=!0;for(var u=d.findItemBoundsCollisions(n,r,g.GEOMETRIC_EPSILON),o=e-1;o>=0&&i;o--){var f=n[o];i=!1;var c=u[o];if(c)for(var l=c.length-1;l>=0&&!i;l--)f.compare(r[c[l]])&&(h[c[l]]||(h[c[l]]=!0,a++),i=!0)}i=i&&a===s}return i}}),j=R.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[],this._version=0;var i=arguments,n=Array.isArray(t)?"object"==typeof t[0]?t:i:!t||t.size!==a||t.x===a&&t.point===a?null:i;n&&n.length>0?this.setSegments(n):(this._curves=a,this._segmentSelection=0,n||"string"!=typeof t||(this.setPathData(t),t=null)),this._initialize(!n&&t)},_equals:function(t){return this._closed===t._closed&&f.equals(this._segments,t._segments)},copyContent:function(t){this.setSegments(t._segments),this._closed=t._closed},_changed:function t(i){if(t.base.call(this,i),8&i){if(this._length=this._area=a,32&i)this._version++;else if(this._curves)for(var n=0,r=this._curves.length;n<r;n++)this._curves[n]._changed()}else 64&i&&(this._bounds=a)},getStyle:function(){var t=this._parent;return(t instanceof U?t:this)._style},getSegments:function(){return this._segments},setSegments:function(t){var i=this.isFullySelected(),n=t&&t.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=a,n){var r=t[n-1];"boolean"==typeof r&&(this.setClosed(r),n--),this._add(D.readList(t,0,{},n))}i&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var t=this._curves,i=this._segments;if(!t){var n=this._countCurves();t=this._curves=new Array(n);for(var r=0;r<n;r++)t[r]=new N(this,i[r],i[r+1]||i[0])}return t},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var t=this.getCurves();return t[t.length-1]},isClosed:function(){return this._closed},setClosed:function(t){if(this._closed!=(t=!!t)){if(this._closed=t,this._curves){var i=this._curves.length=this._countCurves();t&&(this._curves[i-1]=new N(this,this._segments[i-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(t,i){var n,r,e,s,h,a,u,o,f=this._segments,c=f.length,l=new p(i),v=new Array(6),d=!0,g=[];function m(i,f){if(i._transformCoordinates(t,v),n=v[0],r=v[1],d)g.push("M"+l.pair(n,r)),d=!1;else if(h=v[2],a=v[3],h===n&&a===r&&u===e&&o===s){if(!f){var c=n-e,p=r-s;g.push(0===c?"v"+l.number(p):0===p?"h"+l.number(c):"l"+l.pair(c,p))}}else g.push("c"+l.pair(u-e,o-s)+" "+l.pair(h-e,a-s)+" "+l.pair(n-e,r-s));e=n,s=r,u=v[4],o=v[5]}if(!c)return"";for(var w=0;w<c;w++)m(f[w]);return this._closed&&c>0&&(m(f[0],!0),g.push("z")),g.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(t){for(var i=this._segments,n=new Array(6),r=0,e=i.length;r<e;r++)i[r]._transformCoordinates(t,n,!0);return!0},_add:function(t,i){for(var n=this._segments,r=this._curves,e=t.length,s=null==i,h=(i=s?n.length:i,0);h<e;h++){var a=t[h];a._path&&(a=t[h]=a.clone()),a._path=this,a._index=i+h,a._selection&&this._updateSelection(a,0,a._selection)}if(s)f.push(n,t);else{n.splice.apply(n,[i,0].concat(t));h=i+e;for(var u=n.length;h<u;h++)n[h]._index=h}if(r){var o=this._countCurves(),c=i>0&&i+e-1===o?i-1:i,l=c,v=Math.min(c+e,o);t._curves&&(r.splice.apply(r,[c,0].concat(t._curves)),l+=t._curves.length);for(h=l;h<v;h++)r.splice(h,0,new N(this,null,null));this._adjustCurves(c,v)}return this._changed(41),t},_adjustCurves:function(t,i){for(var n,r=this._segments,e=this._curves,s=t;s<i;s++)(n=e[s])._path=this,n._segment1=r[s],n._segment2=r[s+1]||r[0],n._changed();(n=e[this._closed&&!t?r.length-1:t-1])&&(n._segment2=r[t]||r[0],n._changed()),(n=e[i])&&(n._segment1=r[i],n._changed())},_countCurves:function(){var t=this._segments.length;return!this._closed&&t>0?t-1:t},add:function(t){var i=arguments;return i.length>1&&"number"!=typeof t?this._add(D.readList(i)):this._add([D.read(i)])[0]},insert:function(t,i){var n=arguments;return n.length>2&&"number"!=typeof i?this._add(D.readList(n,1),t):this._add([D.read(n,1)],t)[0]},addSegment:function(){return this._add([D.read(arguments)])[0]},insertSegment:function(t){return this._add([D.read(arguments,1)],t)[0]},addSegments:function(t){return this._add(D.readList(t))},insertSegments:function(t,i){return this._add(D.readList(i),t)},removeSegment:function(t){return this.removeSegments(t,t+1)[0]||null},removeSegments:function(t,i,n){t=t||0,i=f.pick(i,this._segments.length);var r=this._segments,e=this._curves,s=r.length,h=r.splice(t,i-t),a=h.length;if(!a)return h;for(var u=0;u<a;u++){var o=h[u];o._selection&&this._updateSelection(o,o._selection,0),o._index=o._path=null}u=t;for(var c=r.length;u<c;u++)r[u]._index=u;if(e){var l=t>0&&i===s+(this._closed?1:0)?t-1:t;for(u=(e=e.splice(l,a)).length-1;u>=0;u--)e[u]._path=null;n&&(h._curves=e.slice(1)),this._adjustCurves(l,l)}return this._changed(41),h},clear:"#removeSegments",hasHandles:function(){for(var t=this._segments,i=0,n=t.length;i<n;i++)if(t[i].hasHandles())return!0;return!1},clearHandles:function(){for(var t=this._segments,i=0,n=t.length;i<n;i++)t[i].clearHandles()},getLength:function(){if(null==this._length){for(var t=this.getCurves(),i=0,n=0,r=t.length;n<r;n++)i+=t[n].getLength();this._length=i}return this._length},getArea:function(){var t=this._area;if(null==t){var i=this._segments,n=this._closed;t=0;for(var r=0,e=i.length;r<e;r++){var s=r+1===e;t+=N.getArea(N.getValues(i[r],i[s?0:r+1],null,s&&!n))}this._area=t}return t},isFullySelected:function(){var t=this._segments.length;return this.isSelected()&&t>0&&this._segmentSelection===7*t},setFullySelected:function(t){t&&this._selectSegments(!0),this.setSelected(t)},setSelection:function t(i){1&i||this._selectSegments(!1),t.base.call(this,i)},_selectSegments:function(t){var i=this._segments,n=i.length,r=t?7:0;this._segmentSelection=r*n;for(var e=0;e<n;e++)i[e]._selection=r},_updateSelection:function(t,i,n){t._selection=n,(this._segmentSelection+=n-i)>0&&this.setSelected(!0)},divideAt:function(t){var i,n=this.getLocationAt(t);return n&&(i=n.getCurve().divideAt(n.getCurveOffset()))?i._segment1:null},splitAt:function(t){var i=this.getLocationAt(t),n=i&&i.index,r=i&&i.time;r>.99999999&&(n++,r=0);var e=this.getCurves();if(n>=0&&n<e.length){r>=1e-8&&e[n++].divideAtTime(r);var s,h=this.removeSegments(n,this._segments.length,!0);return this._closed?(this.setClosed(!1),s=this):((s=new j(E.NO_INSERT)).insertAbove(this),s.copyAttributes(this)),s._add(h,0),this.addSegment(h[0]),s}return null},split:function(t,i){var n,r=i===a?t:(n=this.getCurves()[t])&&n.getLocationAtTime(i);return null!=r?this.splitAt(r):null},join:function(t,i){var n=i||0;if(t&&t!==this){var r=t._segments,e=this.getLastSegment(),s=t.getLastSegment();if(!s)return this;e&&e._point.isClose(s._point,n)&&t.reverse();var h=t.getFirstSegment();if(e&&e._point.isClose(h._point,n))e.setHandleOut(h._handleOut),this._add(r.slice(1));else{var a=this.getFirstSegment();a&&a._point.isClose(h._point,n)&&t.reverse(),s=t.getLastSegment(),a&&a._point.isClose(s._point,n)?(a.setHandleIn(s._handleIn),this._add(r.slice(0,r.length-1),0)):this._add(r.slice())}t._closed&&this._add([r[0]]),t.remove()}var u=this.getFirstSegment(),o=this.getLastSegment();return u!==o&&u._point.isClose(o._point,n)&&(u.setHandleIn(o._handleIn),o.remove(),this.setClosed(!0)),this},reduce:function(t){for(var i=this.getCurves(),n=t&&t.simplify,r=n?1e-7:0,e=i.length-1;e>=0;e--){var s=i[e];!s.hasHandles()&&(!s.hasLength(r)||n&&s.isCollinear(s.getNext()))&&s.remove()}return this},reverse:function(){this._segments.reverse();for(var t=0,i=this._segments.length;t<i;t++){var n=this._segments[t],r=n._handleIn;n._handleIn=n._handleOut,n._handleOut=r,n._index=t}this._curves=null,this._changed(9)},flatten:function(t){for(var i=new q(this,t||.25,256,!0).parts,n=i.length,r=[],e=0;e<n;e++)r.push(new D(i[e].curve.slice(0,2)));!this._closed&&n>0&&r.push(new D(i[n-1].curve.slice(6))),this.setSegments(r)},simplify:function(t){var i=new H(this).fit(t||2.5);return i&&this.setSegments(i),!!i},smooth:function(t){var i=this,n=t||{},r=n.type||"asymmetric",e=this._segments,s=e.length,h=this._closed;function u(t,n){var r=t&&t.index;if(null!=r){var e=t.path;if(e&&e!==i)throw new Error(t._class+" "+r+" of "+e+" is not part of "+i);n&&t instanceof N&&r++}else r="number"==typeof t?t:n;return Math.min(r<0&&h?r%s:r<0?r+s:r,s-1)}var o=h&&n.from===a&&n.to===a,f=u(n.from,0),c=u(n.to,s-1);if(f>c)if(h)f-=s;else{var l=f;f=c,c=l}if(/^(?:asymmetric|continuous)$/.test(r)){var v="asymmetric"===r,d=Math.min,p=c-f+1,g=p-1,m=o?d(p,4):1,w=m,y=m,b=[];if(h||(w=d(1,f),y=d(1,s-c-1)),(g+=w+y)<=1)return;for(var _=0,x=f-w;_<=g;_++,x++)b[_]=e[(x<0?x+s:x)%s]._point;var S=b[0]._x+2*b[1]._x,k=b[0]._y+2*b[1]._y,C=2,M=g-1,E=[S],I=[k],P=[C],A=[],T=[];for(_=1;_<g;_++){var O=_<M,L=O?4:v?2:7,z=O?4:v?3:8,D=O?2:v?0:1,B=(O||v?1:2)/C;C=P[_]=L-B,S=E[_]=z*b[_]._x+D*b[_+1]._x-B*S,k=I[_]=z*b[_]._y+D*b[_+1]._y-B*k}A[M]=E[M]/P[M],T[M]=I[M]/P[M];for(_=g-2;_>=0;_--)A[_]=(E[_]-A[_+1])/P[_],T[_]=(I[_]-T[_+1])/P[_];A[g]=(3*b[g]._x-A[M])/2,T[g]=(3*b[g]._y-T[M])/2;_=w;var F=g-y;for(x=f;_<=F;_++,x++){var R=e[x<0?x+s:x],j=R._point,U=A[_]-j._x,q=T[_]-j._y;(o||_<F)&&R.setHandleOut(U,q),(o||_>w)&&R.setHandleIn(-U,-q)}}else for(_=f;_<=c;_++)e[_<0?_+s:_].smooth(n,!o&&_===f,!o&&_===c)},toShape:function(t){if(!this._closed)return null;var i,n,r,e,s,h,u,o=this._segments;function f(t,i){var n=o[t],r=n.getNext(),e=o[i],s=e.getNext();return n._handleOut.isZero()&&r._handleIn.isZero()&&e._handleOut.isZero()&&s._handleIn.isZero()&&r._point.subtract(n._point).isCollinear(s._point.subtract(e._point))}function c(t){var i=o[t],n=i.getNext(),r=i._handleOut,e=n._handleIn,s=.5522847498307936;if(r.isOrthogonal(e)){var h=i._point,a=n._point,u=new C(h,r,!0).intersect(new C(a,e,!0),!0);return u&&g.isZero(r.getLength()/u.subtract(h).getLength()-s)&&g.isZero(e.getLength()/u.subtract(a).getLength()-s)}return!1}function l(t,i){return o[t]._point.getDistance(o[i]._point)}if(!this.hasHandles()&&4===o.length&&f(0,2)&&f(1,3)&&(s=o[1],h=s.getPrevious(),u=s.getNext(),h._handleOut.isZero()&&s._handleIn.isZero()&&s._handleOut.isZero()&&u._handleIn.isZero()&&s._point.subtract(h._point).isOrthogonal(u._point.subtract(s._point)))?(i=A.Rectangle,n=new b(l(0,3),l(0,1)),e=o[1]._point.add(o[2]._point).divide(2)):8===o.length&&c(0)&&c(2)&&c(4)&&c(6)&&f(1,5)&&f(3,7)?(i=A.Rectangle,r=(n=new b(l(1,6),l(0,3))).subtract(new b(l(0,7),l(1,2))).divide(2),e=o[3]._point.add(o[4]._point).divide(2)):4===o.length&&c(0)&&c(1)&&c(2)&&c(3)&&(g.isZero(l(0,2)-l(1,3))?(i=A.Circle,r=l(0,2)/2):(i=A.Ellipse,r=new b(l(2,0)/2,l(3,1)/2)),e=o[1]._point),i){var v=this.getPosition(!0),d=new i({center:v,size:n,radius:r,insert:!1});return d.copyAttributes(this,!0),d._matrix.prepend(this._matrix),d.rotate(e.subtract(v).getAngle()+90),(t===a||t)&&d.insertAbove(this),d}return null},toPath:"#clone",compare:function t(i){if(!i||i instanceof U)return t.base.call(this,i);var n=this.getCurves(),r=i.getCurves(),e=n.length,s=r.length;if(!e||!s)return e==s;for(var h,a,u=n[0].getValues(),o=[],f=0,c=0,l=0;l<s;l++){var v=r[l].getValues();if(o.push(v),g=N.getOverlaps(u,v)){h=!l&&g[0][0]>0?s-1:l,a=g[0][1];break}}var d,p=Math.abs;for(v=o[h];u&&v;){var g;if(g=N.getOverlaps(u,v))if(p(g[0][0]-c)<1e-8){1===(c=g[1][0])&&(u=++f<e?n[f].getValues():null,c=0);var m=g[0][1];if(p(m-a)<1e-8){if(d||(d=[h,m]),1===(a=g[1][1])&&(++h>=s&&(h=0),v=o[h]||r[h].getValues(),a=0),!u)return d[0]===h&&d[1]===a;continue}}break}return!1},_hitTestSelf:function(t,i,n,r){var e,s,h,a,u,o,f=this,c=this.getStyle(),l=this._segments,v=l.length,d=this._closed,p=i._tolerancePadding,g=p,m=i.stroke&&c.hasStroke(),w=i.fill&&c.hasFill(),y=i.curves,b=m?c.getStrokeWidth()/2:w&&i.tolerance>0||y?0:null;function _(i,n){return t.subtract(i).divide(n).length<=1}function x(t,n,r){if(!i.selected||n.isSelected()){var e=t._point;if(n!==e&&(n=n.add(e)),_(n,g))return new z(r,f,{segment:t,point:n})}}function S(t,n){return(n||i.segments)&&x(t,t._point,"segment")||!n&&i.handles&&(x(t,t._handleIn,"handle-in")||x(t,t._handleOut,"handle-out"))}function k(t){a.add(t)}function C(i){var n,u=d||i._index>0&&i._index<v-1;return"round"===(u?e:s)?_(i._point,g):(a=new j({internal:!0,closed:!0}),u?i.isSmooth()||j._addBevelJoin(i,e,b,h,null,r,k,!0):"square"===s&&j._addSquareCap(i,s,b,null,r,k,!0),a.isEmpty()?void 0:a.contains(t)||(n=a.getNearestLocation(t))&&_(n.getPoint(),p))}if(null!==b&&(b>0?(e=c.getStrokeJoin(),s=c.getStrokeCap(),h=c.getMiterLimit(),g=g.add(j._getStrokePadding(b,r))):e=s="round"),!i.ends||i.segments||d){if(i.segments||i.handles)for(var M=0;M<v;M++)if(o=S(l[M]))return o}else if(o=S(l[0],!0)||S(l[v-1],!0))return o;if(null!==b){if(u=this.getNearestLocation(t)){var E=u.getTime();0===E||1===E&&v>1?C(u.getSegment())||(u=null):_(u.getPoint(),g)||(u=null)}if(!u&&"miter"===e&&v>1)for(M=0;M<v;M++){var I=l[M];if(t.getDistance(I._point)<=h*b&&C(I)){u=I.getLocation();break}}}return!u&&w&&this._contains(t)||u&&!m&&!y?new z("fill",this):u?new z(m?"stroke":"curve",this,{location:u,point:u.getPoint()}):null}},f.each(N._evaluateMethods,(function(t){this[t+"At"]=function(i){var n=this.getLocationAt(i);return n&&n[t]()}}),{beans:!1,getLocationOf:function(){for(var t=w.read(arguments),i=this.getCurves(),n=0,r=i.length;n<r;n++){var e=i[n].getLocationOf(t);if(e)return e}return null},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getLocationAt:function(t){if("number"==typeof t){for(var i=this.getCurves(),n=0,r=0,e=i.length;r<e;r++){var s=n,h=i[r];if((n+=h.getLength())>t)return h.getLocationAt(t-s)}if(i.length>0&&t<=this.getLength())return new F(i[i.length-1],1)}else if(t&&t.getPath&&t.getPath()===this)return t;return null},getOffsetsWithTangent:function(){var t=w.read(arguments);if(t.isZero())return[];for(var i=[],n=0,r=this.getCurves(),e=0,s=r.length;e<s;e++){for(var h=r[e],a=h.getTimesWithTangent(t),u=0,o=a.length;u<o;u++){var f=n+h.getOffsetAtTime(a[u]);i.indexOf(f)<0&&i.push(f)}n+=h.length}return i}}),new function(){function t(t,i,n){var r,e,s,h,a,u,o,f,c=i._segments,l=c.length,v=new Array(6),d=!0;function p(i){if(n)i._transformCoordinates(n,v),r=v[0],e=v[1];else{var c=i._point;r=c._x,e=c._y}if(d)t.moveTo(r,e),d=!1;else{if(n)a=v[2],u=v[3];else{var l=i._handleIn;a=r+l._x,u=e+l._y}a===r&&u===e&&o===s&&f===h?t.lineTo(r,e):t.bezierCurveTo(o,f,a,u,r,e)}if(s=r,h=e,n)o=v[4],f=v[5];else{l=i._handleOut;o=s+l._x,f=h+l._y}}for(var g=0;g<l;g++)p(c[g]);i._closed&&l>0&&p(c[0])}return{_draw:function(i,n,r,e){var s=n.dontStart,h=n.dontFinish||n.clip,a=this.getStyle(),u=a.hasFill(),o=a.hasStroke(),f=a.getDashArray(),c=!lt.support.nativeDash&&o&&f&&f.length;function l(t){return f[(t%c+c)%c]}if(s||i.beginPath(),(u||o&&!c||h)&&(t(i,this,e),this._closed&&i.closePath()),!h&&(u||o)&&(this._setStyles(i,n,r),u&&(i.fill(a.getFillRule()),i.shadowColor="rgba(0,0,0,0)"),o)){if(c){s||i.beginPath();for(var v,d=new q(this,.25,32,!1,e),p=d.length,g=-a.getDashOffset(),m=0;g>0;)g-=l(m--)+l(m--);for(;g<p;)v=g+l(m++),(g>0||v>0)&&d.drawPart(i,Math.max(g,0),Math.max(v,0)),g=v+l(m++)}i.stroke()}},_drawSelected:function(i,n){i.beginPath(),t(i,this,n),i.stroke(),function(t,i,n,r){if(!(r<=0))for(var e,s,h=r/2,a=r-2,u=h-1,o=new Array(6),f=0,c=i.length;f<c;f++){var l=i[f],v=l._selection;if(l._transformCoordinates(n,o),e=o[0],s=o[1],2&v&&p(2),4&v&&p(4),t.fillRect(e-h,s-h,r,r),a>0&&!(1&v)){var d=t.fillStyle;t.fillStyle="#ffffff",t.fillRect(e-u,s-u,a,a),t.fillStyle=d}}function p(i){var n=o[i],r=o[i+1];e==n&&s==r||(t.beginPath(),t.moveTo(e,s),t.lineTo(n,r),t.stroke(),t.beginPath(),t.arc(n,r,h,0,2*Math.PI,!0),t.fill())}}(i,this._segments,n,lt.settings.handleSize)}}},new function(){function t(t){var i=t._segments;if(!i.length)throw new Error("Use a moveTo() command first");return i[i.length-1]}return{moveTo:function(){var t=this._segments;1===t.length&&this.removeSegment(0),t.length||this._add([new D(w.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new D(w.read(arguments))])},cubicCurveTo:function(){var i=arguments,n=w.read(i),r=w.read(i),e=w.read(i),s=t(this);s.setHandleOut(n.subtract(s._point)),this._add([new D(e,r.subtract(e))])},quadraticCurveTo:function(){var i=arguments,n=w.read(i),r=w.read(i),e=t(this)._point;this.cubicCurveTo(n.add(e.subtract(n).multiply(1/3)),n.add(r.subtract(n).multiply(1/3)),r)},curveTo:function(){var i=arguments,n=w.read(i),r=w.read(i),e=f.pick(f.read(i),.5),s=1-e,h=t(this)._point,a=n.subtract(h.multiply(s*s)).subtract(r.multiply(e*e)).divide(2*e*s);if(a.isNaN())throw new Error("Cannot put a curve through points with parameter = "+e);this.quadraticCurveTo(a,r)},arcTo:function(){var i,n,r,e,s=arguments,h=Math.abs,a=Math.sqrt,u=t(this),o=u._point,c=w.read(s),l=f.peek(s);if("boolean"==typeof(y=f.pick(l,!0)))var v=(x=o.add(c).divide(2)).add(x.subtract(o).rotate(y?-90:90));else if(f.remain(s)<=2)v=c,c=w.read(s);else if(!o.equals(c)){var d=b.read(s),p=g.isZero;if(p(d.width)||p(d.height))return this.lineTo(c);var m=f.read(s),y=!!f.read(s),_=!!f.read(s),x=o.add(c).divide(2),S=(G=o.subtract(x).rotate(-m)).x,M=G.y,E=h(d.width),I=h(d.height),P=E*E,A=I*I,T=S*S,O=M*M,L=a(T/P+O/A);if(L>1&&(P=(E*=L)*E,A=(I*=L)*I),h(L=(P*A-P*O-A*T)/(P*O+A*T))<1e-12&&(L=0),L<0)throw new Error("Cannot create an arc with the given arguments");i=new w(E*M/I,-I*S/E).multiply((_===y?-1:1)*a(L)).rotate(m).add(x),n=(r=(e=(new k).translate(i).rotate(m).scale(E,I))._inverseTransform(o)).getDirectedAngle(e._inverseTransform(c)),!y&&n>0?n-=360:y&&n<0&&(n+=360)}if(v){var z=new C(o.add(v).divide(2),v.subtract(o).rotate(90),!0),B=new C(v.add(c).divide(2),c.subtract(v).rotate(90),!0),N=new C(o,c),F=N.getSide(v);if(!(i=z.intersect(B,!0))){if(!F)return this.lineTo(c);throw new Error("Cannot create an arc with the given arguments")}n=(r=o.subtract(i)).getDirectedAngle(c.subtract(i));var R=N.getSide(i,!0);0===R?n=F*h(n):F===R&&(n+=n<0?360:-360)}if(n){for(var j=h(n),U=j>=360?4:Math.ceil((j-1e-5)/90),q=n/U,H=q*Math.PI/360,V=4/3*Math.sin(H)/(1+Math.cos(H)),W=[],$=0;$<=U;$++){var G=c,K=null;if($<U&&(K=r.rotate(90).multiply(V),e?(G=e._transformPoint(r),K=e._transformPoint(r.add(K)).subtract(G)):G=i.add(r)),$){var X=r.rotate(-90).multiply(V);e&&(X=e._transformPoint(r.add(X)).subtract(G)),W.push(new D(G,X,K))}else u.setHandleOut(K);r=r.rotate(q)}this._add(W)}},lineBy:function(){var i=w.read(arguments),n=t(this)._point;this.lineTo(n.add(i))},curveBy:function(){var i=arguments,n=w.read(i),r=w.read(i),e=f.read(i),s=t(this)._point;this.curveTo(s.add(n),s.add(r),e)},cubicCurveBy:function(){var i=arguments,n=w.read(i),r=w.read(i),e=w.read(i),s=t(this)._point;this.cubicCurveTo(s.add(n),s.add(r),s.add(e))},quadraticCurveBy:function(){var i=arguments,n=w.read(i),r=w.read(i),e=t(this)._point;this.quadraticCurveTo(e.add(n),e.add(r))},arcBy:function(){var i=arguments,n=t(this)._point,r=n.add(w.read(i)),e=f.pick(f.peek(i),!0);"boolean"==typeof e?this.arcTo(r,e):this.arcTo(r,n.add(w.read(i)))},closePath:function(t){this.setClosed(!0),this.join(this,t)}}},{_getBounds:function(t,i){var n=i.handle?"getHandleBounds":i.stroke?"getStrokeBounds":"getBounds";return j[n](this._segments,this._closed,this,t,i)},statics:{getBounds:function(t,i,n,r,e,s){var h=t[0];if(!h)return new x;var a=new Array(6),u=h._transformCoordinates(r,new Array(6)),o=u.slice(0,2),f=o.slice(),c=new Array(2);function l(t){t._transformCoordinates(r,a);for(var i=0;i<2;i++)N._addBounds(u[i],u[i+4],a[i+2],a[i],i,s?s[i]:0,o,f,c);var n=u;u=a,a=n}for(var v=1,d=t.length;v<d;v++)l(t[v]);return i&&l(h),new x(o[0],o[1],f[0]-o[0],f[1]-o[1])},getStrokeBounds:function(t,i,n,r,e){var s=n.getStyle(),h=s.hasStroke(),a=s.getStrokeWidth(),u=h&&n._getStrokeMatrix(r,e),o=h&&j._getStrokePadding(a,u),f=j.getBounds(t,i,n,r,e,o);if(!h)return f;var c=a/2,l=s.getStrokeJoin(),v=s.getStrokeCap(),d=s.getMiterLimit(),p=new x(new b(o));function g(t){f=f.include(t)}function m(t){f=f.unite(p.setCenter(t._point.transform(r)))}function w(t,i){"round"===i||t.isSmooth()?m(t):j._addBevelJoin(t,i,c,d,r,u,g)}function y(t,i){"round"===i?m(t):j._addSquareCap(t,i,c,r,u,g)}var _=t.length-(i?0:1);if(_>0){for(var S=1;S<_;S++)w(t[S],l);i?w(t[0],l):(y(t[0],v),y(t[t.length-1],v))}return f},_getStrokePadding:function(t,i){if(!i)return[t,t];var n=new w(t,0).transform(i),r=new w(0,t).transform(i),e=n.getAngleInRadians(),s=n.getLength(),h=r.getLength(),a=Math.sin(e),u=Math.cos(e),o=Math.tan(e),f=Math.atan2(h*o,s),c=Math.atan2(h,o*s);return[Math.abs(s*Math.cos(f)*u+h*Math.sin(f)*a),Math.abs(h*Math.sin(c)*u+s*Math.cos(c)*a)]},_addBevelJoin:function(t,i,n,r,e,s,h,a){var u=t.getCurve(),o=u.getPrevious(),f=u.getPoint1().transform(e),c=o.getNormalAtTime(1).multiply(n).transform(s),l=u.getNormalAtTime(0).multiply(n).transform(s),v=c.getDirectedAngle(l);if((v<0||v>=180)&&(c=c.negate(),l=l.negate()),a&&h(f),h(f.add(c)),"miter"===i){var d=new C(f.add(c),new w(-c.y,c.x),!0).intersect(new C(f.add(l),new w(-l.y,l.x),!0),!0);d&&f.getDistance(d)<=r*n&&h(d)}h(f.add(l))},_addSquareCap:function(t,i,n,r,e,s,h){var a=t._point.transform(r),u=t.getLocation(),o=u.getNormal().multiply(0===u.getTime()?n:-n).transform(e);"square"===i&&(h&&(s(a.subtract(o)),s(a.add(o))),a=a.add(o.rotate(-90))),s(a.add(o)),s(a.subtract(o))},getHandleBounds:function(t,i,n,r,e){var s,h,a=n.getStyle();if(e.stroke&&a.hasStroke()){var u=n._getStrokeMatrix(r,e),o=a.getStrokeWidth()/2,f=o;"miter"===a.getStrokeJoin()&&(f=o*a.getMiterLimit()),"square"===a.getStrokeCap()&&(f=Math.max(f,o*Math.SQRT2)),s=j._getStrokePadding(o,u),h=j._getStrokePadding(f,u)}for(var c=new Array(6),l=1/0,v=-l,d=l,p=v,g=0,m=t.length;g<m;g++){t[g]._transformCoordinates(r,c);for(var w=0;w<6;w+=2){var y=w?s:h,b=y?y[0]:0,_=y?y[1]:0,S=c[w],k=c[w+1],C=S-b,M=S+b,E=k-_,I=k+_;C<l&&(l=C),M>v&&(v=M),E<d&&(d=E),I>p&&(p=I)}}return new x(l,d,v-l,p-d)}}});j.inject({statics:new function(){var t=.5522847498307936,i=[new D([-1,0],[0,t],[0,-t]),new D([0,-1],[-t,0],[t,0]),new D([1,0],[0,-t],[0,t]),new D([0,1],[t,0],[-t,0])];function n(t,i,n){var r=f.getNamed(n),e=new j(r&&(1==r.insert?E.INSERT:0==r.insert?E.NO_INSERT:null));return e._add(t),e._closed=i,e.set(r,E.INSERT)}function r(t,r,e){for(var s=new Array(4),h=0;h<4;h++){var a=i[h];s[h]=new D(a._point.multiply(r).add(t),a._handleIn.multiply(r),a._handleOut.multiply(r))}return n(s,!0,e)}return{Line:function(){var t=arguments;return n([new D(w.readNamed(t,"from")),new D(w.readNamed(t,"to"))],!1,t)},Circle:function(){var t=arguments,i=w.readNamed(t,"center"),n=f.readNamed(t,"radius");return r(i,new b(n),t)},Rectangle:function(){var i,r=arguments,e=x.readNamed(r,"rectangle"),s=b.readNamed(r,"radius",0,{readNull:!0}),h=e.getBottomLeft(!0),a=e.getTopLeft(!0),u=e.getTopRight(!0),o=e.getBottomRight(!0);if(!s||s.isZero())i=[new D(h),new D(a),new D(u),new D(o)];else{var f=(s=b.min(s,e.getSize(!0).divide(2))).width,c=s.height,l=f*t,v=c*t;i=[new D(h.add(f,0),null,[-l,0]),new D(h.subtract(0,c),[0,v]),new D(a.add(0,c),null,[0,-v]),new D(a.add(f,0),[-l,0],null),new D(u.subtract(f,0),null,[l,0]),new D(u.add(0,c),[0,-v],null),new D(o.subtract(0,c),null,[0,v]),new D(o.subtract(f,0),[l,0])]}return n(i,!0,r)},RoundRectangle:"#Rectangle",Ellipse:function(){var t=arguments,i=A._readEllipse(t);return r(i.center,i.radius,t)},Oval:"#Ellipse",Arc:function(){var t=arguments,i=w.readNamed(t,"from"),n=w.readNamed(t,"through"),r=w.readNamed(t,"to"),e=f.getNamed(t),s=new j(e&&0==e.insert&&E.NO_INSERT);return s.moveTo(i),s.arcTo(n,r),s.set(e)},RegularPolygon:function(){for(var t=arguments,i=w.readNamed(t,"center"),r=f.readNamed(t,"sides"),e=f.readNamed(t,"radius"),s=360/r,h=r%3==0,a=new w(0,h?-e:e),u=h?-1:.5,o=new Array(r),c=0;c<r;c++)o[c]=new D(i.add(a.rotate((c+u)*s)));return n(o,!0,t)},Star:function(){for(var t=arguments,i=w.readNamed(t,"center"),r=2*f.readNamed(t,"points"),e=f.readNamed(t,"radius1"),s=f.readNamed(t,"radius2"),h=360/r,a=new w(0,-1),u=new Array(r),o=0;o<r;o++)u[o]=new D(i.add(a.rotate(h*o).multiply(o%2?s:e)));return n(u,!0,t)}}}});var U=R.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||("string"==typeof t?this.setPathData(t):this.addChildren(Array.isArray(t)?t:arguments))},insertChildren:function t(i,n){var r=n,e=r[0];e&&"number"==typeof e[0]&&(r=[r]);for(var s=n.length-1;s>=0;s--){var h=r[s];r!==n||h instanceof j||(r=f.slice(r)),Array.isArray(h)?r[s]=new j({segments:h,insert:!1}):h instanceof U&&(r.splice.apply(r,[s,1].concat(h.removeChildren())),h.remove())}return t.base.call(this,i,r)},reduce:function t(i){for(var n=this._children,r=n.length-1;r>=0;r--){var e;(e=n[r].reduce(i)).isEmpty()&&e.remove()}return n.length?t.base.call(this):((e=new j(E.NO_INSERT)).copyAttributes(this),e.insertAbove(this),this.remove(),e)},isClosed:function(){for(var t=this._children,i=0,n=t.length;i<n;i++)if(!t[i]._closed)return!1;return!0},setClosed:function(t){for(var i=this._children,n=0,r=i.length;n<r;n++)i[n].setClosed(t)},getFirstSegment:function(){var t=this.getFirstChild();return t&&t.getFirstSegment()},getLastSegment:function(){var t=this.getLastChild();return t&&t.getLastSegment()},getCurves:function(){for(var t=this._children,i=[],n=0,r=t.length;n<r;n++)f.push(i,t[n].getCurves());return i},getFirstCurve:function(){var t=this.getFirstChild();return t&&t.getFirstCurve()},getLastCurve:function(){var t=this.getLastChild();return t&&t.getLastCurve()},getArea:function(){for(var t=this._children,i=0,n=0,r=t.length;n<r;n++)i+=t[n].getArea();return i},getLength:function(){for(var t=this._children,i=0,n=0,r=t.length;n<r;n++)i+=t[n].getLength();return i},getPathData:function(t,i){for(var n=this._children,r=[],e=0,s=n.length;e<s;e++){var h=n[e],a=h._matrix;r.push(h.getPathData(t&&!a.isIdentity()?t.appended(a):t,i))}return r.join("")},_hitTestChildren:function t(i,n,r){return t.base.call(this,i,n.class===j||"path"===n.type?n:f.set({},n,{fill:!1}),r)},_draw:function(t,i,n,r){var e=this._children;if(e.length){i=i.extend({dontStart:!0,dontFinish:!0}),t.beginPath();for(var s=0,h=e.length;s<h;s++)e[s].draw(t,i,r);if(!i.clip){this._setStyles(t,i,n);var a=this._style;a.hasFill()&&(t.fill(a.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),a.hasStroke()&&t.stroke()}}},_drawSelected:function(t,i,n){for(var r=this._children,e=0,s=r.length;e<s;e++){var h=r[e],a=h._matrix;n[h._id]||h._drawSelected(t,a.isIdentity()?i:i.appended(a))}}},new function(){function t(t,i){var n=t._children;if(i&&!n.length)throw new Error("Use a moveTo() command first");return n[n.length-1]}return f.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],(function(i){this[i]=function(){var n=t(this,!0);n[i].apply(n,arguments)}}),{moveTo:function(){var i=t(this),n=i&&i.isEmpty()?i:new j(E.NO_INSERT);n!==i&&this.addChild(n),n.moveTo.apply(n,arguments)},moveBy:function(){var i=t(this,!0),n=i&&i.getLastSegment(),r=w.read(arguments);this.moveTo(n?r.add(n._point):r)},closePath:function(i){t(this,!0).closePath(i)}})},f.each(["reverse","flatten","simplify","smooth"],(function(t){this[t]=function(i){for(var n,r=this._children,e=0,s=r.length;e<s;e++)n=r[e][t](i)||n;return n}}),{}));R.inject(new function(){var t=Math.min,i=Math.max,n=Math.abs,r={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function e(t){return t._children||[t]}function s(t,i){var n=t.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(i){for(var r=e(n),s=0,h=r.length;s<h;s++){(t=r[s])._closed||t.isEmpty()||(t.closePath(1e-12),t.getFirstSegment().setHandleIn(0,0),t.getLastSegment().setHandleOut(0,0))}n=n.resolveCrossings().reorient("nonzero"===n.getFillRule(),!0)}return n}function h(t,i,n,r,e){var s=new U(E.NO_INSERT);return s.addChildren(t,!0),s=s.reduce({simplify:i}),e&&0==e.insert||s.insertAbove(r&&n.isSibling(r)&&n.getIndex()<r.getIndex()?r:n),s.copyAttributes(n,!0),s}function u(t){return t.hasOverlap()||t.isCrossing()}function o(t,i,n,a){if(a&&(0==a.trace||a.stroke)&&/^(subtract|intersect)$/.test(n))return c(t,i,n);var o=s(t,!0),l=i&&t!==i&&s(i,!0),v=r[n];v[n]=!0,l&&(v.subtract||v.exclude)^l.isClockwise()^o.isClockwise()&&l.reverse();var g,w=m(F.expand(o.getIntersections(l,u))),_=e(o),x=l&&e(l),S=[],k=[];function C(t){for(var i=0,n=t.length;i<n;i++){var r=t[i];f.push(S,r._segments),f.push(k,r.getCurves()),r._overlapsOnly=!0}}function M(t){for(var i=[],n=0,r=t&&t.length;n<r;n++)i.push(k[t[n]]);return i}if(w.length){C(_),x&&C(x);for(var E=new Array(k.length),I=0,P=k.length;I<P;I++)E[I]=k[I].getValues();var A=d.findCurveBoundsCollisions(E,E,0,!0),T={};for(I=0;I<k.length;I++){var O=k[I],L=O._path._id;(T[L]=T[L]||{})[O.getIndex()]={hor:M(A[I].hor),ver:M(A[I].ver)}}for(I=0,P=w.length;I<P;I++)y(w[I]._segment,o,l,T,v);for(I=0,P=S.length;I<P;I++){var z=S[I],D=z._intersection;z._winding||y(z,o,l,T,v),D&&D._overlap||(z._path._overlapsOnly=!1)}g=b(S,v)}else g=p(x?_.concat(x):_.slice(),(function(t){return!!v[t]}));return h(g,!0,t,i,a)}function c(t,i,n){var r=s(t),e=s(i),a=r.getIntersections(e,u),o="subtract"===n,f="divide"===n,c={},l=[];function v(t){if(!c[t._id]&&(f||e.contains(t.getPointAt(t.getLength()/2))^o))return l.unshift(t),c[t._id]=!0}for(var d=a.length-1;d>=0;d--){var p=a[d].split();p&&(v(p)&&p.getFirstSegment().setHandleIn(0,0),r.getLastSegment().setHandleOut(0,0))}return v(r),h(l,!1,t,i)}function l(t,i){for(var n=t;n;){if(n===i)return;n=n._previous}for(;t._next&&t._next!==i;)t=t._next;if(!t._next){for(;i._previous;)i=i._previous;t._next=i,i._previous=t}}function v(t){for(var i=t.length-1;i>=0;i--)t[i].clearHandles()}function p(t,i,r){var e=t&&t.length;if(e){var s=f.each(t,(function(t,i){this[t._id]={container:null,winding:t.isClockwise()?1:-1,index:i}}),{}),h=t.slice().sort((function(t,i){return n(i.getArea())-n(t.getArea())})),a=h[0],u=d.findItemBoundsCollisions(h,null,g.GEOMETRIC_EPSILON);null==r&&(r=a.isClockwise());for(var o=0;o<e;o++){var c=h[o],l=s[c._id],v=0,p=u[o];if(p)for(var m=null,w=p.length-1;w>=0;w--)if(p[w]<o){m=m||c.getInteriorPoint();var y=h[p[w]];if(y.contains(m)){var b=s[y._id];v=b.winding,l.winding+=v,l.container=b.exclude?b.container:y;break}}if(i(l.winding)===i(v))l.exclude=!0,t[l.index]=null;else{var _=l.container;c.setClockwise(_?!_.isClockwise():r)}}}return t}function m(t,i,n){var r,e,s,h=i&&[],a=1e-8,u=!1,o=n||[],f=n&&{};function c(t){return t._path._id+"."+t._segment1._index}for(var d=(n&&n.length)-1;d>=0;d--){(p=n[d])._path&&(f[c(p)]=!0)}for(d=t.length-1;d>=0;d--){var p,g,m=t[d],w=m._time,y=w,b=i&&!i(m);if((p=m._curve)&&(p!==e?(u=!p.hasHandles()||f&&f[c(p)],r=[],s=null,e=p):s>=a&&(w/=s)),b)r&&r.push(m);else{if(i&&h.unshift(m),s=y,w<a)g=p._segment1;else if(w>.99999999)g=p._segment2;else{var _=p.divideAtTime(w,!0);u&&o.push(p,_),g=_._segment1;for(var x=r.length-1;x>=0;x--){var S=r[x];S._time=(S._time-w)/(1-w)}}m._setSegment(g);var k=g._intersection,C=m._intersection;if(k){l(k,C);for(var M=k;M;)l(M._intersection,k),M=M._next}else g._intersection=C}}return n||v(o),h||t}function w(r,e,s,h,a){var u,o,f=Array.isArray(e)?e:e[s?"hor":"ver"],c=s?1:0,l=1^c,v=[r.x,r.y],d=v[c],p=v[l],g=1e-6,m=d-1e-9,y=d+1e-9,b=0,_=0,x=0,S=0,k=!1,C=!1,M=1,E=[];function I(n){var o=n[l+0],f=n[l+6];if(!(p<t(o,f)||p>i(o,f))){var v=n[c+0],b=n[c+2],_=n[c+4],C=n[c+6];if(o!==f){var I=p===o?0:p===f||m>i(v,b,_,C)||y<t(v,b,_,C)?1:N.solveCubic(n,l,p,E,0,1)>0?E[0]:1,P=0===I?v:1===I?C:N.getPoint(n,I)[s?"y":"x"],A=o>f?1:-1,T=u[l]>u[l+6]?1:-1,O=u[c+6];return p!==o?(P<m?x+=A:P>y?S+=A:k=!0,P>d-g&&P<d+g&&(M/=2)):(A!==T?v<m?x+=A:v>y&&(S+=A):v!=O&&(O<y&&P>y?(S+=A,k=!0):O>m&&P<m&&(x+=A,k=!0)),M/=4),u=n,!a&&P>m&&P<y&&0===N.getTangent(n,I)[s?"x":"y"]&&w(r,e,!s,h,!0)}(v<y&&C>m||C<y&&v>m)&&(k=!0)}}function P(n){var r=n[l+0],e=n[l+2],h=n[l+4],a=n[l+6];if(p<=i(r,e,h,a)&&p>=t(r,e,h,a))for(var u,o=n[c+0],f=n[c+2],v=n[c+4],d=n[c+6],g=m>i(o,f,v,d)||y<t(o,f,v,d)?[n]:N.getMonoCurves(n,s),w=0,b=g.length;w<b;w++)if(u=I(g[w]))return u}for(var A=0,T=f.length;A<T;A++){var O,L=f[A],z=L._path,D=L.getValues();if(!(A&&f[A-1]._path===z||(u=null,z._closed||(o=N.getValues(z.getLastCurve().getSegment2(),L.getSegment1(),null,!h))[l]!==o[l+6]&&(u=o),u))){u=D;for(var B=z.getLastCurve();B&&B!==L;){var F=B.getValues();if(F[l]!==F[l+6]){u=F;break}B=B.getPrevious()}}if(O=P(D))return O;if(A+1===T||f[A+1]._path!==z){if(o&&(O=P(o)))return O;!k||x||S||(x=S=z.isClockwise(h)^s?1:-1),b+=x,_+=S,x=S=0,k&&(C=!0,k=!1),o=null}}return b=n(b),_=n(_),{winding:i(b,_),windingL:b,windingR:_,quality:M,onPath:C}}function y(t,i,r,e,s){var h=[],a=t,u=0;do{if(y=t.getCurve()){var o=y.getLength();h.push({segment:t,curve:y,length:o}),u+=o}t=t.getNext()}while(t&&!t._intersection&&t!==a);for(var f=[.5,.25,.75],c={winding:0,quality:-1},l=0;l<f.length&&c.quality<.5;l++){o=u*f[l];for(var v=0,d=h.length;v<d;v++){var p=h[v],m=p.length;if(o<=m){var y,b=(y=p.curve)._path,_=b._parent,x=_ instanceof U?_:b,S=g.clamp(y.getTimeAt(o),.001,.999),k=y.getPointAtTime(S),C=n(y.getTangentAtTime(S).y)<Math.SQRT1_2,M=null;if(s.subtract&&r){var E=(x===i?r:i)._getWinding(k,C,!0);if(x===i&&E.winding||x===r&&!E.winding){if(E.quality<1)continue;M={winding:0,quality:1}}}(M=M||w(k,e[b._id][y.getIndex()],C,!0)).quality>c.quality&&(c=M);break}o-=m}}for(v=h.length-1;v>=0;v--)h[v].segment._winding=c}function b(t,i){var n,r=[];function e(t){var n;return!(!t||t._visited||i&&(!i[(n=t._winding||{}).winding]||i.unite&&2===n.winding&&n.windingL&&n.windingR))}function s(t){if(t)for(var i=0,r=n.length;i<r;i++)if(t===n[i])return!0;return!1}function h(t){for(var i=t._segments,n=0,r=i.length;n<r;n++)i[n]._visited=!0}function a(t,i){var r=t._intersection,h=r,a=[];function u(r,h){for(;r&&r!==h;){var u=r._segment,o=u&&u._path;if(o){var f=u.getNext()||o.getFirstSegment(),c=f._intersection;u!==t&&(s(u)||s(f)||f&&e(u)&&(e(f)||c&&e(c._segment)))&&a.push(u),i&&n.push(u)}r=r._next}}if(i&&(n=[t]),r){for(u(r);r&&r._previous;)r=r._previous;u(r,h)}return a}t.sort((function(t,i){var n=t._intersection,r=i._intersection,e=!(!n||!n._overlap),s=!(!r||!r._overlap),h=t._path,a=i._path;return e^s?e?1:-1:!n^!r?n?1:-1:h!==a?h._id-a._id:t._index-i._index}));for(var u=0,o=t.length;u<o;u++){var f,c,l,v=t[u],d=e(v),p=null,g=!1,m=!0,w=[];if(d&&v._path._overlapsOnly){var y=v._path,b=v._intersection._segment._path;y.compare(b)&&(y.getArea()&&r.push(y.clone(!1)),h(y),h(b),d=!1)}for(;d;){var _=!p,x=a(v,_),S=x.shift(),k=!(g=!_&&(s(v)||s(S)))&&S;if(_&&(p=new j(E.NO_INSERT),f=null),g){(v.isFirst()||v.isLast())&&(m=v._path._closed),v._visited=!0;break}if(k&&f&&(w.push(f),f=null),f||(k&&x.push(v),f={start:p._segments.length,crossings:x,visited:c=[],handleIn:l}),k&&(v=S),!e(v)){p.removeSegments(f.start);for(var C=0,M=c.length;C<M;C++)c[C]._visited=!1;c.length=0;do{(v=f&&f.crossings.shift())&&v._path||(v=null,(f=w.pop())&&(c=f.visited,l=f.handleIn))}while(f&&!e(v));if(!v)break}var I=v.getNext();p.add(new D(v._point,l,I&&v._handleOut)),v._visited=!0,c.push(v),v=I||v._path.getFirstSegment(),l=I&&I._handleIn}g&&(m&&(p.getFirstSegment().setHandleIn(l),p.setClosed(m)),0!==p.getArea()&&r.push(p))}return r}return{_getWinding:function(t,i,n){return w(t,this.getCurves(),i,n)},unite:function(t,i){return o(this,t,"unite",i)},intersect:function(t,i){return o(this,t,"intersect",i)},subtract:function(t,i){return o(this,t,"subtract",i)},exclude:function(t,i){return o(this,t,"exclude",i)},divide:function(t,i){return i&&(0==i.trace||i.stroke)?c(this,t,"divide"):h([this.subtract(t,i),this.intersect(t,i)],!0,this,t,i)},resolveCrossings:function(){var t=this._children,i=t||[this];function n(t,i){var n=t&&t._intersection;return n&&n._overlap&&n._path===i}var r=!1,e=!1,s=this.getIntersections(null,(function(t){return t.hasOverlap()&&(r=!0)||t.isCrossing()&&(e=!0)})),h=r&&e&&[];if(s=F.expand(s),r)for(var a=m(s,(function(t){return t.hasOverlap()}),h),u=a.length-1;u>=0;u--){var o=a[u],c=o._path,l=o._segment,d=l.getPrevious(),p=l.getNext();n(d,c)&&n(p,c)&&(l.remove(),d._handleOut._set(0,0),p._handleIn._set(0,0),d===l||d.getCurve().hasLength()||(p._handleIn.set(d._handleIn),d.remove()))}e&&(m(s,r&&function(t){var i=t.getCurve(),n=t.getSegment(),r=t._intersection,e=r._curve,s=r._segment;if(i&&e&&i._path&&e._path)return!0;n&&(n._intersection=null),s&&(s._intersection=null)},h),h&&v(h),i=b(f.each(i,(function(t){f.push(this,t._segments)}),[])));var g,w=i.length;return w>1&&t?(i!==t&&this.setChildren(i),g=this):1!==w||t||(i[0]!==this&&this.setSegments(i[0].removeSegments()),g=this),g||((g=new U(E.NO_INSERT)).addChildren(i),(g=g.reduce()).copyAttributes(this),this.replaceWith(g)),g},reorient:function(t,i){var n=this._children;return n&&n.length?this.setChildren(p(this.removeChildren(),(function(i){return!!(t?i:1&i)}),i)):i!==a&&this.setClockwise(i),this},getInteriorPoint:function(){var n=this.getBounds().getCenter(!0);if(!this.contains(n)){for(var r=this.getCurves(),e=n.y,s=[],h=[],a=0,u=r.length;a<u;a++){var o=r[a].getValues(),f=o[1],c=o[3],l=o[5],v=o[7];if(e>=t(f,c,l,v)&&e<=i(f,c,l,v))for(var d=N.getMonoCurves(o),p=0,g=d.length;p<g;p++){var m=d[p],w=m[1],y=m[7];if(w!==y&&(e>=w&&e<=y||e>=y&&e<=w)){var b=e===w?m[0]:e===y?m[6]:1===N.solveCubic(m,1,e,h,0,1)?N.getPoint(m,h[0]).x:(m[0]+m[6])/2;s.push(b)}}}s.length>1&&(s.sort((function(t,i){return t-i})),n.x=(s[0]+s[1])/2)}return n}}});var q=f.extend({_class:"PathFlattener",initialize:function(t,i,n,r,e){var s,h=[],a=[],u=0,o=1/(n||32),f=t._segments,c=f[0];function l(t,i){var n=N.getValues(t,i,e);h.push(n),v(n,t._index,0,1)}function v(t,n,e,s){if(!(s-e>o)||r&&N.isStraight(t)||N.isFlatEnough(t,i||.25)){var h=t[6]-t[0],f=t[7]-t[1],c=Math.sqrt(h*h+f*f);c>0&&(u+=c,a.push({offset:u,curve:t,index:n,time:s}))}else{var l=N.subdivide(t,.5),d=(e+s)/2;v(l[0],n,e,d),v(l[1],n,d,s)}}for(var d=1,p=f.length;d<p;d++)l(c,s=f[d]),c=s;t._closed&&l(s||c,f[0]),this.curves=h,this.parts=a,this.length=u,this.index=0},_get:function(t){for(var i,n=this.parts,r=n.length,e=this.index;i=e,e&&!(n[--e].offset<t););for(;i<r;i++){var s=n[i];if(s.offset>=t){this.index=i;var h=n[i-1],a=h&&h.index===s.index?h.time:0,u=h?h.offset:0;return{index:s.index,time:a+(s.time-a)*(t-u)/(s.offset-u)}}}return{index:n[r-1].index,time:1}},drawPart:function(t,i,n){for(var r=this._get(i),e=this._get(n),s=r.index,h=e.index;s<=h;s++){var a=N.getPart(this.curves[s],s===r.index?r.time:0,s===e.index?e.time:1);s===r.index&&t.moveTo(a[0],a[1]),t.bezierCurveTo.apply(t,a.slice(2))}}},f.each(N._evaluateMethods,(function(t){this[t+"At"]=function(i){var n=this._get(i);return N[t](this.curves[n.index],n.time)}}),{})),H=f.extend({initialize:function(t){for(var i,n=this.points=[],r=t._segments,e=t._closed,s=0,h=r.length;s<h;s++){var a=r[s].point;i&&i.equals(a)||n.push(i=a.clone())}e&&(n.unshift(n[n.length-1]),n.push(n[1])),this.closed=e},fit:function(t){var i=this.points,n=i.length,r=null;return n>0&&(r=[new D(i[0])],n>1&&(this.fitCubic(r,t,0,n-1,i[1].subtract(i[0]),i[n-2].subtract(i[n-1])),this.closed&&(r.shift(),r.pop()))),r},fitCubic:function(t,i,n,r,e,s){var h=this.points;if(r-n!=1){for(var a,u=this.chordLengthParameterize(n,r),o=Math.max(i,i*i),f=!0,c=0;c<=4;c++){var l=this.generateBezier(n,r,u,e,s),v=this.findMaxError(n,r,l,u);if(v.error<i&&f)return void this.addCurve(t,l);if(a=v.index,v.error>=o)break;f=this.reparameterize(n,r,u,l),o=v.error}var d=h[a-1].subtract(h[a+1]);this.fitCubic(t,i,n,a,e,d),this.fitCubic(t,i,a,r,d.negate(),s)}else{var p=h[n],g=h[r],m=p.getDistance(g)/3;this.addCurve(t,[p,p.add(e.normalize(m)),g.add(s.normalize(m)),g])}},addCurve:function(t,i){t[t.length-1].setHandleOut(i[1].subtract(i[0])),t.push(new D(i[3],i[2].subtract(i[3])))},generateBezier:function(t,i,n,r,e){for(var s=1e-12,h=Math.abs,a=this.points,u=a[t],o=a[i],f=[[0,0],[0,0]],c=[0,0],l=0,v=i-t+1;l<v;l++){var d=n[l],p=1-d,g=3*d*p,m=p*p*p,w=g*p,y=g*d,b=d*d*d,_=r.normalize(w),x=e.normalize(y),S=a[t+l].subtract(u.multiply(m+w)).subtract(o.multiply(y+b));f[0][0]+=_.dot(_),f[0][1]+=_.dot(x),f[1][0]=f[0][1],f[1][1]+=x.dot(x),c[0]+=_.dot(S),c[1]+=x.dot(S)}var k,C,M=f[0][0]*f[1][1]-f[1][0]*f[0][1];if(h(M)>s){var E=f[0][0]*c[1]-f[1][0]*c[0];k=(c[0]*f[1][1]-c[1]*f[0][1])/M,C=E/M}else{var I=f[0][0]+f[0][1],P=f[1][0]+f[1][1];k=C=h(I)>s?c[0]/I:h(P)>s?c[1]/P:0}var A,T,O=o.getDistance(u),L=s*O;if(k<L||C<L)k=C=O/3;else{var z=o.subtract(u);A=r.normalize(k),T=e.normalize(C),A.dot(z)-T.dot(z)>O*O&&(k=C=O/3,A=T=null)}return[u,u.add(A||r.normalize(k)),o.add(T||e.normalize(C)),o]},reparameterize:function(t,i,n,r){for(var e=t;e<=i;e++)n[e-t]=this.findRoot(r,this.points[e],n[e-t]);e=1;for(var s=n.length;e<s;e++)if(n[e]<=n[e-1])return!1;return!0},findRoot:function(t,i,n){for(var r=[],e=[],s=0;s<=2;s++)r[s]=t[s+1].subtract(t[s]).multiply(3);for(s=0;s<=1;s++)e[s]=r[s+1].subtract(r[s]).multiply(2);var h=this.evaluate(3,t,n),a=this.evaluate(2,r,n),u=this.evaluate(1,e,n),o=h.subtract(i),f=a.dot(a)+o.dot(u);return g.isMachineZero(f)?n:n-o.dot(a)/f},evaluate:function(t,i,n){for(var r=i.slice(),e=1;e<=t;e++)for(var s=0;s<=t-e;s++)r[s]=r[s].multiply(1-n).add(r[s+1].multiply(n));return r[0]},chordLengthParameterize:function(t,i){for(var n=[0],r=t+1;r<=i;r++)n[r-t]=n[r-t-1]+this.points[r].getDistance(this.points[r-1]);r=1;for(var e=i-t;r<=e;r++)n[r]/=n[e];return n},findMaxError:function(t,i,n,r){for(var e=Math.floor((i-t+1)/2),s=0,h=t+1;h<i;h++){var a=this.evaluate(3,n,r[h-t]).subtract(this.points[h]),u=a.x*a.x+a.y*a.y;u>=s&&(s=u,e=h)}return{error:s,index:e}}}),V=E.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(t){this._content="",this._lines=[];var i=t&&f.isPlainObject(t)&&t.x===a&&t.y===a;this._initialize(i&&t,!i&&w.read(arguments))},_equals:function(t){return this._content===t._content},copyContent:function(t){this.setContent(t._content)},getContent:function(){return this._content},setContent:function(t){this._content=""+t,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),W=V.extend({_class:"PointText",initialize:function(){V.apply(this,arguments)},getPoint:function(){var t=this._matrix.getTranslation();return new y(t.x,t.y,this,"setPoint")},setPoint:function(){var t=w.read(arguments);this.translate(t.subtract(this._matrix.getTranslation()))},_draw:function(t,i,n){if(this._content){this._setStyles(t,i,n);var r=this._lines,e=this._style,s=e.hasFill(),h=e.hasStroke(),a=e.getLeading(),u=t.shadowColor;t.font=e.getFontStyle(),t.textAlign=e.getJustification();for(var o=0,f=r.length;o<f;o++){t.shadowColor=u;var c=r[o];s&&(t.fillText(c,0,0),t.shadowColor="rgba(0,0,0,0)"),h&&t.strokeText(c,0,0),t.translate(0,a)}}},_getBounds:function(t,i){var n=this._style,r=this._lines,e=r.length,s=n.getJustification(),h=n.getLeading(),a=this.getView().getTextWidth(n.getFontStyle(),r),u=0;"left"!==s&&(u-=a/("center"===s?2:1));var o=new x(u,e?-.75*h:0,a,e*h);return t?t._transformBounds(o,o):o}}),$=f.extend(new function(){var t,i={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},n={},r={transparent:[0,0,0,0]};var e=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],s={"rgb-hsb":function(t,i,n){var r=Math.max(t,i,n),e=r-Math.min(t,i,n);return[0===e?0:60*(r==t?(i-n)/e+(i<n?6:0):r==i?(n-t)/e+2:(t-i)/e+4),0===r?0:e/r,r]},"hsb-rgb":function(t,i,n){var r,s=(t=(t/60%6+6)%6)-(r=Math.floor(t)),h=[n,n*(1-i),n*(1-i*s),n*(1-i*(1-s))];return[h[(r=e[r])[0]],h[r[1]],h[r[2]]]},"rgb-hsl":function(t,i,n){var r=Math.max(t,i,n),e=Math.min(t,i,n),s=r-e,h=0===s,a=(r+e)/2;return[h?0:60*(r==t?(i-n)/s+(i<n?6:0):r==i?(n-t)/s+2:(t-i)/s+4),h?0:a<.5?s/(r+e):s/(2-r-e),a]},"hsl-rgb":function(t,i,n){if(0===i)return[n,n,n];for(var r=[(t=(t/360%1+1)%1)+1/3,t,t-1/3],e=n<.5?n*(1+i):n+i-n*i,s=2*n-e,h=[],a=0;a<3;a++){var u=r[a];u<0&&(u+=1),u>1&&(u-=1),h[a]=6*u<1?s+6*(e-s)*u:2*u<1?e:3*u<2?s+(e-s)*(2/3-u)*6:s}return h},"rgb-gray":function(t,i,n){return[.2989*t+.587*i+.114*n]},"gray-rgb":function(t){return[t,t,t]},"gray-hsb":function(t){return[0,0,t]},"gray-hsl":function(t){return[0,0,t]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return f.each(i,(function(t,r){n[r]=[],f.each(t,(function(t,e){var s=f.capitalize(t),h=/^(hue|saturation)$/.test(t),a=n[r][e]="gradient"===r?"gradient"===t?function(t){var i=this._components[0];return i!==(t=G.read(Array.isArray(t)?t:arguments,0,{readNull:!0}))&&(i&&i._removeOwner(this),t&&t._addOwner(this)),t}:function(){return w.read(arguments,0,{readNull:"highlight"===t,clone:!0})}:function(t){return null==t||isNaN(t)?0:+t};this["get"+s]=function(){return this._type===r||h&&/^hs[bl]$/.test(this._type)?this._components[e]:this._convert(r)[e]},this["set"+s]=function(t){this._type===r||h&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(r),this._properties=i[r],this._type=r),this._components[e]=a.call(this,t),this._changed()}}),this)}),{_class:"Color",_readIndex:!0,initialize:function e(s){var h,a,o,c,l=arguments,v=this.__read,d=0;Array.isArray(s)&&(s=(l=s)[0]);var p=null!=s&&typeof s;if("string"===p&&s in i&&(h=s,s=l[1],Array.isArray(s)?(a=s,o=l[2]):(v&&(d=1),l=f.slice(l,1),p=typeof s)),!a){if(c="number"===p?l:"object"===p&&null!=s.length?s:null){h||(h=c.length>=3?"rgb":"gray");var g=i[h].length;o=c[g],v&&(d+=c===arguments?g+(null!=o?1:0):1),c.length>g&&(c=f.slice(c,0,g))}else if("string"===p){var m=function(i){var n,e=i.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||i.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),s="rgb";if(e){var h=e[4]?4:3;n=new Array(h);for(var a=0;a<h;a++){var o=e[a+1];n[a]=parseInt(1==o.length?o+o:o,16)/255}}else if(e=i.match(/^(rgb|hsl)a?\((.*)\)$/)){s=e[1],n=e[2].trim().split(/[,\s]+/g);for(var f="hsl"===s,c=(a=0,Math.min(n.length,4));a<c;a++){var l=n[a];if(o=parseFloat(l),f)if(0===a){var v=l.match(/([a-z]*)$/)[1];o*={turn:360,rad:180/Math.PI,grad:.9}[v]||1}else a<3&&(o/=100);else a<3&&(o/=/%$/.test(l)?100:255);n[a]=o}}else{var d=r[i];if(!d)if(u){t||((t=ut.getContext(1,1,{willReadFrequently:!0})).globalCompositeOperation="copy"),t.fillStyle="rgba(0,0,0,0)",t.fillStyle=i,t.fillRect(0,0,1,1);var p=t.getImageData(0,0,1,1).data;d=r[i]=[p[0]/255,p[1]/255,p[2]/255]}else d=[0,0,0];n=d.slice()}return[s,n]}(s);h=m[0],4===(a=m[1]).length&&(o=a[3],a.length--)}else if("object"===p)if(s.constructor===e){if(h=s._type,a=s._components.slice(),o=s._alpha,"gradient"===h)for(var w=1,y=a.length;w<y;w++){var b=a[w];b&&(a[w]=b.clone())}}else if(s.constructor===G)h="gradient",c=l;else{var _=i[h="hue"in s?"lightness"in s?"hsl":"hsb":"gradient"in s||"stops"in s||"radial"in s?"gradient":"gray"in s?"gray":"rgb"],x=n[h];this._components=a=[];for(w=0,y=_.length;w<y;w++){null==(S=s[_[w]])&&!w&&"gradient"===h&&"stops"in s&&(S={stops:s.stops,radial:s.radial}),null!=(S=x[w].call(this,S))&&(a[w]=S)}o=s.alpha}v&&h&&(d=1)}if(this._type=h||"rgb",!a){this._components=a=[];for(w=0,y=(x=n[this._type]).length;w<y;w++){var S;null!=(S=x[w].call(this,c&&c[w]))&&(a[w]=S)}}return this._components=a,this._properties=i[this._type],this._alpha=o,v&&(this.__read=d),this},set:"#initialize",_serialize:function(t,i){var n=this.getComponents();return f.serialize(/^(gray|rgb)$/.test(this._type)?n:[this._type].concat(n),t,!0,i)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(t){var i;return this._type===t?this._components.slice():(i=s[this._type+"-"+t])?i.apply(this,this._components):s["rgb-"+t].apply(this,s[this._type+"-rgb"].apply(this,this._components))},convert:function(t){return new $(t,this._convert(t),this._alpha)},getType:function(){return this._type},setType:function(t){this._components=this._convert(t),this._properties=i[t],this._type=t},getComponents:function(){var t=this._components.slice();return null!=this._alpha&&t.push(this._alpha),t},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(t){this._alpha=null==t?null:Math.min(Math.max(t,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(t){var i=f.isPlainValue(t,!0)?$.read(arguments):t;return i===this||i&&this._class===i._class&&this._type===i._type&&this.getAlpha()===i.getAlpha()&&f.equals(this._components,i._components)||!1},toString:function(){for(var t=this._properties,i=[],n="gradient"===this._type,r=p.instance,e=0,s=t.length;e<s;e++){var h=this._components[e];null!=h&&i.push(t[e]+": "+(n?h:r.number(h)))}return null!=this._alpha&&i.push("alpha: "+r.number(this._alpha)),"{ "+i.join(", ")+" }"},toCSS:function(t){var i=this._convert("rgb"),n=t||null==this._alpha?1:this._alpha;function r(t){return Math.round(255*(t<0?0:t>1?1:t))}return i=[r(i[0]),r(i[1]),r(i[2])],n<1&&i.push(n<0?0:n),t?"#"+((1<<24)+(i[0]<<16)+(i[1]<<8)+i[2]).toString(16).slice(1):(4==i.length?"rgba(":"rgb(")+i.join(",")+")"},toCanvasStyle:function(t,i){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();var n,r=this._components,e=r[0],s=e._stops,h=r[1],a=r[2],u=r[3],o=i&&i.inverted();if(o&&(h=o._transformPoint(h),a=o._transformPoint(a),u&&(u=o._transformPoint(u))),e._radial){var f=a.getDistance(h);if(u){var c=u.subtract(h);c.getLength()>f&&(u=h.add(c.normalize(f-.1)))}var l=u||h;n=t.createRadialGradient(l.x,l.y,0,h.x,h.y,f)}else n=t.createLinearGradient(h.x,h.y,a.x,a.y);for(var v=0,d=s.length;v<d;v++){var p=s[v],g=p._offset;n.addColorStop(null==g?v/(d-1):g,p._color.toCanvasStyle())}return this._canvasStyle=n},transform:function(t){if("gradient"===this._type){for(var i=this._components,n=1,r=i.length;n<r;n++){var e=i[n];t._transformPoint(e,e,!0)}this._changed()}},statics:{_types:i,random:function(){var t=Math.random;return new $(t(),t(),t())},_setOwner:function(t,i,n){return t&&(t._owner&&i&&t._owner!==i&&(t=t.clone()),!t._owner^!i&&(t._owner=i||null,t._setter=n||null)),t}}})},new function(){return f.each({add:function(t,i){return t+i},subtract:function(t,i){return t-i},multiply:function(t,i){return t*i},divide:function(t,i){return t/i}},(function(t,i){this[i]=function(i){i=$.read(arguments);for(var n=this._type,r=this._components,e=i._convert(n),s=0,h=r.length;s<h;s++)e[s]=t(r[s],e[s]);return new $(n,e,null!=this._alpha?t(this._alpha,i.getAlpha()):null)}}),{})}),G=f.extend({_class:"Gradient",initialize:function(t,i){this._id=m.get(),t&&f.isPlainObject(t)&&(this.set(t),t=i=null),null==this._stops&&this.setStops(t||["white","black"]),null==this._radial&&this.setRadial("string"==typeof i&&"radial"===i||i||!1)},_serialize:function(t,i){return i.add(this,(function(){return f.serialize([this._stops,this._radial],t,!0,i)}))},_changed:function(){for(var t=0,i=this._owners&&this._owners.length;t<i;t++)this._owners[t]._changed()},_addOwner:function(t){this._owners||(this._owners=[]),this._owners.push(t)},_removeOwner:function(t){var i=this._owners?this._owners.indexOf(t):-1;-1!=i&&(this._owners.splice(i,1),this._owners.length||(this._owners=a))},clone:function(){for(var t=[],i=0,n=this._stops.length;i<n;i++)t[i]=this._stops[i].clone();return new G(t,this._radial)},getStops:function(){return this._stops},setStops:function(t){if(t.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var i=this._stops;if(i)for(var n=0,r=i.length;n<r;n++)i[n]._owner=a;for(n=0,r=(i=this._stops=K.readList(t,0,{clone:!0})).length;n<r;n++)i[n]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(t){this._radial=t,this._changed()},equals:function(t){if(t===this)return!0;if(t&&this._class===t._class){var i=this._stops,n=t._stops,r=i.length;if(r===n.length){for(var e=0;e<r;e++)if(!i[e].equals(n[e]))return!1;return!0}}return!1}}),K=f.extend({_class:"GradientStop",initialize:function(t,i){var n=t,r=i;"object"==typeof t&&i===a&&(Array.isArray(t)&&"number"!=typeof t[0]?(n=t[0],r=t[1]):("color"in t||"offset"in t||"rampPoint"in t)&&(n=t.color,r=t.offset||t.rampPoint||0)),this.setColor(n),this.setOffset(r)},clone:function(){return new K(this._color.clone(),this._offset)},_serialize:function(t,i){var n=this._color,r=this._offset;return f.serialize(null==r?[n]:[n,r],t,!0,i)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(t){this._offset=t,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){$._setOwner(this._color,null),this._color=$._setOwner($.read(arguments,0),this,"setColor"),this._changed()},equals:function(t){return t===this||t&&this._class===t._class&&this._color.equals(t._color)&&this._offset==t._offset||!1}}),X=f.extend(new function(){var t={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new w,selectedColor:null},i=f.set({},t,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),n=f.set({},i,{fillColor:new $}),r={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},e={beans:!0},s={_class:"Style",beans:!0,initialize:function(r,e,s){this._values={},this._owner=e,this._project=e&&e._project||s||lt.project,this._defaults=!e||e instanceof I?i:e instanceof V?n:t,r&&this.set(r)}};return f.each(i,(function(t,i){var n=/Color$/.test(i),h="shadowOffset"===i,u=f.capitalize(i),o=r[i],c="set"+u,l="get"+u;s[c]=function(t){var r=this._owner,e=r&&r._children,s=e&&e.length>0&&!(r instanceof U);if(s)for(var h=0,a=e.length;h<a;h++)e[h]._style[c](t);if(("selectedColor"===i||!s)&&i in this._defaults){var u=this._values[i];u!==t&&(n&&(u&&($._setOwner(u,null),u._canvasStyle=null),t&&t.constructor===$&&(t=$._setOwner(t,r,s&&c))),this._values[i]=t,r&&r._changed(o||129))}},s[l]=function(t){var r=this._owner,e=r&&r._children,s=e&&e.length>0&&!(r instanceof U);if(s&&!t)for(var u=0,o=e.length;u<o;u++){var v=e[u]._style[l]();if(u){if(!f.equals(d,v))return a}else d=v}else if(i in this._defaults){var d;if((d=this._values[i])===a)(d=this._defaults[i])&&d.clone&&(d=d.clone());else{var p=n?$:h?w:null;!p||d&&d.constructor===p||(this._values[i]=d=p.read([d],0,{readNull:!0,clone:!0}))}}return d&&n&&(d=$._setOwner(d,r,s&&c)),d},e[l]=function(t){return this._style[l](t)},e[c]=function(t){this._style[c](t)}})),f.each({Font:"FontFamily",WindingRule:"FillRule"},(function(t,i){var n="get"+i,r="set"+i;s[n]=e[n]="#get"+t,s[r]=e[r]="#set"+t})),E.inject(e),s},{set:function(t){var i=t instanceof X,n=i?t._values:t;if(n)for(var r in n)if(r in this._defaults){var e=n[r];this[r]=e&&i&&e.clone?e.clone():e}},equals:function(t){function i(t,i,n){var r=t._values,e=i._values,s=i._defaults;for(var h in r){var u=r[h],o=e[h];if(!(n&&h in e||f.equals(u,o===a?s[h]:o)))return!1}return!0}return t===this||t&&this._class===t._class&&i(this,t)&&i(t,this,!0)||!1},_dispose:function(){var t;(t=this.getFillColor())&&(t._canvasStyle=null),(t=this.getStrokeColor())&&(t._canvasStyle=null),(t=this.getShadowColor())&&(t._canvasStyle=null)},hasFill:function(){var t=this.getFillColor();return!!t&&t.alpha>0},hasStroke:function(){var t=this.getStrokeColor();return!!t&&t.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var t=this.getShadowColor();return!!t&&t.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var t=this.getFontSize();return this.getFontWeight()+" "+t+(/[a-z]/i.test(t+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function t(){var i=t.base.call(this),n=this.getFontSize();return/pt|em|%|px/.test(n)&&(n=this.getView().getPixelSize(n)),null!=i?i:1.2*n}}),J=new function(){function t(t,i,n,r){for(var e=["","webkit","moz","Moz","ms","o"],s=i[0].toUpperCase()+i.substring(1),h=0;h<6;h++){var a=e[h],u=a?a+s:i;if(u in t){if(!n)return t[u];t[u]=r;break}}}return{getStyles:function(t){var i=t&&9!==t.nodeType?t.ownerDocument:t,n=i&&i.defaultView;return n&&n.getComputedStyle(t,"")},getBounds:function(t,i){var n,r=t.ownerDocument,e=r.body,s=r.documentElement;try{n=t.getBoundingClientRect()}catch(t){n={left:0,top:0,width:0,height:0}}var h=n.left-(s.clientLeft||e.clientLeft||0),a=n.top-(s.clientTop||e.clientTop||0);if(!i){var u=r.defaultView;h+=u.pageXOffset||s.scrollLeft||e.scrollLeft,a+=u.pageYOffset||s.scrollTop||e.scrollTop}return new x(h,a,n.width,n.height)},getViewportBounds:function(t){var i=t.ownerDocument,n=i.defaultView,r=i.documentElement;return new x(0,0,n.innerWidth||r.clientWidth,n.innerHeight||r.clientHeight)},getOffset:function(t,i){return J.getBounds(t,i).getPoint()},getSize:function(t){return J.getBounds(t,!0).getSize()},isInvisible:function(t){return J.getSize(t).equals(new b(0,0))},isInView:function(t){return!J.isInvisible(t)&&J.getViewportBounds(t).intersects(J.getBounds(t,!0))},isInserted:function(t){return o.body.contains(t)},getPrefixed:function(i,n){return i&&t(i,n)},setPrefixed:function(i,n,r){if("object"==typeof n)for(var e in n)t(i,e,!0,n[e]);else t(i,n,!0,r)}}},Z={add:function(t,i){if(t)for(var n in i)for(var r=i[n],e=n.split(/[\s,]+/g),s=0,h=e.length;s<h;s++){var a=e[s],u=t===o&&("touchstart"===a||"touchmove"===a)&&{passive:!1};t.addEventListener(a,r,u)}},remove:function(t,i){if(t)for(var n in i)for(var r=i[n],e=n.split(/[\s,]+/g),s=0,h=e.length;s<h;s++)t.removeEventListener(e[s],r,!1)},getPoint:function(t){var i=t.targetTouches?t.targetTouches.length?t.targetTouches[0]:t.changedTouches[0]:t;return new w(i.pageX||i.clientX+o.documentElement.scrollLeft,i.pageY||i.clientY+o.documentElement.scrollTop)},getTarget:function(t){return t.target||t.srcElement},getRelatedTarget:function(t){return t.relatedTarget||t.toElement},getOffset:function(t,i){return Z.getPoint(t).subtract(J.getOffset(i||Z.getTarget(t)))}};Z.requestAnimationFrame=new function(){var t,i=J.getPrefixed(u,"requestAnimationFrame"),n=!1,r=[];function e(){var t=r;r=[];for(var s=0,h=t.length;s<h;s++)t[s]();(n=i&&r.length)&&i(e)}return function(s){r.push(s),i?n||(i(e),n=!0):t||(t=setInterval(e,1e3/60))}};var Q=f.extend(c,{_class:"View",initialize:function t(i,n){function r(t){return n[t]||parseInt(n.getAttribute(t),10)}function e(){var t=J.getSize(n);return t.isNaN()||t.isZero()?new b(r("width"),r("height")):t}var s;if(u&&n){this._id=n.getAttribute("id"),null==this._id&&n.setAttribute("id",this._id="paper-view-"+t._id++),Z.add(n,this._viewEvents);var h="none";if(J.setPrefixed(n.style,{userDrag:h,userSelect:h,touchCallout:h,contentZooming:h,tapHighlightColor:"rgba(0,0,0,0)"}),l.hasAttribute(n,"resize")){var a=this;Z.add(u,this._windowEvents={resize:function(){a.setViewSize(e())}})}if(s=e(),l.hasAttribute(n,"stats")&&"undefined"!=typeof Stats){this._stats=new Stats;var f=this._stats.domElement,c=f.style,v=J.getOffset(n);c.position="absolute",c.left=v.x+"px",c.top=v.y+"px",o.body.appendChild(f)}}else s=new b(n),n=null;this._project=i,this._scope=i._scope,this._element=n,this._pixelRatio||(this._pixelRatio=u&&u.devicePixelRatio||1),this._setElementSize(s.width,s.height),this._viewSize=s,t._views.push(this),t._viewsById[this._id]=this,(this._matrix=new k)._owner=this,t._focused||(t._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!lt.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;Q._focused===this&&(Q._focused=null),Q._views.splice(Q._views.indexOf(this),1),delete Q._viewsById[this._id];var t=this._project;return t._view===this&&(t._view=null),Z.remove(this._element,this._viewEvents),Z.remove(u,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:f.each(E._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),(function(t){this[t]={}}),{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(t){this._autoUpdate=t,t&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var t=this;Z.requestAnimationFrame((function(){if(t._requested=!1,t._animate){t.requestUpdate();var i=t._element;J.getPrefixed(o,"hidden")&&"true"!==l.getAttribute(i,"keepalive")||!J.isInView(i)||t._handleFrame()}t._autoUpdate&&t.update()})),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){lt=this._scope;var t=Date.now()/1e3,i=this._last?t-this._last:0;this._last=t,this.emit("frame",new f({delta:i,time:this._time+=i,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(t,i){var n=this._frameItems;i?(n[t._id]={item:t,time:0,count:0},1==++this._frameItemCount&&this.on("frame",this._handleFrameItems)):(delete n[t._id],0==--this._frameItemCount&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(t){for(var i in this._frameItems){var n=this._frameItems[i];n.item.emit("frame",new f(t,{time:n.time+=t.delta,count:n.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=a},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var t=this._viewSize;return new _(t.width,t.height,this,"setViewSize")},setViewSize:function(){var t=b.read(arguments),i=t.subtract(this._viewSize);i.isZero()||(this._setElementSize(t.width,t.height),this._viewSize.set(t),this._changed(),this.emit("resize",{size:t,delta:i}),this._autoUpdate&&this.update())},_setElementSize:function(t,i){var n=this._element;n&&(n.width!==t&&(n.width=t),n.height!==i&&(n.height=i))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new x(new w,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return J.isInView(this._element)},isInserted:function(){return J.isInserted(this._element)},getPixelSize:function(t){var i,n=this._element;if(n){var r=n.parentNode,e=o.createElement("div");e.style.fontSize=t,r.appendChild(e),i=parseFloat(J.getStyles(e).fontSize),r.removeChild(e)}else i=parseFloat(i);return i},getTextWidth:function(t,i){return 0}},f.each(["rotate","scale","shear","skew"],(function(t){var i="rotate"===t;this[t]=function(){var n=arguments,r=(i?f:w).read(n),e=w.read(n,0,{readNull:!0});return this.transform((new k)[t](r,e||this.getCenter(!0)))}}),{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var t=new k;return this.transform(t.translate.apply(t,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var t=w.read(arguments);this.translate(this.getCenter().subtract(t))},getZoom:function(){var t=this._decompose().scaling;return(t.x+t.y)/2},setZoom:function(t){this.transform((new k).scale(t/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(t){var i=this.getRotation();null!=i&&null!=t&&this.rotate(t-i)},getScaling:function(){var t=this._decompose().scaling;return new y(t.x,t.y,this,"setScaling")},setScaling:function(){var t=this.getScaling(),i=w.read(arguments,0,{clone:!0,readNull:!0});t&&i&&this.scale(i.x/t.x,i.y/t.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.set.apply(t,arguments)},transform:function(t){this._matrix.append(t)},scrollBy:function(){this.translate(w.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(w.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(w.read(arguments))},getEventPoint:function(t){return this.viewToProject(Z.getOffset(t,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(t,i){return o&&"string"==typeof i&&(i=o.getElementById(i)),new(u?Y:Q)(t,i)}}},new function(){if(u){var t,i,n,r,e,s=!1,h=!1,a=u.navigator;a.pointerEnabled||a.msPointerEnabled?(n="pointerdown MSPointerDown",r="pointermove MSPointerMove",e="pointerup pointercancel MSPointerUp MSPointerCancel"):(n="touchstart",r="touchmove",e="touchend touchcancel","ontouchstart"in u&&a.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(n+=" mousedown",r+=" mousemove",e+=" mouseup"));var f={},c={mouseout:function(t){var i=Q._focused,n=Z.getRelatedTarget(t);if(i&&(!n||"HTML"===n.nodeName)){var r=Z.getOffset(t,i._element),e=r.x,s=Math.abs,h=s(e),a=h-(1<<25);r.x=s(a)<h?a*(e<0?-1:1):e,E(i,t,i.viewToProject(r))}},scroll:M};f[n]=function(t){var i=Q._focused=C(t);s||(s=!0,i._handleMouseEvent("mousedown",t))},c[r]=function(n){var r=Q._focused;if(!h){var e=C(n);e?r!==e&&(r&&E(r,n),t||(t=r),r=Q._focused=i=e):i&&i===r&&(t&&!t.isInserted()&&(t=null),r=Q._focused=t,t=null,M())}r&&E(r,n)},c[n]=function(){h=!0},c[e]=function(t){var i=Q._focused;i&&s&&i._handleMouseEvent("mouseup",t),h=s=!1},Z.add(o,c),Z.add(u,{load:M});var l,v,d,p,g,m,w,y,b=!1,_=!1,x={doubleclick:"click",mousedrag:"mousemove"},S=!1,k={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:f,_handleMouseEvent:function(t,i,n){var r=this._itemEvents,e=r.native[t],h="mousemove"===t,a=this._scope.tool,u=this;function o(t){return r.virtual[t]||u.responds(t)||a&&a.responds(t)}h&&s&&o("mousedrag")&&(t="mousedrag"),n||(n=this.getEventPoint(i));var f=this.getBounds().contains(n),c=e&&f&&u._project.hitTest(n,{tolerance:0,fill:!0,stroke:!0}),x=c&&c.item||null,k=!1,C={};if(C[t.substr(5)]=!0,e&&x!==p&&(p&&I(p,null,"mouseleave",i,n),x&&I(x,null,"mouseenter",i,n),p=x),S^f&&(I(this,null,f?"mouseenter":"mouseleave",i,n),f?this:null,k=!0),!f&&!C.drag||n.equals(v)||(P(this,x,h?t:"mousemove",i,n,v),k=!0),S=f,C.down&&f||C.up&&l){if(P(this,x,t,i,n,l),C.down){if(y=x===m&&Date.now()-w<300,d=m=x,!_&&x){for(var M=x;M&&!M.responds("mousedrag");)M=M._parent;M&&(g=x)}l=n}else C.up&&(_||x!==d||(w=Date.now(),P(this,x,y?"doubleclick":"click",i,n,l),y=!1),d=g=null);S=!1,k=!0}v=n,k&&a&&(b=a._handleMouseEvent(t,i,n,C)||b),!1!==i.cancelable&&(b&&!C.move||C.down&&o("mouseup"))&&i.preventDefault()},_handleKeyEvent:function(t,i,n,r){var e,s=this._scope,h=s.tool;function a(h){h.responds(t)&&(lt=s,h.emit(t,e=e||new it(t,i,n,r)))}this.isVisible()&&(a(this),h&&h.responds(t)&&a(h))},_countItemEvent:function(t,i){var n=this._itemEvents,r=n.native,e=n.virtual;for(var s in k)r[s]=(r[s]||0)+(k[s][t]||0)*i;e[t]=(e[t]||0)+i},statics:{updateFocus:M,_resetState:function(){s=h=b=S=!1,t=i=l=v=d=p=g=m=w=y=null}}}}function C(t){var i=Z.getTarget(t);return i.getAttribute&&Q._viewsById[i.getAttribute("id")]}function M(){var t=Q._focused;if(!t||!t.isVisible())for(var n=0,r=Q._views.length;n<r;n++)if((t=Q._views[n]).isVisible()){Q._focused=i=t;break}}function E(t,i,n){t._handleMouseEvent("mousemove",i,n)}function I(t,i,n,r,e,s,h){var a,u=!1;function o(t,n){if(t.responds(n)){if(a||(a=new rt(n,r,e,i||t,s?e.subtract(s):null)),t.emit(n,a)&&(b=!0,a.prevented&&(_=!0),a.stopped))return u=!0}else{var h=x[n];if(h)return o(t,h)}}for(;t&&t!==h&&!o(t,n);)t=t._parent;return u}function P(t,i,n,r,e,s){return t._project.removeOn(n),_=b=!1,g&&I(g,null,n,r,e,s)||i&&i!==g&&!i.isDescendant(g)&&I(i,null,"mousedrag"===n?"mousemove":n,r,e,s,g)||I(t,g||i||t,n,r,e,s)}}),Y=Q.extend({_class:"CanvasView",initialize:function(t,i){if(!(i instanceof u.HTMLCanvasElement)){var n=b.read(arguments,1);if(n.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+f.slice(arguments,1));i=ut.getCanvas(n)}var r=this._context=i.getContext("2d");if(r.save(),this._pixelRatio=1,!/^off|false$/.test(l.getAttribute(i,"hidpi"))){var e=u.devicePixelRatio||1,s=J.getPrefixed(r,"backingStorePixelRatio")||1;this._pixelRatio=e/s}Q.call(this,t,i),this._needsUpdate=!0},remove:function t(){return this._context.restore(),t.base.call(this)},_setElementSize:function t(i,n){var r=this._pixelRatio;if(t.base.call(this,i*r,n*r),1!==r){var e=this._element,s=this._context;if(!l.hasAttribute(e,"resize")){var h=e.style;h.width=i+"px",h.height=n+"px"}s.restore(),s.save(),s.scale(r,r)}},getContext:function(){return this._context},getPixelSize:function t(i){var n,r=lt.agent;if(r&&r.firefox)n=t.base.call(this,i);else{var e=this._context,s=e.font;e.font=i+" serif",n=parseFloat(e.font),e.font=s}return n},getTextWidth:function(t,i){var n=this._context,r=n.font,e=0;n.font=t;for(var s=0,h=i.length;s<h;s++)e=Math.max(e,n.measureText(i[s]).width);return n.font=r,e},update:function(){if(!this._needsUpdate)return!1;var t=this._project,i=this._context,n=this._viewSize;return i.clearRect(0,0,n.width+1,n.height+1),t&&t.draw(i,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),tt=f.extend({_class:"Event",initialize:function(t){this.event=t,this.type=t&&t.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return nt.modifiers}}),it=tt.extend({_class:"KeyEvent",initialize:function(t,i,n,r){this.type=t,this.event=i,this.key=n,this.character=r},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),nt=new function(){var t,i,n={"\t":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},r={tab:"\t",space:" ",enter:"\r"},e={},s={},h=new f({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var t=lt&&lt.agent;return t&&t.mac?this.meta:this.control}}});function c(t){var i=t.key||t.keyIdentifier;return i=/^U\+/.test(i)?String.fromCharCode(parseInt(i.substr(2),16)):/^Arrow[A-Z]/.test(i)?i.substr(5):"Unidentified"===i||i===a?String.fromCharCode(t.keyCode):i,n[i]||(i.length>1?f.hyphenate(i):i.toLowerCase())}function l(i,n,r,a){var u,o=Q._focused;if(e[n]=i,i?s[n]=r:delete s[n],n.length>1&&(u=f.camelize(n))in h){h[u]=i;var c=lt&&lt.agent;if("meta"===u&&c&&c.mac)if(i)t={};else{for(var v in t)v in s&&l(!1,v,t[v],a);t=null}}else i&&t&&(t[n]=r);o&&o._handleKeyEvent(i?"keydown":"keyup",a,n,r)}return Z.add(o,{keydown:function(t){var n=c(t),e=lt&&lt.agent;n.length>1||e&&e.chrome&&(t.altKey||e.mac&&t.metaKey||!e.mac&&t.ctrlKey)?l(!0,n,r[n]||(n.length>1?"":n),t):i=n},keypress:function(t){if(i){var n=c(t),r=t.charCode,e=r>=32?String.fromCharCode(r):n.length>1?"":n;n!==i&&(n=e.toLowerCase()),l(!0,n,e,t),i=null}},keyup:function(t){var i=c(t);i in s&&l(!1,i,s[i],t)}}),Z.add(u,{blur:function(t){for(var i in s)l(!1,i,s[i],t)}}),{modifiers:h,isDown:function(t){return!!e[t]}}},rt=tt.extend({_class:"MouseEvent",initialize:function(t,i,n,r,e){this.type=t,this.event=i,this.point=n,this.target=r,this.delta=e},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),et=tt.extend({_class:"ToolEvent",_item:null,initialize:function(t,i,n){this.tool=t,this.type=i,this.event=n},_choosePoint:function(t,i){return t||(i?i.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(t){this._point=t},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(t){this._lastPoint=t},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(t){this._downPoint=t},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(t){this._middlePoint=t},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(t){this._delta=t},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(t){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=t},getItem:function(){if(!this._item){var t=this.tool._scope.project.hitTest(this.getPoint());if(t){for(var i=t.item,n=i._parent;/^(Group|CompoundPath)$/.test(n._class);)i=n,n=n._parent;this._item=i}}return this._item},setItem:function(t){this._item=t},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),st=v.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(t){v.call(this),this._moveCount=-1,this._downCount=-1,this.set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(t){this._minDistance=t,null!=t&&null!=this._maxDistance&&t>this._maxDistance&&(this._maxDistance=t)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(t){this._maxDistance=t,null!=this._minDistance&&null!=t&&t<this._minDistance&&(this._minDistance=t)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(t){this._minDistance=this._maxDistance=t},_handleMouseEvent:function(t,i,n,r){lt=this._scope,r.drag&&!this.responds(t)&&(t="mousemove");var e=r.move||r.drag,s=this.responds(t),h=this.minDistance,a=this.maxDistance,u=!1,o=this;function f(t,i){var s=n,h=e?o._point:o._downPoint||s;if(e){if(o._moveCount>=0&&s.equals(h))return!1;if(h&&(null!=t||null!=i)){var a=s.subtract(h),u=a.getLength();if(u<(t||0))return!1;i&&(s=h.add(a.normalize(Math.min(u,i))))}o._moveCount++}return o._point=s,o._lastPoint=h||s,r.down&&(o._moveCount=-1,o._downPoint=s,o._downCount++),!0}function c(){s&&(u=o.emit(t,new et(o,t,i))||u)}if(r.down)f(),c();else if(r.up)f(null,a),c();else if(s)for(;f(h,a);)c();return u}}),ht=f.extend(c,{_class:"Tween",statics:{easings:new f({linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:2*(2-t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}})},initialize:function t(i,n,r,e,s,h){this.object=i;var a=typeof s,u="function"===a;this.type=u?a:"string"===a?s:"linear",this.easing=u?s:t.easings[this.type],this.duration=e,this.running=!1,this._then=null,this._startTime=null;var o=n||r;this._keys=o?Object.keys(o):[],this._parsedKeys=this._parseKeys(this._keys),this._from=o&&this._getState(n),this._to=o&&this._getState(r),!1!==h&&this.start()},then:function(t){return this._then=t,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(t){if(this.running){t>=1&&(t=1,this.running=!1);for(var i=this.easing(t),n=this._keys,r=function(n){return"function"==typeof n?n(i,t):n},e=0,s=n&&n.length;e<s;e++){var h=n[e],a=r(this._from[h]),u=r(this._to[h]),o=a&&u&&a.__add&&u.__add?u.__subtract(a).__multiply(i).__add(a):(u-a)*i+a;this._setProperty(this._parsedKeys[h],o)}this.responds("update")&&this.emit("update",new f({progress:t,factor:i})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(t){var i=this._startTime,n=i?(t-i)/this.duration:0;i||(this._startTime=t),this.update(n)},_getState:function(t){for(var i=this._keys,n={},r=0,e=i.length;r<e;r++){var s,h=i[r],a=this._parsedKeys[h],u=this._getProperty(a);if(t){var o=this._resolveValue(u,t[h]);this._setProperty(a,o),s=(s=this._getProperty(a))&&s.clone?s.clone():s,this._setProperty(a,u)}else s=u&&u.clone?u.clone():u;n[h]=s}return n},_resolveValue:function(t,i){if(i){if(Array.isArray(i)&&2===i.length){var n=i[0];return n&&n.match&&n.match(/^[+\-\*\/]=/)?this._calculate(t,n[0],i[1]):i}if("string"==typeof i){var r=i.match(/^[+\-*/]=(.*)/);if(r){var e=JSON.parse(r[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(t,i[0],e)}}}return i},_calculate:function(t,i,n){return lt.PaperScript.calculateBinary(t,i,n)},_parseKeys:function(t){for(var i={},n=0,r=t.length;n<r;n++){var e=t[n],s=e.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");i[e]=s.split("/")}return i},_getProperty:function(t,i){for(var n=this.object,r=0,e=t.length-(i||0);r<e&&n;r++)n=n[t[r]];return n},_setProperty:function(t,i){var n=this._getProperty(t,1);n&&(n[t[t.length-1]]=i)}}),at={request:function(t){var i=new h.XMLHttpRequest;return i.open((t.method||"get").toUpperCase(),t.url,f.pick(t.async,!0)),t.mimeType&&i.overrideMimeType(t.mimeType),i.onload=function(){var n=i.status;0===n||200===n?t.onLoad&&t.onLoad.call(i,i.responseText):i.onerror()},i.onerror=function(){var n=i.status,r='Could not load "'+t.url+'" (Status: '+n+")";if(!t.onError)throw new Error(r);t.onError(r,n)},i.send(null)}},ut=f.exports.CanvasProvider={canvases:[],getCanvas:function(t,i,n){if(!u)return null;var r,e=!0;"object"==typeof t&&(i=t.height,t=t.width),this.canvases.length?r=this.canvases.pop():(r=o.createElement("canvas"),e=!1);var s=r.getContext("2d",n||{});if(!s)throw new Error("Canvas "+r+" is unable to provide a 2D context.");return r.width===t&&r.height===i?e&&s.clearRect(0,0,t+1,i+1):(r.width=t,r.height=i),s.save(),r},getContext:function(t,i,n){var r=this.getCanvas(t,i,n);return r?r.getContext("2d",n||{}):null},release:function(t){var i=t&&t.canvas?t.canvas:t;i&&i.getContext&&(i.getContext("2d").restore(),this.canvases.push(i))}},ot=new function(){var t,i,n,r,e,s,h,a,u,o,c,l=Math.min,v=Math.max,d=Math.abs;function p(t,i,n){return.2989*t+.587*i+.114*n}function g(t,i,n,r){var e=r-p(t,i,n),s=(r=p(u=t+e,o=i+e,c=n+e),l(u,o,c)),h=v(u,o,c);if(s<0){var a=r-s;u=r+(u-r)*r/a,o=r+(o-r)*r/a,c=r+(c-r)*r/a}if(h>255){var f=255-r,d=h-r;u=r+(u-r)*f/d,o=r+(o-r)*f/d,c=r+(c-r)*f/d}}function m(t,i,n){return v(t,i,n)-l(t,i,n)}function w(t,i,n,r){var e,s=[t,i,n],h=v(t,i,n),a=l(t,i,n);e=0===l(a=a===t?0:a===i?1:2,h=h===t?0:h===i?1:2)?1===v(a,h)?2:1:0,s[h]>s[a]?(s[e]=(s[e]-s[a])*r/(s[h]-s[a]),s[h]=r):s[e]=s[h]=0,s[a]=0,u=s[0],o=s[1],c=s[2]}var y={multiply:function(){u=e*t/255,o=s*i/255,c=h*n/255},screen:function(){u=e+t-e*t/255,o=s+i-s*i/255,c=h+n-h*n/255},overlay:function(){u=e<128?2*e*t/255:255-2*(255-e)*(255-t)/255,o=s<128?2*s*i/255:255-2*(255-s)*(255-i)/255,c=h<128?2*h*n/255:255-2*(255-h)*(255-n)/255},"soft-light":function(){var r=t*e/255;u=r+e*(255-(255-e)*(255-t)/255-r)/255,o=(r=i*s/255)+s*(255-(255-s)*(255-i)/255-r)/255,c=(r=n*h/255)+h*(255-(255-h)*(255-n)/255-r)/255},"hard-light":function(){u=t<128?2*t*e/255:255-2*(255-t)*(255-e)/255,o=i<128?2*i*s/255:255-2*(255-i)*(255-s)/255,c=n<128?2*n*h/255:255-2*(255-n)*(255-h)/255},"color-dodge":function(){u=0===e?0:255===t?255:l(255,255*e/(255-t)),o=0===s?0:255===i?255:l(255,255*s/(255-i)),c=0===h?0:255===n?255:l(255,255*h/(255-n))},"color-burn":function(){u=255===e?255:0===t?0:v(0,255-255*(255-e)/t),o=255===s?255:0===i?0:v(0,255-255*(255-s)/i),c=255===h?255:0===n?0:v(0,255-255*(255-h)/n)},darken:function(){u=e<t?e:t,o=s<i?s:i,c=h<n?h:n},lighten:function(){u=e>t?e:t,o=s>i?s:i,c=h>n?h:n},difference:function(){(u=e-t)<0&&(u=-u),(o=s-i)<0&&(o=-o),(c=h-n)<0&&(c=-c)},exclusion:function(){u=e+t*(255-e-e)/255,o=s+i*(255-s-s)/255,c=h+n*(255-h-h)/255},hue:function(){w(t,i,n,m(e,s,h)),g(u,o,c,p(e,s,h))},saturation:function(){w(e,s,h,m(t,i,n)),g(u,o,c,p(e,s,h))},luminosity:function(){g(e,s,h,p(t,i,n))},color:function(){g(t,i,n,p(e,s,h))},add:function(){u=l(e+t,255),o=l(s+i,255),c=l(h+n,255)},subtract:function(){u=v(e-t,0),o=v(s-i,0),c=v(h-n,0)},average:function(){u=(e+t)/2,o=(s+i)/2,c=(h+n)/2},negation:function(){u=255-d(255-t-e),o=255-d(255-i-s),c=255-d(255-n-h)}},b=this.nativeModes=f.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],(function(t){this[t]=!0}),{}),_=ut.getContext(1,1,{willReadFrequently:!0});_&&(f.each(y,(function(t,i){var n="darken"===i,r=!1;_.save();try{_.fillStyle=n?"#300":"#a00",_.fillRect(0,0,1,1),_.globalCompositeOperation=i,_.globalCompositeOperation===i&&(_.fillStyle=n?"#a00":"#300",_.fillRect(0,0,1,1),r=_.getImageData(0,0,1,1).data[0]!==n?170:51)}catch(t){}_.restore(),b[i]=r})),ut.release(_)),this.process=function(f,l,v,d,p){var g=l.canvas,m="normal"===f;if(m||b[f])v.save(),v.setTransform(1,0,0,1,0,0),v.globalAlpha=d,m||(v.globalCompositeOperation=f),v.drawImage(g,p.x,p.y),v.restore();else{var w=y[f];if(!w)return;for(var _=v.getImageData(p.x,p.y,g.width,g.height),x=_.data,S=l.getImageData(0,0,g.width,g.height).data,k=0,C=x.length;k<C;k+=4){t=S[k],e=x[k],i=S[k+1],s=x[k+1],n=S[k+2],h=x[k+2],r=S[k+3],a=x[k+3],w();var M=r*d/255,E=1-M;x[k]=M*u+E*e,x[k+1]=M*o+E*s,x[k+2]=M*c+E*h,x[k+3]=r*d+E*a}v.putImageData(_,p.x,p.y)}}},ft=new function(){var t="http://www.w3.org/2000/svg",i="http://www.w3.org/2000/xmlns",n="http://www.w3.org/1999/xlink",r={href:n,xlink:i,xmlns:i+"/","xmlns:xlink":i+"/"};function e(t,i,n){for(var e in i){var s=i[e],h=r[e];"number"==typeof s&&n&&(s=n.number(s)),h?t.setAttributeNS(h,e,s):t.setAttribute(e,s)}return t}return{svg:t,xmlns:i,xlink:n,create:function(i,n,r){return e(o.createElementNS(t,i),n,r)},get:function(t,i){var n=r[i],e=n?t.getAttributeNS(n,i):t.getAttribute(i);return"null"===e?null:e},set:e}},ct=f.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(t,i){return!i&&(t instanceof R||t instanceof A||t instanceof V)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},(function(t,i){var n=f.capitalize(i),r=t[2];this[i]={type:t[1],property:i,attribute:t[0],toSVG:r,fromSVG:r&&f.each(r,(function(t,i){this[t]=i}),{}),exportFilter:t[3],get:"get"+n,set:"set"+n}}),{});new function(){var t;function i(i,n,r){var e,s=new f,h=i.getTranslation();n&&(i.isInvertible()?(e=(i=i._shiftless())._inverseTransform(h),h=null):e=new w,s[r?"cx":"x"]=e.x,s[r?"cy":"y"]=e.y);if(!i.isIdentity()){var a=i.decompose();if(a){var u=[],o=a.rotation,c=a.scaling,l=a.skewing;h&&!h.isZero()&&u.push("translate("+t.point(h)+")"),o&&u.push("rotate("+t.number(o)+")"),g.isZero(c.x-1)&&g.isZero(c.y-1)||u.push("scale("+t.point(c)+")"),l.x&&u.push("skewX("+t.number(l.x)+")"),l.y&&u.push("skewY("+t.number(l.y)+")"),s.transform=u.join(" ")}else s.transform="matrix("+i.getValues().join(",")+")"}return s}function n(n,r){for(var e=i(n._matrix),s=n._children,h=ft.create("g",e,t),a=0,u=s.length;a<u;a++){var f=s[a],c=l(f,r);if(c)if(f.isClipMask()){var v=ft.create("clipPath");v.appendChild(c),o(f,v,"clip"),ft.set(h,{"clip-path":"url(#"+v.id+")"})}else h.appendChild(c)}return h}function r(n){var r=n._type,e=n._radius,s=i(n._matrix,!0,"rectangle"!==r);if("rectangle"===r){r="rect";var h=n._size,a=h.width,u=h.height;s.x-=a/2,s.y-=u/2,s.width=a,s.height=u,e.isZero()&&(e=null)}return e&&("circle"===r?s.r=e:(s.rx=e.width,s.ry=e.height)),ft.create(r,s,t)}var e,s={Group:n,Layer:n,Raster:function(n,r){var e=i(n._matrix,!0),s=n.getSize(),h=n.getImage();return e.x-=s.width/2,e.y-=s.height/2,e.width=s.width,e.height=s.height,e.href=0==r.embedImages&&h&&h.src||n.toDataURL(),ft.create("image",e,t)},Path:function(n,e){var s=e.matchShapes;if(s){var h=n.toShape(!1);if(h)return r(h)}var a,u=n._segments,o=u.length,f=i(n._matrix);if(s&&o>=2&&!n.hasHandles())if(o>2){a=n._closed?"polygon":"polyline";for(var c=[],l=0;l<o;l++)c.push(t.point(u[l]._point));f.points=c.join(" ")}else{a="line";var v=u[0]._point,d=u[1]._point;f.set({x1:v.x,y1:v.y,x2:d.x,y2:d.y})}else a="path",f.d=n.getPathData(null,e.precision);return ft.create(a,f,t)},Shape:r,CompoundPath:function(n,r){var e=i(n._matrix),s=n.getPathData(null,r.precision);return s&&(e.d=s),ft.create("path",e,t)},SymbolItem:function(n,r){var e=i(n._matrix,!0),s=n._definition,h=u(s,"symbol"),a=s._item,f=a.getStrokeBounds();return h||((h=ft.create("symbol",{viewBox:t.rectangle(f)})).appendChild(l(a,r)),o(s,h,"symbol")),e.href="#"+h.id,e.x+=f.x,e.y+=f.y,e.width=f.width,e.height=f.height,e.overflow="visible",ft.create("use",e,t)},PointText:function(n){var r=ft.create("text",i(n._matrix,!0),t);return r.textContent=n._content,r}};function a(i,n,r){var e={},s=!r&&i.getParent(),h=[];return null!=i._name&&(e.id=i._name),f.each(ct,(function(n){var r=n.get,a=n.type,c=i[r]();if(n.exportFilter?n.exportFilter(i,c):!s||!f.equals(s[r](),c)){if("color"===a&&null!=c){var l=c.getAlpha();l<1&&(e[n.attribute+"-opacity"]=l)}"style"===a?h.push(n.attribute+": "+c):e[n.attribute]=null==c?"none":"color"===a?c.gradient?function(i){var n=u(i,"color");if(!n){var r,e=i.getGradient(),s=e._radial,h=i.getOrigin(),a=i.getDestination();if(s){r={cx:h.x,cy:h.y,r:h.getDistance(a)};var f=i.getHighlight();f&&(r.fx=f.x,r.fy=f.y)}else r={x1:h.x,y1:h.y,x2:a.x,y2:a.y};r.gradientUnits="userSpaceOnUse",n=ft.create((s?"radial":"linear")+"Gradient",r,t);for(var c=e._stops,l=0,v=c.length;l<v;l++){var d=c[l],p=d._color,g=p.getAlpha(),m=d._offset;r={offset:null==m?l/(v-1):m},p&&(r["stop-color"]=p.toCSS(!0)),g<1&&(r["stop-opacity"]=g),n.appendChild(ft.create("stop",r,t))}o(i,n,"color")}return"url(#"+n.id+")"}(c):c.toCSS(!0):"array"===a?c.join(","):"lookup"===a?n.toSVG[c]:c}})),h.length&&(e.style=h.join(";")),1===e.opacity&&delete e.opacity,i._visible||(e.visibility="hidden"),ft.set(n,e,t)}function u(t,i){return e||(e={ids:{},svgs:{}}),t&&e.svgs[i+"-"+(t._id||t.__id||(t.__id=m.get("svg")))]}function o(t,i,n){e||u();var r=e.ids[n]=(e.ids[n]||0)+1;i.id=n+"-"+r,e.svgs[n+"-"+(t._id||t.__id)]=i}function c(t,i){var n=t,r=null;if(e){for(var s in n="svg"===t.nodeName.toLowerCase()&&t,e.svgs)r||(n||(n=ft.create("svg")).appendChild(t),r=n.insertBefore(ft.create("defs"),n.firstChild)),r.appendChild(e.svgs[s]);e=null}return i.asString?(new h.XMLSerializer).serializeToString(n):n}function l(t,i,n){var r=s[t._class],e=r&&r(t,i);if(e){var h=i.onExport;h&&(e=h(t,e,i)||e);var u=JSON.stringify(t._data);u&&"{}"!==u&&"null"!==u&&e.setAttribute("data-paper-data",u)}return e&&a(t,e,n)}function v(i){return i||(i={}),t=new p(i.precision),i}E.inject({exportSVG:function(t){return c(l(this,t=v(t),!0),t)}}),M.inject({exportSVG:function(n){n=v(n);var r=this._children,e=this.getView(),s=f.pick(n.bounds,"view"),h=n.matrix||"view"===s&&e._matrix,a=h&&k.read([h]),u="view"===s?new x([0,0],e.getViewSize()):"content"===s?E._getBounds(r,a,{stroke:!0}).rect:x.read([s],0,{readNull:!0}),o={version:"1.1",xmlns:ft.svg,"xmlns:xlink":ft.xlink};u&&(o.width=u.width,o.height=u.height,(u.x||0===u.x||u.y||0===u.y)&&(o.viewBox=t.rectangle(u)));var d=ft.create("svg",o,t),p=d;a&&!a.isIdentity()&&(p=d.appendChild(ft.create("g",i(a),t)));for(var g=0,m=r.length;g<m;g++)p.appendChild(l(r[g],n,!0));return c(d,n)}})},new function(){var t,i={};function n(i,n,r,e,s,h){var a=ft.get(i,n)||h,u=null==a?e?null:r?"":0:r?a:parseFloat(a);return/%\s*$/.test(a)?u/100*(s?1:t[/x|^width/.test(n)?"width":"height"]):u}function r(t,i,r,e,s,h,a){return i=n(t,i||"x",!1,e,s,h),r=n(t,r||"y",!1,e,s,a),!e||null!=i&&null!=r?new w(i,r):null}function e(t,i,r,e,s){return i=n(t,i||"width",!1,e,s),r=n(t,r||"height",!1,e,s),!e||null!=i&&null!=r?new b(i,r):null}function s(t,i,n){return"none"===t?null:"number"===i?parseFloat(t):"array"===i?t?t.split(/[\s,]+/g).map(parseFloat):[]:"color"===i?S(t)||t:"lookup"===i?n[t]:t}function c(t,i,n,r){var e=t.childNodes,s="clippath"===i,h="defs"===i,a=new I,u=a._project,o=u._currentStyle,f=[];if(s||h||(a=_(a,t,r),u._currentStyle=a._style.clone()),r)for(var c=t.querySelectorAll("defs"),l=0,v=c.length;l<v;l++)C(c[l],n,!1);for(l=0,v=e.length;l<v;l++){var d,p=e[l];1!==p.nodeType||/^defs$/i.test(p.nodeName)||!(d=C(p,n,!1))||d instanceof L||f.push(d)}return a.addChildren(f),s&&(a=_(a.reduce(),t,r)),u._currentStyle=o,(s||h)&&(a.remove(),a=null),a}function l(t,i){for(var n=t.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),r=[],e=0,s=n.length;e<s;e+=2)r.push(new w(parseFloat(n[e]),parseFloat(n[e+1])));var h=new j(r);return"polygon"===i&&h.closePath(),h}function v(t,e){var s,h=(n(t,"href",!0)||"").substring(1),a="radialgradient"===e;if(h)(s=i[h].getGradient())._radial^a&&((s=s.clone())._radial=a);else{for(var u=t.childNodes,o=[],f=0,c=u.length;f<c;f++){var l=u[f];1===l.nodeType&&o.push(_(new K,l))}s=new G(o,a)}var v,d,p,g="userSpaceOnUse"!==n(t,"gradientUnits",!0);return a?(d=(v=r(t,"cx","cy",!1,g,"50%","50%")).add(n(t,"r",!1,!1,g,"50%"),0),p=r(t,"fx","fy",!0,g)):(v=r(t,"x1","y1",!1,g,"0%","0%"),d=r(t,"x2","y2",!1,g,"100%","0%")),_(new $(s,v,d,p),t)._scaleToBounds=g,null}var d={"#document":function(t,i,n,r){for(var e=t.childNodes,s=0,h=e.length;s<h;s++){var a=e[s];if(1===a.nodeType)return C(a,n,r)}},g:c,svg:c,clippath:c,polygon:l,polyline:l,path:function(t){return R.create(t.getAttribute("d"))},lineargradient:v,radialgradient:v,image:function(t){var i=new T(n(t,"href",!0));return i.on("load",(function(){var i=e(t);this.setSize(i);var n=r(t).add(i.divide(2));this._matrix.append((new k).translate(n))})),i},symbol:function(t,i,n,r){return new L(c(t,i,n,r),!0)},defs:c,use:function(t){var e=(n(t,"href",!0)||"").substring(1),s=i[e],h=r(t);return s?s instanceof L?s.place(h):s.clone().translate(h):null},circle:function(t){return new A.Circle(r(t,"cx","cy"),n(t,"r"))},ellipse:function(t){return new A.Ellipse({center:r(t,"cx","cy"),radius:e(t,"rx","ry")})},rect:function(t){return new A.Rectangle(new x(r(t),e(t)),e(t,"rx","ry"))},line:function(t){return new j.Line(r(t,"x1","y1"),r(t,"x2","y2"))},text:function(t){var i=new W(r(t).add(r(t,"dx","dy")));return i.setContent(t.textContent.trim()||""),i},switch:c};function p(t,i,n,r){if(t.transform){for(var e=(r.getAttribute(n)||"").split(/\)\s*/g),s=new k,h=0,a=e.length;h<a;h++){var u=e[h];if(!u)break;for(var o=u.split(/\(\s*/),f=o[0],c=o[1].split(/[\s,]+/g),l=0,v=c.length;l<v;l++)c[l]=parseFloat(c[l]);switch(f){case"matrix":s.append(new k(c[0],c[1],c[2],c[3],c[4],c[5]));break;case"rotate":s.rotate(c[0],c[1]||0,c[2]||0);break;case"translate":s.translate(c[0],c[1]||0);break;case"scale":s.scale(c);break;case"skewX":s.skew(c[0],0);break;case"skewY":s.skew(0,c[0])}}t.transform(s)}}function g(t,i,n){var r="fill-opacity"===n?"getFillColor":"getStrokeColor",e=t[r]&&t[r]();e&&e.setAlpha(parseFloat(i))}var m=f.set(f.each(ct,(function(t){this[t.attribute]=function(i,n){if(i[t.set]&&(i[t.set](s(n,t.type,t.fromSVG)),"color"===t.type)){var r=i[t.get]();if(r&&r._scaleToBounds){var e=i.getBounds();r.transform((new k).translate(e.getPoint()).scale(e.getSize()))}}}}),{}),{id:function(t,n){i[n]=t,t.setName&&t.setName(n)},"clip-path":function(t,i){var n=S(i);if(n){if((n=n.clone()).setClipMask(!0),!(t instanceof I))return new I(n,t);t.insertChild(0,n)}},gradientTransform:p,transform:p,"fill-opacity":g,"stroke-opacity":g,visibility:function(t,i){t.setVisible&&t.setVisible("visible"===i)},display:function(t,i){t.setVisible&&t.setVisible(null!==i)},"stop-color":function(t,i){t.setColor&&t.setColor(i)},"stop-opacity":function(t,i){t._color&&t._color.setAlpha(parseFloat(i))},offset:function(t,i){if(t.setOffset){var n=i.match(/(.*)%$/);t.setOffset(n?n[1]/100:parseFloat(i))}},viewBox:function(t,i,n,r,h){var a,u=new x(s(i,"array")),o=e(r,null,null,!0);if(t instanceof I){var f=o?o.divide(u.getSize()):1,c=(new k).scale(f).translate(u.getPoint().negate());a=t}else t instanceof L&&(o&&u.setSize(o),a=t._item);if(a){if("visible"!==y(r,"overflow",h)){var l=new A.Rectangle(u);l.setClipMask(!0),a.addChild(l)}c&&a.transform(c)}}});function y(t,i,n){var r=t.attributes[i],e=r&&r.value;if(!e&&t.style){var s=f.camelize(i);(e=t.style[s])||n.node[s]===n.parent[s]||(e=n.node[s])}return e?"none"===e?null:e:a}function _(t,i,n){var r=i.parentNode,e={node:J.getStyles(i)||{},parent:!n&&!/^defs$/i.test(r.tagName)&&J.getStyles(r)||{}};return f.each(m,(function(n,r){var s=y(i,r,e);t=s!==a&&n(t,s,r,i,e)||t})),t}function S(t){var n=t&&t.match(/\((?:["'#]*)([^"')]+)/),r=n&&n[1],e=r&&i[u?r.replace(u.location.href.split("#")[0]+"#",""):r];return e&&e._scaleToBounds&&((e=e.clone())._scaleToBounds=!0),e}function C(n,r,s){var h,a,u,c=n.nodeName.toLowerCase(),l="#document"!==c,v=o.body;s&&l&&(t=lt.getView().getSize(),t=e(n,null,null,!0)||t,h=ft.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),a=n.parentNode,u=n.nextSibling,h.appendChild(n),v.appendChild(h));var p=lt.settings,g=p.applyMatrix,m=p.insertItems;p.applyMatrix=!1,p.insertItems=!1;var w=d[c],y=w&&w(n,c,r,s)||null;if(p.insertItems=m,p.applyMatrix=g,y){!l||y instanceof I||(y=_(y,n,s));var b=r.onImport,x=l&&n.getAttribute("data-paper-data");b&&(y=b(n,y,r)||y),r.expandShapes&&y instanceof A&&(y.remove(),y=y.toPath()),x&&(y._data=JSON.parse(x))}return h&&(v.removeChild(h),a&&(u?a.insertBefore(n,u):a.appendChild(n))),s&&(i={},y&&f.pick(r.applyMatrix,g)&&y.matrix.apply(!0,!0)),y}function P(t,i,n){if(!t)return null;i="function"==typeof i?{onLoad:i}:i||{};var r=lt,e=null;function s(s){try{var o="object"==typeof s?s:(new h.DOMParser).parseFromString(s.trim(),"image/svg+xml");if(!o.nodeName)throw o=null,new Error("Unsupported SVG source: "+t);lt=r,e=C(o,i,!0),i&&!1===i.insert||n._insertItem(a,e);var f=i.onLoad;f&&f(e,s)}catch(t){u(t)}}function u(t,n){var r=i.onError;if(!r)throw new Error(t);r(t,n)}if("string"!=typeof t||/^[\s\S]*</.test(t)){if("undefined"!=typeof File&&t instanceof File){var f=new FileReader;return f.onload=function(){s(f.result)},f.onerror=function(){u(f.error)},f.readAsText(t)}s(t)}else{var c=o.getElementById(t);c?s(c):at.request({url:t,async:!0,onLoad:s,onError:u})}return e}E.inject({importSVG:function(t,i){return P(t,i,this)}}),M.inject({importSVG:function(t,i){return this.activate(),P(t,i,this)}})},f.exports.PaperScript=function(){var t,i,c,v=this,d=v.acorn;if(!d)try{d=n(9885)}catch(t){}d||(d=t=i={},c=function(t){var i,n,r,e;t.version="0.5.0",t.parse=function(t,e){return n=String(t),r=n.length,h(e),$t(),function(t){m=w=a,i.locations&&(y=new Wt),b=x=null,_=[],Qt();var n=t||fi(),r=!0;for(t||(n.body=[]);l!==A;){var e=xi();n.body.push(e),r&&vi(e)&&ai(!0),r=!1}return li(n,"Program")}(i.program)};var s=t.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function h(t){for(var n in i=t||{},s)Object.prototype.hasOwnProperty.call(i,n)||(i[n]=s[n]);e=i.sourceFile||null}var a,u,o,f,c,l,v,d,p,g,m,w,y,b,_,x,S=t.getLineInfo=function(t,i){for(var n=1,r=0;;){qt.lastIndex=r;var e=qt.exec(t);if(!(e&&e.index<i))break;++n,r=e.index+e[0].length}return{line:n,column:i-r}};function k(t,i){var r=S(n,t);i+=" ("+r.line+":"+r.column+")";var e=new SyntaxError(i);throw e.pos=t,e.loc=r,e.raisedAt=a,e}t.tokenize=function(t,e){n=String(t),r=n.length,h(e),$t();var s={};function m(t){return w=o,Qt(t),s.start=u,s.end=o,s.startLoc=f,s.endLoc=c,s.type=l,s.value=v,s}return m.jumpTo=function(t,r){var e;if(a=t,i.locations)for(p=1,g=qt.lastIndex=0;(e=qt.exec(n))&&e.index<t;)++p,g=e.index+e[0].length;d=r,Jt()},m};var C=[],M={type:"num"},E={type:"regexp"},I={type:"string"},P={type:"name"},A={type:"eof"},T={keyword:"break"},O={keyword:"case",beforeExpr:!0},L={keyword:"catch"},z={keyword:"continue"},D={keyword:"debugger"},B={keyword:"default"},N={keyword:"do",isLoop:!0},F={keyword:"else",beforeExpr:!0},R={keyword:"finally"},j={keyword:"for",isLoop:!0},U={keyword:"function"},q={keyword:"if"},H={keyword:"return",beforeExpr:!0},V={keyword:"switch"},W={keyword:"throw",beforeExpr:!0},$={keyword:"try"},G={keyword:"var"},K={keyword:"while",isLoop:!0},X={keyword:"with"},J={keyword:"new",beforeExpr:!0},Z={keyword:"this"},Q={keyword:"null",atomValue:null},Y={keyword:"true",atomValue:!0},tt={keyword:"false",atomValue:!1},it={keyword:"in",binop:7,beforeExpr:!0},nt={break:T,case:O,catch:L,continue:z,debugger:D,default:B,do:N,else:F,finally:R,for:j,function:U,if:q,return:H,switch:V,throw:W,try:$,var:G,while:K,with:X,null:Q,true:Y,false:tt,new:J,in:it,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:Z,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},rt={type:"[",beforeExpr:!0},et={type:"]"},st={type:"{",beforeExpr:!0},ht={type:"}"},at={type:"(",beforeExpr:!0},ut={type:")"},ot={type:",",beforeExpr:!0},ft={type:";",beforeExpr:!0},ct={type:":",beforeExpr:!0},lt={type:"."},vt={type:"?",beforeExpr:!0},dt={binop:10,beforeExpr:!0},pt={isAssign:!0,beforeExpr:!0},gt={isAssign:!0,beforeExpr:!0},mt={postfix:!0,prefix:!0,isUpdate:!0},wt={prefix:!0,beforeExpr:!0},yt={binop:1,beforeExpr:!0},bt={binop:2,beforeExpr:!0},_t={binop:3,beforeExpr:!0},xt={binop:4,beforeExpr:!0},St={binop:5,beforeExpr:!0},kt={binop:6,beforeExpr:!0},Ct={binop:7,beforeExpr:!0},Mt={binop:8,beforeExpr:!0},Et={binop:9,prefix:!0,beforeExpr:!0},It={binop:10,beforeExpr:!0};for(var Pt in t.tokTypes={bracketL:rt,bracketR:et,braceL:st,braceR:ht,parenL:at,parenR:ut,comma:ot,semi:ft,colon:ct,dot:lt,question:vt,slash:dt,eq:pt,name:P,eof:A,num:M,regexp:E,string:I},nt)t.tokTypes["_"+Pt]=nt[Pt];function At(t){t=t.split(" ");var i="",n=[];t:for(var r=0;r<t.length;++r){for(var e=0;e<n.length;++e)if(n[e][0].length==t[r].length){n[e].push(t[r]);continue t}n.push([t[r]])}function s(t){if(1==t.length)return i+="return str === "+JSON.stringify(t[0])+";";i+="switch(str){";for(var n=0;n<t.length;++n)i+="case "+JSON.stringify(t[n])+":";i+="return true}return false;"}if(n.length>3){for(n.sort((function(t,i){return i.length-t.length})),i+="switch(str.length){",r=0;r<n.length;++r){var h=n[r];i+="case "+h[0].length+":",s(h)}i+="}"}else s(t);return new Function("str",i)}var Tt,Ot=At("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),Lt=At("class enum extends super const export import"),zt=At("implements interface let package private protected public static yield"),Dt=At("eval arguments"),Bt=At("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Nt=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Ft="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",Rt=new RegExp("["+Ft+"]"),jt=new RegExp("["+Ft+"̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿]"),Ut=/[\n\r\u2028\u2029]/,qt=/\r\n|[\n\r\u2028\u2029]/g,Ht=t.isIdentifierStart=function(t){return t<65?36===t:t<91||(t<97?95===t:t<123||t>=170&&Rt.test(String.fromCharCode(t)))},Vt=t.isIdentifierChar=function(t){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||t>=170&&jt.test(String.fromCharCode(t))))};function Wt(){this.line=p,this.column=a-g}function $t(){p=1,a=g=0,d=!0,Jt()}function Gt(t,n){o=a,i.locations&&(c=new Wt),l=t,Jt(),v=n,d=t.beforeExpr}function Kt(){var t,r=i.onComment&&i.locations&&new Wt,e=a,s=n.indexOf("*/",a+=2);if(-1===s&&k(a-2,"Unterminated comment"),a=s+2,i.locations)for(qt.lastIndex=e;(t=qt.exec(n))&&t.index<a;)++p,g=t.index+t[0].length;i.onComment&&i.onComment(!0,n.slice(e+2,s),e,a,r,i.locations&&new Wt)}function Xt(){for(var t=a,e=i.onComment&&i.locations&&new Wt,s=n.charCodeAt(a+=2);a<r&&10!==s&&13!==s&&8232!==s&&8233!==s;)++a,s=n.charCodeAt(a);i.onComment&&i.onComment(!1,n.slice(t+2,a),t,a,e,i.locations&&new Wt)}function Jt(){for(;a<r;){var t=n.charCodeAt(a);if(32===t)++a;else if(13===t)++a,10===(e=n.charCodeAt(a))&&++a,i.locations&&(++p,g=a);else if(10===t||8232===t||8233===t)++a,i.locations&&(++p,g=a);else if(t>8&&t<14)++a;else if(47===t){var e;if(42===(e=n.charCodeAt(a+1)))Kt();else{if(47!==e)break;Xt()}}else if(160===t)++a;else{if(!(t>=5760&&Nt.test(String.fromCharCode(t))))break;++a}}}function Zt(t){switch(t){case 46:return function(){var t=n.charCodeAt(a+1);return t>=48&&t<=57?ni(!0):(++a,Gt(lt))}();case 40:return++a,Gt(at);case 41:return++a,Gt(ut);case 59:return++a,Gt(ft);case 44:return++a,Gt(ot);case 91:return++a,Gt(rt);case 93:return++a,Gt(et);case 123:return++a,Gt(st);case 125:return++a,Gt(ht);case 58:return++a,Gt(ct);case 63:return++a,Gt(vt);case 48:var e=n.charCodeAt(a+1);if(120===e||88===e)return function(){a+=2;var t=ii(16);return null==t&&k(u+2,"Expected hexadecimal number"),Ht(n.charCodeAt(a))&&k(a,"Identifier directly after number"),Gt(M,t)}();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return ni(!1);case 34:case 39:return function(t){a++;for(var e="";;){a>=r&&k(u,"Unterminated string constant");var s=n.charCodeAt(a);if(s===t)return++a,Gt(I,e);if(92===s){s=n.charCodeAt(++a);var h=/^[0-7]+/.exec(n.slice(a,a+3));for(h&&(h=h[0]);h&&parseInt(h,8)>255;)h=h.slice(0,-1);if("0"===h&&(h=null),++a,h)x&&k(a-2,"Octal literal in strict mode"),e+=String.fromCharCode(parseInt(h,8)),a+=h.length-1;else switch(s){case 110:e+="\n";break;case 114:e+="\r";break;case 120:e+=String.fromCharCode(ri(2));break;case 117:e+=String.fromCharCode(ri(4));break;case 85:e+=String.fromCharCode(ri(8));break;case 116:e+="\t";break;case 98:e+="\b";break;case 118:e+="\v";break;case 102:e+="\f";break;case 48:e+="\0";break;case 13:10===n.charCodeAt(a)&&++a;case 10:i.locations&&(g=a,++p);break;default:e+=String.fromCharCode(s)}}else 13!==s&&10!==s&&8232!==s&&8233!==s||k(u,"Unterminated string constant"),e+=String.fromCharCode(s),++a}}(t);case 47:return function(){var t=n.charCodeAt(a+1);return d?(++a,ti()):61===t?Yt(gt,2):Yt(dt,1)}();case 37:case 42:return 61===n.charCodeAt(a+1)?Yt(gt,2):Yt(It,1);case 124:case 38:return function(t){var i=n.charCodeAt(a+1);return i===t?Yt(124===t?yt:bt,2):61===i?Yt(gt,2):Yt(124===t?_t:St,1)}(t);case 94:return 61===n.charCodeAt(a+1)?Yt(gt,2):Yt(xt,1);case 43:case 45:return function(t){var i=n.charCodeAt(a+1);return i===t?45==i&&62==n.charCodeAt(a+2)&&Ut.test(n.slice(w,a))?(a+=3,Xt(),Jt(),Qt()):Yt(mt,2):61===i?Yt(gt,2):Yt(Et,1)}(t);case 60:case 62:return function(t){var i=n.charCodeAt(a+1),r=1;return i===t?(r=62===t&&62===n.charCodeAt(a+2)?3:2,61===n.charCodeAt(a+r)?Yt(gt,r+1):Yt(Mt,r)):33==i&&60==t&&45==n.charCodeAt(a+2)&&45==n.charCodeAt(a+3)?(a+=4,Xt(),Jt(),Qt()):(61===i&&(r=61===n.charCodeAt(a+2)?3:2),Yt(Ct,r))}(t);case 61:case 33:return function(t){return 61===n.charCodeAt(a+1)?Yt(kt,61===n.charCodeAt(a+2)?3:2):Yt(61===t?pt:wt,1)}(t);case 126:return Yt(wt,1)}return!1}function Qt(t){if(t?a=u+1:u=a,i.locations&&(f=new Wt),t)return ti();if(a>=r)return Gt(A);var e=n.charCodeAt(a);if(Ht(e)||92===e)return si();var s=Zt(e);if(!1===s){var h=String.fromCharCode(e);if("\\"===h||Rt.test(h))return si();k(a,"Unexpected character '"+h+"'")}return s}function Yt(t,i){var r=n.slice(a,a+i);a+=i,Gt(t,r)}function ti(){for(var t,i,e=a;;){a>=r&&k(e,"Unterminated regular expression");var s=n.charAt(a);if(Ut.test(s)&&k(e,"Unterminated regular expression"),t)t=!1;else{if("["===s)i=!0;else if("]"===s&&i)i=!1;else if("/"===s&&!i)break;t="\\"===s}++a}var h=n.slice(e,a);++a;var u=ei();u&&!/^[gmsiy]*$/.test(u)&&k(e,"Invalid regexp flag");try{var o=new RegExp(h,u)}catch(t){t instanceof SyntaxError&&k(e,t.message),k(t)}return Gt(E,o)}function ii(t,i){for(var r=a,e=0,s=0,h=null==i?1/0:i;s<h;++s){var u,o=n.charCodeAt(a);if((u=o>=97?o-97+10:o>=65?o-65+10:o>=48&&o<=57?o-48:1/0)>=t)break;++a,e=e*t+u}return a===r||null!=i&&a-r!==i?null:e}function ni(t){var i=a,r=!1,e=48===n.charCodeAt(a);t||null!==ii(10)||k(i,"Invalid number"),46===n.charCodeAt(a)&&(++a,ii(10),r=!0);var s=n.charCodeAt(a);69!==s&&101!==s||(43!==(s=n.charCodeAt(++a))&&45!==s||++a,null===ii(10)&&k(i,"Invalid number"),r=!0),Ht(n.charCodeAt(a))&&k(a,"Identifier directly after number");var h,u=n.slice(i,a);return r?h=parseFloat(u):e&&1!==u.length?/[89]/.test(u)||x?k(i,"Invalid number"):h=parseInt(u,8):h=parseInt(u,10),Gt(M,h)}function ri(t){var i=ii(16,t);return null===i&&k(u,"Bad character escape sequence"),i}function ei(){Tt=!1;for(var t,i=!0,r=a;;){var e=n.charCodeAt(a);if(Vt(e))Tt&&(t+=n.charAt(a)),++a;else{if(92!==e)break;Tt||(t=n.slice(r,a)),Tt=!0,117!=n.charCodeAt(++a)&&k(a,"Expecting Unicode escape sequence \\uXXXX"),++a;var s=ri(4),h=String.fromCharCode(s);h||k(a-1,"Invalid Unicode escape"),(i?Ht(s):Vt(s))||k(a-4,"Invalid Unicode escape"),t+=h}i=!1}return Tt?t:n.slice(r,a)}function si(){var t=ei(),i=P;return!Tt&&Bt(t)&&(i=nt[t]),Gt(i,t)}function hi(){m=u,w=o,y=c,Qt()}function ai(t){if(x=t,a=u,i.locations)for(;a<g;)g=n.lastIndexOf("\n",g-2)+1,--p;Jt(),Qt()}function ui(){this.type=null,this.start=u,this.end=null}function oi(){this.start=f,this.end=null,null!==e&&(this.source=e)}function fi(){var t=new ui;return i.locations&&(t.loc=new oi),i.directSourceFile&&(t.sourceFile=i.directSourceFile),i.ranges&&(t.range=[u,0]),t}function ci(t){var n=new ui;return n.start=t.start,i.locations&&(n.loc=new oi,n.loc.start=t.loc.start),i.ranges&&(n.range=[t.range[0],0]),n}function li(t,n){return t.type=n,t.end=w,i.locations&&(t.loc.end=y),i.ranges&&(t.range[1]=w),t}function vi(t){return i.ecmaVersion>=5&&"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"use strict"===t.expression.value}function di(t){if(l===t)return hi(),!0}function pi(){return!i.strictSemicolons&&(l===A||l===ht||Ut.test(n.slice(w,u)))}function gi(){di(ft)||pi()||wi()}function mi(t){l===t?hi():wi()}function wi(){k(u,"Unexpected token")}function yi(t){"Identifier"!==t.type&&"MemberExpression"!==t.type&&k(t.start,"Assigning to rvalue"),x&&"Identifier"===t.type&&Dt(t.name)&&k(t.start,"Assigning to "+t.name+" in strict mode")}var bi={kind:"loop"},_i={kind:"switch"};function xi(){(l===dt||l===gt&&"/="==v)&&Qt(!0);var t=l,r=fi();switch(t){case T:case z:hi();var e=t===T;di(ft)||pi()?r.label=null:l!==P?wi():(r.label=Ni(),gi());for(var s=0;s<_.length;++s){var h=_[s];if(null==r.label||h.name===r.label.name){if(null!=h.kind&&(e||"loop"===h.kind))break;if(r.label&&e)break}}return s===_.length&&k(r.start,"Unsyntactic "+t.keyword),li(r,e?"BreakStatement":"ContinueStatement");case D:return hi(),gi(),li(r,"DebuggerStatement");case N:return hi(),_.push(bi),r.body=xi(),_.pop(),mi(K),r.test=Si(),gi(),li(r,"DoWhileStatement");case j:if(hi(),_.push(bi),mi(at),l===ft)return Ci(r,null);if(l===G){var a=fi();return hi(),Ei(a,!0),li(a,"VariableDeclaration"),1===a.declarations.length&&di(it)?Mi(r,a):Ci(r,a)}return a=Ii(!1,!0),di(it)?(yi(a),Mi(r,a)):Ci(r,a);case U:return hi(),Di(r,!0);case q:return hi(),r.test=Si(),r.consequent=xi(),r.alternate=di(F)?xi():null,li(r,"IfStatement");case H:return b||i.allowReturnOutsideFunction||k(u,"'return' outside of function"),hi(),di(ft)||pi()?r.argument=null:(r.argument=Ii(),gi()),li(r,"ReturnStatement");case V:hi(),r.discriminant=Si(),r.cases=[],mi(st),_.push(_i);for(var o,f;l!=ht;)if(l===O||l===B){var c=l===O;o&&li(o,"SwitchCase"),r.cases.push(o=fi()),o.consequent=[],hi(),c?o.test=Ii():(f&&k(m,"Multiple default clauses"),f=!0,o.test=null),mi(ct)}else o||wi(),o.consequent.push(xi());return o&&li(o,"SwitchCase"),hi(),_.pop(),li(r,"SwitchStatement");case W:return hi(),Ut.test(n.slice(w,u))&&k(w,"Illegal newline after throw"),r.argument=Ii(),gi(),li(r,"ThrowStatement");case $:if(hi(),r.block=ki(),r.handler=null,l===L){var d=fi();hi(),mi(at),d.param=Ni(),x&&Dt(d.param.name)&&k(d.param.start,"Binding "+d.param.name+" in strict mode"),mi(ut),d.guard=null,d.body=ki(),r.handler=li(d,"CatchClause")}return r.guardedHandlers=C,r.finalizer=di(R)?ki():null,r.handler||r.finalizer||k(r.start,"Missing catch or finally clause"),li(r,"TryStatement");case G:return hi(),Ei(r),gi(),li(r,"VariableDeclaration");case K:return hi(),r.test=Si(),_.push(bi),r.body=xi(),_.pop(),li(r,"WhileStatement");case X:return x&&k(u,"'with' in strict mode"),hi(),r.object=Si(),r.body=xi(),li(r,"WithStatement");case st:return ki();case ft:return hi(),li(r,"EmptyStatement");default:var p=v,g=Ii();if(t===P&&"Identifier"===g.type&&di(ct)){for(s=0;s<_.length;++s)_[s].name===p&&k(g.start,"Label '"+p+"' is already declared");var y=l.isLoop?"loop":l===V?"switch":null;return _.push({name:p,kind:y}),r.body=xi(),_.pop(),r.label=g,li(r,"LabeledStatement")}return r.expression=g,gi(),li(r,"ExpressionStatement")}}function Si(){mi(at);var t=Ii();return mi(ut),t}function ki(t){var i,n=fi(),r=!0,e=!1;for(n.body=[],mi(st);!di(ht);){var s=xi();n.body.push(s),r&&t&&vi(s)&&(i=e,ai(e=!0)),r=!1}return e&&!i&&ai(!1),li(n,"BlockStatement")}function Ci(t,i){return t.init=i,mi(ft),t.test=l===ft?null:Ii(),mi(ft),t.update=l===ut?null:Ii(),mi(ut),t.body=xi(),_.pop(),li(t,"ForStatement")}function Mi(t,i){return t.left=i,t.right=Ii(),mi(ut),t.body=xi(),_.pop(),li(t,"ForInStatement")}function Ei(t,i){for(t.declarations=[],t.kind="var";;){var n=fi();if(n.id=Ni(),x&&Dt(n.id.name)&&k(n.id.start,"Binding "+n.id.name+" in strict mode"),n.init=di(pt)?Ii(!0,i):null,t.declarations.push(li(n,"VariableDeclarator")),!di(ot))break}return t}function Ii(t,i){var n=Pi(i);if(!t&&l===ot){var r=ci(n);for(r.expressions=[n];di(ot);)r.expressions.push(Pi(i));return li(r,"SequenceExpression")}return n}function Pi(t){var i=function(t){var i=function(t){return Ai(Ti(),-1,t)}(t);if(di(vt)){var n=ci(i);return n.test=i,n.consequent=Ii(!0),mi(ct),n.alternate=Ii(!0,t),li(n,"ConditionalExpression")}return i}(t);if(l.isAssign){var n=ci(i);return n.operator=v,n.left=i,hi(),n.right=Pi(t),yi(i),li(n,"AssignmentExpression")}return i}function Ai(t,i,n){var r=l.binop;if(null!=r&&(!n||l!==it)&&r>i){var e=ci(t);e.left=t,e.operator=v;var s=l;return hi(),e.right=Ai(Ti(),r,n),Ai(li(e,s===yt||s===bt?"LogicalExpression":"BinaryExpression"),i,n)}return t}function Ti(){if(l.prefix){var t=fi(),i=l.isUpdate;return t.operator=v,t.prefix=!0,d=!0,hi(),t.argument=Ti(),i?yi(t.argument):x&&"delete"===t.operator&&"Identifier"===t.argument.type&&k(t.start,"Deleting local variable in strict mode"),li(t,i?"UpdateExpression":"UnaryExpression")}for(var n=Oi(Li());l.postfix&&!pi();)(t=ci(n)).operator=v,t.prefix=!1,t.argument=n,yi(n),hi(),n=li(t,"UpdateExpression");return n}function Oi(t,i){var n;return di(lt)?((n=ci(t)).object=t,n.property=Ni(!0),n.computed=!1,Oi(li(n,"MemberExpression"),i)):di(rt)?((n=ci(t)).object=t,n.property=Ii(),n.computed=!0,mi(et),Oi(li(n,"MemberExpression"),i)):!i&&di(at)?((n=ci(t)).callee=t,n.arguments=Bi(ut,!1),Oi(li(n,"CallExpression"),i)):t}function Li(){switch(l){case Z:var t=fi();return hi(),li(t,"ThisExpression");case P:return Ni();case M:case I:case E:return(t=fi()).value=v,t.raw=n.slice(u,o),hi(),li(t,"Literal");case Q:case Y:case tt:return(t=fi()).value=l.atomValue,t.raw=l.keyword,hi(),li(t,"Literal");case at:var r=f,e=u;hi();var s=Ii();return s.start=e,s.end=o,i.locations&&(s.loc.start=r,s.loc.end=c),i.ranges&&(s.range=[e,o]),mi(ut),s;case rt:return t=fi(),hi(),t.elements=Bi(et,!0,!0),li(t,"ArrayExpression");case st:return function(){var t=fi(),n=!0,r=!1;for(t.properties=[],hi();!di(ht);){if(n)n=!1;else if(mi(ot),i.allowTrailingCommas&&di(ht))break;var e,s={key:zi()},h=!1;if(di(ct)?(s.value=Ii(!0),e=s.kind="init"):i.ecmaVersion>=5&&"Identifier"===s.key.type&&("get"===s.key.name||"set"===s.key.name)?(h=r=!0,e=s.kind=s.key.name,s.key=zi(),l!==at&&wi(),s.value=Di(fi(),!1)):wi(),"Identifier"===s.key.type&&(x||r))for(var a=0;a<t.properties.length;++a){var u=t.properties[a];if(u.key.name===s.key.name){var o=e==u.kind||h&&"init"===u.kind||"init"===e&&("get"===u.kind||"set"===u.kind);o&&!x&&"init"===e&&"init"===u.kind&&(o=!1),o&&k(s.key.start,"Redefinition of property")}}t.properties.push(s)}return li(t,"ObjectExpression")}();case U:return t=fi(),hi(),Di(t,!1);case J:return function(){var t=fi();return hi(),t.callee=Oi(Li(),!0),di(at)?t.arguments=Bi(ut,!1):t.arguments=C,li(t,"NewExpression")}();default:wi()}}function zi(){return l===M||l===I?Li():Ni(!0)}function Di(t,i){l===P?t.id=Ni():i?wi():t.id=null,t.params=[];var n=!0;for(mi(at);!di(ut);)n?n=!1:mi(ot),t.params.push(Ni());var r=b,e=_;if(b=!0,_=[],t.body=ki(!0),b=r,_=e,x||t.body.body.length&&vi(t.body.body[0]))for(var s=t.id?-1:0;s<t.params.length;++s){var h=s<0?t.id:t.params[s];if((zt(h.name)||Dt(h.name))&&k(h.start,"Defining '"+h.name+"' in strict mode"),s>=0)for(var a=0;a<s;++a)h.name===t.params[a].name&&k(h.start,"Argument name clash in strict mode")}return li(t,i?"FunctionDeclaration":"FunctionExpression")}function Bi(t,n,r){for(var e=[],s=!0;!di(t);){if(s)s=!1;else if(mi(ot),n&&i.allowTrailingCommas&&di(t))break;r&&l===ot?e.push(null):e.push(Ii(!0))}return e}function Ni(t){var r=fi();return t&&"everywhere"==i.forbidReserved&&(t=!1),l===P?(!t&&(i.forbidReserved&&(3===i.ecmaVersion?Ot:Lt)(v)||x&&zt(v))&&-1==n.slice(u,o).indexOf("\\")&&k(u,"The keyword '"+v+"' is reserved"),r.name=v):t&&l.keyword?r.name=l.keyword:wi(),d=!1,hi(),li(r,"Identifier")}},"object"==typeof t&&"object"==typeof i?c(t):(r=[t],(s="function"==typeof(e=c)?e.apply(t,r):e)===a||(i.exports=s)),d.version||(d=null));function p(t,i){return(v.acorn||d).parse(t,i)}var g={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},m={"-":"__negate","+":"__self"},y=f.each(["add","subtract","multiply","divide","modulo","equals","negate"],(function(t){this["__"+t]="#"+t}),{__self:function(){return this}});function _(t,i,n){var r=g[i];if(t&&t[r]){var e=t[r](n);return"!="===i?!e:e}switch(i){case"+":return t+n;case"-":return t-n;case"*":return t*n;case"/":return t/n;case"%":return t%n;case"==":return t==n;case"!=":return t!=n}}function x(t,i){var n=m[t];if(i&&i[n])return i[n]();switch(t){case"+":return+i;case"-":return-i}}function S(t,i){if(!t)return"";var n=[];function r(t){for(var i=0,r=n.length;i<r;i++){var e=n[i];if(e[0]>=t)break;t+=e[1]}return t}function e(i){return t.substring(r(i.range[0]),r(i.range[1]))}function s(i,e){for(var s=r(i.range[0]),h=r(i.range[1]),a=0,u=n.length-1;u>=0;u--)if(s>n[u][0]){a=u+1;break}n.splice(a,0,[s,e.length-h+s]),t=t.substring(0,s)+e+t.substring(h)}function a(i,n){switch(i.type){case"UnaryExpression":if(i.operator in m&&"Literal"!==i.argument.type){var h=e(i.argument);s(i,'$__("'+i.operator+'", '+h+")")}break;case"BinaryExpression":if(i.operator in g&&"Literal"!==i.left.type){var a=e(i.left),u=e(i.right),o=function(i,n){return t.substring(r(i.range[1]),r(n.range[0]))}(i.left,i.right),f=i.operator;s(i,"__$__("+a+","+o.replace(new RegExp("\\"+f),'"'+f+'"')+", "+u+")")}break;case"UpdateExpression":case"AssignmentExpression":var c=n&&n.type;if(!("ForStatement"===c||"BinaryExpression"===c&&/^[=!<>]/.test(n.operator)||"MemberExpression"===c&&n.computed))if("UpdateExpression"===i.type){var l=(h=e(i.argument))+" = "+(v="__$__("+h+', "'+i.operator[0]+'", 1)');i.prefix?l="("+l+")":"AssignmentExpression"!==c&&"VariableDeclarator"!==c&&"BinaryExpression"!==c||(e(n.left||n.id)===h&&(l=v),l=h+"; "+l),s(i,l)}else if(/^.=$/.test(i.operator)&&"Literal"!==i.left.type){a=e(i.left),u=e(i.right);var v=a+" = __$__("+a+', "'+i.operator[0]+'", '+u+")";s(i,/^\(.*\)$/.test(e(i))?"("+v+")":v)}}}var f,c=(i=i||{}).url||"",l=i.sourceMaps,v=i.paperFeatures||{},d=i.source||t,w=i.offset||0,y=lt.agent,b=y.versionNumber,_=!1,x=/\r\n|\n|\r/gm;if(l&&(y.chrome&&b>=30||y.webkit&&b>=537.76||y.firefox&&b>=23||y.node)){if(y.node)w-=2;else if(u&&c&&!u.location.href.indexOf(c)){var S=o.getElementsByTagName("html")[0].innerHTML;w=S.substr(0,S.indexOf(t)+1).match(x).length+1}var k=["AA"+function(t){var i="";for(t=(Math.abs(t)<<1)+(t<0?1:0);t||!i;){var n=31&t;(t>>=5)&&(n|=32),i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[n]}return i}((_=w>0&&!(y.chrome&&b>=36||y.safari&&b>=600||y.firefox&&b>=40||y.node))?0:w)+"A"];k.length=(t.match(x)||[]).length+1+(_?w:0),f={version:3,file:c,names:[],mappings:k.join(";AACA"),sourceRoot:"",sources:[c],sourcesContent:[d]}}return!1===v.operatorOverloading&&!1===v.moduleExports||function t(i,n,r){if(i){for(var h in i)if("range"!==h&&"loc"!==h){var u=i[h];if(Array.isArray(u))for(var o=0,f=u.length;o<f;o++)t(u[o],i,r);else u&&"object"==typeof u&&t(u,i,r)}!1!==r.operatorOverloading&&a(i,n),!1!==r.moduleExports&&function(t){switch(t.type){case"ExportDefaultDeclaration":s({range:[t.start,t.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var i=t.declaration,n=t.specifiers;if(i){var r=i.declarations;r&&(r.forEach((function(t){s(t,"module.exports."+e(t))})),s({range:[t.start,i.start+i.kind.length]},""))}else if(n){var h=n.map((function(t){var i=e(t);return"module.exports."+i+" = "+i+"; "})).join("");h&&s(t,h)}}}(i)}}(p(t,{ranges:!0,preserveParens:!0,sourceType:"module"}),null,v),f&&(_&&(t=new Array(w+1).join("\n")+t),/^(inline|both)$/.test(l)&&(t+="\n//# sourceMappingURL=data:application/json;base64,"+h.btoa(unescape(encodeURIComponent(JSON.stringify(f))))),t+="\n//# sourceURL="+(c||"paperscript")),{url:c,source:d,code:t,map:f}}function k(t,i,n){lt=i;var r,e=i.getView(),s=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(t)&&!/\bnew\s+Tool\b/.test(t)?new st:null,h=s?s._events:[],a=["onFrame","onResize"].concat(h),u=[],c=[],l="object"==typeof t?t:S(t,n);function v(i,n){for(var r in i)!n&&/^_/.test(r)||!new RegExp("([\\b\\s\\W]|^)"+r.replace(/\$/g,"\\$")+"\\b").test(t)||(u.push(r),c.push(i[r]))}t=l.code,v({__$__:_,$__:x,paper:i,tool:s},!0),v(i),t="var module = { exports: {} }; "+t,(m=f.each(a,(function(i){new RegExp("\\s+"+i+"\\b").test(t)&&(u.push(i),this.push("module.exports."+i+" = "+i+";"))}),[]).join("\n"))&&(t+="\n"+m),t+="\nreturn module.exports;";var d=lt.agent;if(o&&(d.chrome||d.firefox&&d.versionNumber<40)){var p=o.createElement("script"),g=o.head||o.getElementsByTagName("head")[0];d.firefox&&(t="\n"+t),p.appendChild(o.createTextNode("document.__paperscript__ = function("+u+") {"+t+"\n}")),g.appendChild(p),r=o.__paperscript__,delete o.__paperscript__,g.removeChild(p)}else r=Function(u,t);var m,y=(m=r&&r.apply(i,c))||{};return f.each(h,(function(t){var i=y[t];i&&(s[t]=i)})),e&&(y.onResize&&e.setOnResize(y.onResize),e.emit("resize",{size:e.size,delta:new w}),y.onFrame&&e.setOnFrame(y.onFrame),e.requestUpdate()),m}function C(t){if(/^text\/(?:x-|)paperscript$/.test(t.type)&&"true"!==l.getAttribute(t,"ignore")){var i=l.getAttribute(t,"canvas"),n=o.getElementById(i),r=t.src||t.getAttribute("data-src"),e=l.hasAttribute(t,"async"),s="data-paper-scope";if(!n)throw new Error('Unable to find canvas with id "'+i+'"');var h=l.get(n.getAttribute(s))||(new l).setup(n);return n.setAttribute(s,h._id),r?at.request({url:r,async:e,mimeType:"text/plain",onLoad:function(t){k(t,h,r)}}):k(t.innerHTML,h,t.baseURI),t.setAttribute("data-paper-ignore","true"),h}}function M(){f.each(o&&o.getElementsByTagName("script"),C)}return w.inject(y),b.inject(y),$.inject(y),u&&("complete"===o.readyState?setTimeout(M):Z.add(u,{load:M})),{compile:S,execute:k,load:function(t){return t?C(t):M()},parse:p,calculateBinary:_,calculateUnary:x}}.call(this);var lt=new(l.inject(f.exports,{Base:f,Numerical:g,Key:nt,DomEvent:Z,DomElement:J,document:o,window:u,Symbol:L,PlacedSymbol:O}));return lt.agent.node&&n(4169)(lt),(s="function"==typeof(e=lt)?e.call(i,n,i,t):e)===a||(t.exports=s),lt}).call(this,"object"==typeof self?self:null)}}]);
//# sourceMappingURL=42.bundle.js.map