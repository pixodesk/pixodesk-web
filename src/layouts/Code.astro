---
import type { ShowcaseSection } from "../types/types";
import "./code.scss";

interface Props {
  title: string;
  subTitle: string;
  subSections?: ShowcaseSection[];
}
import { marked } from "marked";
const { title, subTitle, subSections} = Astro.props;

import ArrowDown from './ArrowDown.astro';
---

<>
  {
    title && (
      <div
        class="text-center font-bold mb-8"
        set:html={marked(title)}
      />
    )
  }
  {
    subTitle && (
      <div
        class="text-center font-bold mb-20"
        set:html={marked(subTitle)}
      />
    )
  }

  {
    Array.isArray(subSections) && (
      <div class="grid grid-cols-1 md:grid-cols-2 items-start px-pxPage gap-8">
        {subSections.map((subSection: ShowcaseSection, index: number) => (
          <div
            class={
              index === 0
                ? "sm:relative md:translate-x-4 md:-rotate-6 sm:translate-x-0 sm:-rotate-0"
                : "relative md:-translate-x-4 md:translate-y-2 md:rotate-6 sm:-translate-x-0 sm:translate-y-0 sm:rotate-0"
            }
          >
            <div
              class={
                index === 0
                  ? "absolute w-1/3 z-[4] -top-8 left-[85%] hidden md:block"
                  : "absolute w-1/3 z-[4] -bottom-20 -left-10 rotate-180 hidden md:block"
              }
            >
              <ArrowDown />
            </div>

            {subSection.header && (
              <div
                class="text-center mb-4 font-caveat"
                set:html={marked(subSection.header)}
              />
            )}

            {subSection.image && (
              <div class="stacked-paper stacked-paper-orange mb-4">
                <img
                  src={subSection.image}
                  alt={subSection.header}
                  class="w-full h-auto object-cover rounded-sm"
                />
              </div>
            )}

            {subSection.footer && (
              <div
                class="text-center mb-0 font-caveat"
                set:html={marked(subSection.footer)}
              />
            )}
          </div>
        ))}
      </div>
    )
  }
</>
