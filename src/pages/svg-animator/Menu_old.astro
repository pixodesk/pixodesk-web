---
const { pathname } = Astro.url;

// Define your menus
const menus = [
  {
    label: "Main",
    href: "/",
    subMenu: [],
  },
  {
    label: "Lottie",
    href: "/lottie",
    subMenu: [
      { label: "Releases", href: "/lottie/releases" },
      { label: "Features", href: "/lottie/features" },
      { label: "Install", href: "/lottie/install" },
    ],
  },
  {
    label: "SVG Editor",
    href: "/svg",
    subMenu: [
      { label: "Releases", href: "/svg/releases" },
      { label: "Features", href: "/svg/features" },
      { label: "Install", href: "/svg/install" },
    ],
  },
  {
    label: "SVG Animator",
    href: "/svga",
    subMenu: [
      { label: "Releases", href: "/svga/releases" },
      { label: "Features", href: "/svga/features" },
      { label: "Install", href: "/svga/install" },
    ],
  },
];

// Detect active parent menu
function isActiveParent(menu: { href: string }) {
  return pathname === menu.href || pathname.startsWith(menu.href + "/");
}
---
<nav>
  <!-- Top-level menu -->
  <div class="flex space-x-6 border-b pb-2 mb-2">
    {menus.map((menu) => (
      <a
        href={menu.href}
        class={`hover:underline ${
          isActiveParent(menu) ? "font-bold text-blue-600" : "text-blue-500"
        }`}
      >
        {menu.label}
      </a>
    ))}
  </div>

  <!-- Sub-menu (shows only if parent is active and has items) -->
  {menus.map((menu) =>
    isActiveParent(menu) && menu.subMenu.length > 0 ? (
      <div class="flex space-x-4 mb-6">
        {menu.subMenu.map((sub) => (
          <a
            href={sub.href}
            class={`hover:underline ${
              pathname === sub.href ? "font-semibold text-blue-600" : "text-gray-600"
            }`}
          >
            {sub.label}
          </a>
        ))}
      </div>
    ) : null
  )}
</nav>
